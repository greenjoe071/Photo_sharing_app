/*! For license information please see main.8bd4c8b9.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},569:function(e,t,n){e.exports=n(36)},381:function(e,t,n){"use strict";var r=n(589),i=n(297),o=n(301),a=n(774),s=n(804),u=n(145),c=n(411),l=n(467),h=n(221),f=n(346);e.exports=function(e){return new Promise((function(t,n){var d,p=e.data,v=e.headers,y=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(p)&&delete v["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var k=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(k+":"+b)}var _=s(e.baseURL,e.url);function w(){if(g){var r="getAllResponseHeaders"in g?u(g.getAllResponseHeaders()):null,o={data:y&&"text"!==y&&"json"!==y?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g};i((function(e){t(e),m()}),(function(e){n(e),m()}),o),g=null}}if(g.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(w)},g.onabort=function(){g&&(n(l("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){n(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||h.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var x=(e.withCredentials||c(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;x&&(v[e.xsrfHeaderName]=x)}"setRequestHeader"in g&&r.forEach(v,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete v[t]:g.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),y&&"json"!==y&&(g.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){g&&(n(!e||e&&e.type?new f("canceled"):e),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),p||(p=null),g.send(p)}))}},36:function(e,t,n){"use strict";var r=n(589),i=n(49),o=n(773),a=n(777);var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(221));s.Axios=o,s.Cancel=n(346),s.CancelToken=n(857),s.isCancel=n(517),s.VERSION=n(600).version,s.all=function(e){return Promise.all(e)},s.spread=n(89),s.isAxiosError=n(580),e.exports=s,e.exports.default=s},346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},857:function(e,t,n){"use strict";var r=n(346);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},773:function(e,t,n){"use strict";var r=n(589),i=n(774),o=n(470),a=n(733),s=n(777),u=n(835),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){if("string"===typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var h=[a,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),o=Promise.resolve(t);h.length;)o=o.then(h.shift(),h.shift());return o}for(var f=t;r.length;){var d=r.shift(),p=r.shift();try{f=d(f)}catch(v){p(v);break}}try{o=a(f)}catch(v){return Promise.reject(v)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},470:function(e,t,n){"use strict";var r=n(589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},804:function(e,t,n){"use strict";var r=n(44),i=n(549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},467:function(e,t,n){"use strict";var r=n(460);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},733:function(e,t,n){"use strict";var r=n(589),i=n(693),o=n(517),a=n(221),s=n(346);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},460:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},777:function(e,t,n){"use strict";var r=n(589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},297:function(e,t,n){"use strict";var r=n(467);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},693:function(e,t,n){"use strict";var r=n(589),i=n(221);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},221:function(e,t,n){"use strict";var r=n(589),i=n(341),o=n(460),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(381)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a){if("SyntaxError"===s.name)throw o(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},600:function(e){e.exports={version:"0.25.0"}},49:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},774:function(e,t,n){"use strict";var r=n(589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},301:function(e,t,n){"use strict";var r=n(589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},44:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},580:function(e,t,n){"use strict";var r=n(589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},411:function(e,t,n){"use strict";var r=n(589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},341:function(e,t,n){"use strict";var r=n(589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},145:function(e,t,n){"use strict";var r=n(589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},89:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},835:function(e,t,n){"use strict";var r=n(600).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},589:function(e,t,n){"use strict";var r=n(49),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function a(e){return"undefined"===typeof e}function s(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function h(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:h,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),v=u(n),y=0;y<a.length;++y){var m=a[y];if(!o[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case s:case a:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(u[l]=a[l]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},281:function(e){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=256,o=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var r=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=this._encodeByte(r>>>6&63),t+=this._encodeByte(r>>>0&63)}var i=e.length-n;return i>0&&(r=e[n]<<16|(2===i?e[n+1]<<8:0),t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=2===i?this._encodeByte(r>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,r=new Uint8Array(this.maxDecodedLength(n)),o=0,a=0,s=0,u=0,c=0,l=0,h=0;a<n-4;a+=4)u=this._decodeChar(e.charCodeAt(a+0)),c=this._decodeChar(e.charCodeAt(a+1)),l=this._decodeChar(e.charCodeAt(a+2)),h=this._decodeChar(e.charCodeAt(a+3)),r[o++]=u<<2|c>>>4,r[o++]=c<<4|l>>>2,r[o++]=l<<6|h,s|=u&i,s|=c&i,s|=l&i,s|=h&i;if(a<n-1&&(u=this._decodeChar(e.charCodeAt(a)),c=this._decodeChar(e.charCodeAt(a+1)),r[o++]=u<<2|c>>>4,s|=u&i,s|=c&i),a<n-2&&(l=this._decodeChar(e.charCodeAt(a+2)),r[o++]=c<<4|l>>>2,s|=l&i),a<n-3&&(h=this._decodeChar(e.charCodeAt(a+3)),r[o++]=l<<6|h,s|=h&i),0!==s)throw new Error("Base64Coder: incorrect characters for decoding");return r},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=i;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=o;var a=new o;t.encode=function(e){return a.encode(e)},t.decode=function(e){return a.decode(e)};var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=i;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(o);t.URLSafeCoder=s;var u=new s;t.encodeURLSafe=function(e){return u.encode(e)},t.decodeURLSafe=function(e){return u.decode(e)},t.encodedLength=function(e){return a.encodedLength(e)},t.maxDecodedLength=function(e){return a.maxDecodedLength(e)},t.decodedLength=function(e){return a.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="utf8: invalid string",i="utf8: invalid source encoding";function o(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else{if(!(i<=57343))throw new Error(r);if(n>=e.length-1)throw new Error(r);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(o(e)),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192|i>>6,t[n++]=128|63&i):i<55296?(t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|63&i):(r++,i=(1023&i)<<10,i|=1023&e.charCodeAt(r),i+=65536,t[n++]=240|i>>18,t[n++]=128|i>>12&63,t[n++]=128|i>>6&63,t[n++]=128|63&i)}return t},t.encodedLength=o,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(128&r){var o=void 0;if(r<224){if(n>=e.length)throw new Error(i);if(128!==(192&(a=e[++n])))throw new Error(i);r=(31&r)<<6|63&a,o=128}else if(r<240){if(n>=e.length-1)throw new Error(i);var a=e[++n],s=e[++n];if(128!==(192&a)||128!==(192&s))throw new Error(i);r=(15&r)<<12|(63&a)<<6|63&s,o=2048}else{if(!(r<248))throw new Error(i);if(n>=e.length-2)throw new Error(i);a=e[++n],s=e[++n];var u=e[++n];if(128!==(192&a)||128!==(192&s)||128!==(192&u))throw new Error(i);r=(15&r)<<18|(63&a)<<12|(63&s)<<6|63&u,o=65536}if(r<o||r>=55296&&r<=57343)throw new Error(i);if(r>=65536){if(r>1114111)throw new Error(i);r-=65536,t.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}t.push(String.fromCharCode(r))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);for(var r=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,o=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=o,{number:t,id:n,name:r,callback:o}},e.prototype.remove=function(e){delete this[e.number]},e}(),i=new r("_pusher_script_","Pusher.ScriptReceivers"),o={VERSION:"7.0.4",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},a=function(){function e(e){this.options=e,this.receivers=e.receivers||i,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var i=Et.createScriptRequest(r.getPath(e,t)),o=r.receivers.create((function(t){if(r.receivers.remove(o),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var a=function(e){e||i.cleanup()},s=0;s<n.length;s++)n[s](t,a)}}));i.send(o)}},e.prototype.getRoot=function(e){var t=Et.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),s=new r("_pusher_dependencies","Pusher.DependenciesReceivers"),u=new a({cdn_http:o.cdn_http,cdn_https:o.cdn_https,version:o.VERSION,suffix:o.dependency_suffix,receivers:s}),c={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},l=function(e){var t,n=c.urls[e];return n?(n.fullUrl?t=n.fullUrl:n.path&&(t=c.baseUrl+n.path),t?"See: "+t:""):""},h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),d=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),p=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),v=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),y=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),m=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),g=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return h(t,e),t}(Error),k=function(e){function t(t,n){var r=this.constructor,i=e.call(this,n)||this;return i.status=t,Object.setPrototypeOf(i,r.prototype),i}return h(t,e),t}(Error),b=function(e,t,n){var r,i=this;for(var o in(r=Et.createXHR()).open("POST",i.options.authEndpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)r.setRequestHeader(o,this.authOptions.headers[o]);return r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var e=void 0,t=!1;try{e=JSON.parse(r.responseText),t=!0}catch(a){n(new k(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+r.responseText),{auth:""})}t&&n(null,e)}else{var o=l("authenticationEndpoint");n(new k(r.status,"Unable to retrieve auth string from auth endpoint - received status: "+r.status+" from "+i.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+o),{auth:""})}},r.send(this.composeQuery(t)),r},_=String.fromCharCode,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x={},S=0,T=w.length;S<T;S++)x[w.charAt(S)]=S;var E=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?_(192|t>>>6)+_(128|63&t):_(224|t>>>12&15)+_(128|t>>>6&63)+_(128|63&t)},C=function(e){return e.replace(/[^\x00-\x7F]/g,E)},I=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[w.charAt(n>>>18),w.charAt(n>>>12&63),t>=2?"=":w.charAt(n>>>6&63),t>=1?"=":w.charAt(63&n)].join("")},R=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,I)},N=function(){function e(e,t,n,r){var i=this;this.clear=t,this.timer=e((function(){i.timer&&(i.timer=r(i.timer))}),n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),P=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function A(e){window.clearTimeout(e)}function O(e){window.clearInterval(e)}var D=function(e){function t(t,n){return e.call(this,setTimeout,A,t,(function(e){return n(),null}))||this}return P(t,e),t}(N),L=function(e){function t(t,n){return e.call(this,setInterval,O,t,(function(e){return n(),e}))||this}return P(t,e),t}(N),M={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new D(0,e)},method:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}},F=M;function U(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)i[o]&&i[o].constructor&&i[o].constructor===Object?e[o]=U(e[o]||{},i[o]):e[o]=i[o]}return e}function j(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"===typeof arguments[t]?e.push(arguments[t]):e.push(J(arguments[t]));return e.join(" : ")}function q(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function V(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function B(e){var t=[];return V(e,(function(e,n){t.push(n)})),t}function z(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function W(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function H(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function K(e,t){var n={};return V(e,(function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)})),n}function G(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Q(e){return function(e,t){var n={};return V(e,(function(e,r){n[r]=t(e)})),n}(e,(function(e){return"object"===typeof e&&(e=J(e)),encodeURIComponent((t=e.toString(),R(C(t))));var t}))}function Y(e){return W(function(e){var t=[];return V(e,(function(e,n){t.push([n,e])})),t}(Q(K(e,(function(e){return void 0!==e})))),F.method("join","=")).join("&")}function J(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(function(e){var t=[],n=[];return function e(r,i){var o,a,s;switch(typeof r){case"object":if(!r)return null;for(o=0;o<t.length;o+=1)if(t[o]===r)return{$ref:n[o]};if(t.push(r),n.push(i),"[object Array]"===Object.prototype.toString.apply(r))for(s=[],o=0;o<r.length;o+=1)s[o]=e(r[o],i+"["+o+"]");else for(a in s={},r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=e(r[a],i+"["+JSON.stringify(a)+"]"));return s;case"number":case"string":case"boolean":return r}}(e,"$")}(e))}}var $=function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=j.apply(this,arguments);if(qt.log)qt.log(r);else if(qt.logToConsole){var i=e.bind(this);i(r)}},e}(),X=new $,Z=function(e,t,n){void 0!==this.authOptions.headers&&X.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var i=e.getDocument(),o=i.createElement("script");e.auth_callbacks[r]=function(e){n(null,e)};var a="Pusher.auth_callbacks['"+r+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(a)+"&"+this.composeQuery(t);var s=i.getElementsByTagName("head")[0]||i.documentElement;s.insertBefore(o,s.firstChild)},ee=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),te=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t=Y(this.data),n=this.url+"/"+e.number+"?"+t;this.request=Et.createScriptRequest(n),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),ne={name:"jsonp",getAgent:function(e,t){return function(n,r){var o="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,a=Et.createJSONPRequest(o,n),s=Et.ScriptReceivers.create((function(t,n){i.remove(s),a.cleanup(),n&&n.host&&(e.host=n.host),r&&r(t,n)}));a.send(s)}}};function re(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function ie(e,t){return"/app/"+e+"?protocol="+o.PROTOCOL+"&client=js&version="+o.VERSION+(t?"&"+t:"")}var oe={getInitial:function(e,t){return re("ws",t,(t.httpPath||"")+ie(e,"flash=false"))}},ae={getInitial:function(e,t){return re("http",t,(t.httpPath||"/pusher")+ie(e))}},se={getInitial:function(e,t){return re("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return ie(e)}},ue=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[ce(e)]},e.prototype.add=function(e,t,n){var r=ce(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(e||t||n){var r=e?[ce(e)]:B(this._callbacks);t||n?this.removeCallback(r,t,n):this.removeAllCallbacks(r)}else this._callbacks={}},e.prototype.removeCallback=function(e,t,n){z(e,(function(e){this._callbacks[e]=H(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||n&&n!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)},e.prototype.removeAllCallbacks=function(e){z(e,(function(e){delete this._callbacks[e]}),this)},e}();function ce(e){return"_"+e}var le=function(){function e(e){this.callbacks=new ue,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_global=function(e){return e?(this.global_callbacks=H(this.global_callbacks||[],(function(t){return t!==e})),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](e,t);var i=this.callbacks.get(e),o=[];if(n?o.push(t,n):t&&o.push(t),i&&i.length>0)for(r=0;r<i.length;r++)i[r].fn.apply(i[r].context||window,o);else this.failThrough&&this.failThrough(e,t);return this},e}(),he=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fe=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.initialize=Et.transportConnectionInitializer,a.hooks=t,a.name=n,a.priority=r,a.key=i,a.options=o,a.state="new",a.timeline=o.timeline,a.activityTimeout=o.activityTimeout,a.id=a.timeline.generateUniqueID(),a}return he(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(n){return F.defer((function(){e.onError(n),e.changeState("closed")})),!1}return this.bindListeners(),X.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(F.defer((function(){t.socket&&t.socket.send(e)})),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return U({cid:this.id},e)},t}(le),de=fe,pe=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,r){return new de(this.hooks,e,t,n,r)},e}(),ve=new pe({urls:oe,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Et.getWebSocketAPI())},isSupported:function(){return Boolean(Et.getWebSocketAPI())},getSocket:function(e){return Et.createWebSocket(e)}}),ye={urls:ae,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},me=U({getSocket:function(e){return Et.HTTPFactory.createStreamingSocket(e)}},ye),ge=U({getSocket:function(e){return Et.HTTPFactory.createPollingSocket(e)}},ye),ke={isSupported:function(){return Et.isXHRSupported()}},be={ws:ve,xhr_streaming:new pe(U({},me,ke)),xhr_polling:new pe(U({},ge,ke))},_e=new pe({file:"sockjs",urls:se,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:u.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),we={isSupported:function(e){return Et.isXDRSupported(e.useTLS)}},xe=new pe(U({},me,we)),Se=new pe(U({},ge,we));be.xdr_streaming=xe,be.xdr_polling=Se,be.sockjs=_e;var Te=be,Ee=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ce=new(function(e){function t(){var t=e.call(this)||this,n=t;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){n.emit("online")}),!1),window.addEventListener("offline",(function(){n.emit("offline")}),!1)),t}return Ee(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(le)),Ie=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,r){var i=this;r=U({},r,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(e,t,n,r),a=null,s=function e(t){if(o.unbind("closed",e),1002===t.code||1003===t.code)i.manager.reportDeath();else if(!t.wasClean&&a){var n=F.now()-a;n<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(n/2,i.minPingDelay))}};return o.bind("open",(function e(){o.unbind("open",e),o.bind("closed",s),a=F.now()})),o},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),Re={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"===typeof n)try{n=JSON.parse(t.data)}catch(i){}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Re.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Ne=Re,Pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ae=function(e){function t(t,n){var r=e.call(this)||this;return r.id=t,r.transport=n,r.activityTimeout=n.activityTimeout,r.bindListeners(),r}return Pe(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),X.debug("Event sent",r),this.send(Ne.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Ne.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==n){switch(X.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",t)},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){V(t,(function(t,n){e.transport.unbind(n,t)}))};V(t,(function(t,n){e.transport.bind(n,t)}))},t.prototype.handleCloseEvent=function(e){var t=Ne.getCloseAction(e),n=Ne.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})},t}(le),Oe=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var n;e.unbindListeners();try{n=Ne.processHandshake(t)}catch(r){return e.finish("error",{error:r}),void e.transport.close()}"connected"===n.action?e.finish("connected",{connection:new Ae(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=Ne.getCloseAction(t)||"backoff",r=Ne.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(U({transport:this.transport,action:e},t))},e}(),De=function(){function e(e,t){this.channel=e;var n=t.authTransport;if("undefined"===typeof Et.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=t,this.authOptions=t.auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},e.prototype.authorize=function(t,n){e.authorizers=e.authorizers||Et.getAuthorizers(),e.authorizers[this.type].call(this,Et,t,n)},e}(),Le=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(Et.TimelineTransport.getAgent(this,e),t)},e}(),Me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(e){function t(t,n){var r=e.call(this,(function(e,n){X.debug("No callbacks on "+t+" for "+e)}))||this;return r.name=t,r.pusher=n,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return Me(t,e),t.prototype.authorize=function(e,t){return t(null,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new f("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=l("triggeringClientEvents");X.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(t,n){t?(e.subscriptionPending=!1,X.error(t.toString()),e.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof k?{status:t.status}:{}))):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(le),Ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ue(t,e),t.prototype.authorize=function(e,t){return Xe.createAuthorizer(this,this.pusher.config).authorize(e,t)},t}(Fe),qe=je,Ve=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;V(this.members,(function(n,r){e(t.get(r))}))},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.members=new Ve,r}return Be(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){if(!e){if(void 0===(t=t).channel_data){var i=l("authenticationEndpoint");return X.error("Invalid auth response for channel '"+r.name+"',expected 'channel_data' field. "+i),void n("Invalid auth response")}var o=JSON.parse(t.channel_data);r.members.setMyID(o.user_id)}n(e,t)}))},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,r={};e.user_id&&(r.user_id=e.user_id),this.emit(t,n,r)}},t.prototype.handleInternalEvent=function(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var i=this.members.removeMember(n);i&&this.emit("pusher:member_removed",i)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(qe),We=n(1),He=n(0),Ke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.key=null,i.nacl=r,i}return Ke(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){if(e)n(e,t);else{var i=t.shared_secret;i?(r.key=Object(He.decode)(i),delete t.shared_secret,n(null,t)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)}}))},t.prototype.trigger=function(e,t){throw new y("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var n=t.event,r=t.data;0!==n.indexOf("pusher_internal:")&&0!==n.indexOf("pusher:")?this.handleEncryptedEvent(n,r):e.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(e,t){var n=this;if(this.key)if(t.ciphertext&&t.nonce){var r=Object(He.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)X.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+r.length);else{var i=Object(He.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength)X.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+i.length);else{var o=this.nacl.secretbox.open(r,i,this.key);if(null===o)return X.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(t,a){t?X.error("Failed to make a request to the authEndpoint: "+a+". Unable to fetch new key, so dropping encrypted event"):null!==(o=n.nacl.secretbox.open(r,i,n.key))?n.emit(e,n.getDataToEmit(o)):X.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emit(e,this.getDataToEmit(o))}}}else X.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else X.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.getDataToEmit=function(e){var t=Object(We.decode)(e);try{return JSON.parse(t)}catch(n){return t}},t}(qe),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e){function t(t,n){var r=e.call(this)||this;r.state="initialized",r.connection=null,r.key=t,r.options=n,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var i=Et.getNetwork();return i.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),i.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),r.updateStrategy(),r}return Qe(t,e),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this;this.runner=this.strategy.connect(0,(function t(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))}))},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new D(e||0,(function(){t.disconnectInternally(),t.connect()}))},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new D(this.options.unavailableTimeout,(function(){e.updateState("unavailable")}))},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new D(this.options.pongTimeout,(function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)}))},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new D(this.activityTimeout,(function(){e.sendActivityCheck()})))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return U({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",e)},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return U({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{tls_only:t((function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)})),refused:t((function(){e.disconnect()})),backoff:t((function(){e.retryIn(1e3)})),retry:t((function(){e.retryIn(0)}))}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;"connected"===r&&(r+=" with new socket ID "+t.socket_id),X.debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(le),Je=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return Xe.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=l("encryptedChannelSupport");throw new y(n+". "+r)}return 0===e.indexOf("private-")?Xe.createPrivateChannel(e,t):0===e.indexOf("presence-")?Xe.createPresenceChannel(e,t):Xe.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){return function(e){var t=[];return V(e,(function(e){t.push(e)})),t}(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){V(this.channels,(function(e){e.disconnect()}))},e}(),$e=Je,Xe={createChannels:function(){return new $e},createConnectionManager:function(e,t){return new Ye(e,t)},createChannel:function(e,t){return new Fe(e,t)},createPrivateChannel:function(e,t){return new qe(e,t)},createPresenceChannel:function(e,t){return new ze(e,t)},createEncryptedChannel:function(e,t,n){return new Ge(e,t,n)},createTimelineSender:function(e,t){return new Le(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new De(e,t)},createHandshake:function(e,t){return new Oe(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new Ie(e,t,n)}},Ze=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return Xe.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),et=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return G(this.strategies,F.method("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,i=0,o=this.timeout,a=null;return a=this.tryStrategy(r[i],e,{timeout:o,failFast:this.failFast},(function s(u,c){c?t(null,c):(i+=1,n.loop&&(i%=r.length),i<r.length?(o&&(o*=2,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),a=n.tryStrategy(r[i],e,{timeout:o,failFast:n.failFast},s)):t(!0))})),{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var i=null,o=null;return n.timeout>0&&(i=new D(n.timeout,(function(){o.abort(),r(!0)}))),o=e.connect(t,(function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))})),{abort:function(){i&&i.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},e}(),tt=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return G(this.strategies,F.method("isSupported"))},e.prototype.connect=function(e,t){return function(e,t,n){var r=W(e,(function(e,r,i,o){return e.connect(t,n(r,o))}));return{abort:function(){z(r,nt)},forceMinPriority:function(e){z(r,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,n){return function(r,i){n[e].error=r,r?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,(function(e){return Boolean(e.error)}))}(n)&&t(!0):(z(n,(function(e){e.forceMinPriority(i.transport.priority)})),t(null,i))}}))},e}();function nt(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var rt=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.usingTLS,r=function(e){var t=Et.getLocalStorage();if(t)try{var n=t[ot(e)];if(n)return JSON.parse(n)}catch(r){at(e)}return null}(n),i=[this.strategy];if(r&&r.timestamp+this.ttl>=F.now()){var o=this.transports[r.transport];o&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),i.push(new et([o],{timeout:2*r.latency+1e3,failFast:!0})))}var a=F.now(),s=i.pop().connect(e,(function r(o,u){o?(at(n),i.length>0?(a=F.now(),s=i.pop().connect(e,r)):t(o)):(function(e,t,n){var r=Et.getLocalStorage();if(r)try{r[ot(e)]=J({timestamp:F.now(),transport:t,latency:n})}catch(i){}}(n,u.transport.name,F.now()-a),t(null,u))}));return{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e}(),it=rt;function ot(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function at(e){var t=Et.getLocalStorage();if(t)try{delete t[ot(e)]}catch(n){}}var st=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,r=this.strategy,i=new D(this.options.delay,(function(){n=r.connect(e,t)}));return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}(),ut=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),ct=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,(function(e,r){r&&n.abort(),t(e,r)}));return n},e}();function lt(e){return function(){return e.isSupported()}}var ht,ft=function(e,t,n){var r={};function i(t,i,o,a,s){var u=n(e,t,i,o,a,s);return r[t]=u,u}var o,a=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),s=Object.assign({},a,{useTLS:!0}),u=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new Ze({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=new Ze({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),f=i("ws","ws",3,a,l),d=i("wss","ws",3,s,l),p=i("sockjs","sockjs",1,u),v=i("xhr_streaming","xhr_streaming",1,u,h),y=i("xdr_streaming","xdr_streaming",1,u,h),m=i("xhr_polling","xhr_polling",1,u),g=i("xdr_polling","xdr_polling",1,u),k=new et([f],c),b=new et([d],c),_=new et([p],c),w=new et([new ut(lt(v),v,y)],c),x=new et([new ut(lt(m),m,g)],c),S=new et([new ut(lt(w),new tt([w,new st(x,{delay:4e3})]),x)],c),T=new ut(lt(S),S,_);return o=t.useTLS?new tt([k,new st(T,{delay:2e3})]):new tt([k,new st(b,{delay:2e3}),new st(T,{delay:5e3})]),new it(new ct(new ut(lt(f),o,T)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},dt={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new d),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},pt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.hooks=t,i.method=n,i.url=r,i}return pt(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},Et.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(Et.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(le);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(ht||(ht={}));var yt=ht,mt=1;function gt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+mt++}function kt(e){return Math.floor(Math.random()*e)}var bt,_t=function(){function e(e,t){this.hooks=e,this.session=kt(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(kt(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=yt.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==yt.OPEN)return!1;try{return Et.createSocketRequest("POST",gt((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(r){return!1}var t,n},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=yt.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){var t;if(200===e.status)switch(this.readyState===yt.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){this.readyState===yt.CONNECTING?(e&&e.hostname&&(this.location.base=function(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}(this.location.base,e.hostname)),this.readyState=yt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===yt.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=Et.createSocketRequest("POST",gt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(t){e.onChunk(t)})),this.stream.bind("finished",(function(t){e.hooks.onFinished(e,t)})),this.stream.bind("buffer_too_long",(function(){e.reconnect()}));try{this.stream.start()}catch(t){F.defer((function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)}))}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}(),wt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},xt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},St={getRequest:function(e){var t=new(Et.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},Tt={createStreamingSocket:function(e){return this.createSocket(wt,e)},createPollingSocket:function(e){return this.createSocket(xt,e)},createSocket:function(e,t){return new _t(e,t)},createXHR:function(e,t){return this.createRequest(St,e,t)},createRequest:function(e,t,n){return new vt(e,t,n)},createXDR:function(e,t){return this.createRequest(dt,e,t)}},Et={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:s,getDefaultStrategy:ft,Transports:Te,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),u.load(e.hooks.file,{useTLS:e.options.useTLS},(function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))}))):e.onClose()},HTTPFactory:Tt,TimelineTransport:ne,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():u.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:b,jsonp:Z}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout((function(){t.onDocumentBody(e)}),0)},createJSONPRequest:function(e,t){return new te(e,t)},createScriptRequest:function(e){return new ee(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Ce},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(bt||(bt={}));var Ct=bt,It=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(U({},t,{timestamp:F.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(Ct.ERROR,e)},e.prototype.info=function(e){this.log(Ct.INFO,e)},e.prototype.debug=function(e){this.log(Ct.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,r=U({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,(function(e,r){e||n.sent++,t&&t(e,r)})),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),Rt=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return Nt(new g,t);if(this.priority<e)return Nt(new p,t);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,a=function e(){i.unbind("initialized",e),i.connect()},s=function(){o=Xe.createHandshake(i,(function(e){r=!0,l(),t(null,e)}))},u=function(e){l(),t(e)},c=function(){var e;l(),e=J(i),t(new v(e))},l=function(){i.unbind("initialized",a),i.unbind("open",s),i.unbind("error",u),i.unbind("closed",c)};return i.bind("initialized",a),i.bind("open",s),i.bind("error",u),i.bind("closed",c),i.initialize(),{abort:function(){r||(l(),o?o.close():i.close())},forceMinPriority:function(e){r||n.priority<e&&(o?o.close():i.close())}}},e}();function Nt(e,t){return F.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}var Pt=Et.Transports,At=function(e,t,n,r,i,o){var a,s=Pt[n];if(!s)throw new m(n);return e.enabledTransports&&-1===q(e.enabledTransports,t)||e.disabledTransports&&-1!==q(e.disabledTransports,t)?a=Ot:(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),a=new Rt(t,r,o?o.getAssistant(s):s,i)),a},Ot={isSupported:function(){return!1},connect:function(e,t){var n=F.defer((function(){t(new g)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function Dt(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":o.httpHost}function Lt(e){return e.wsHost?e.wsHost:e.cluster?Mt(e.cluster):Mt(o.cluster)}function Mt(e){return"ws-"+e+".pusher.com"}function Ft(e){return"https:"===Et.getProtocol()||!1!==e.forceTLS}function Ut(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}var jt=function(){function e(t,n){var r=this;if(function(e){if(null===e||void 0===e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var i=l("javascriptQuickStart");X.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&X.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=function(e){var t={activityTimeout:e.activityTimeout||o.activityTimeout,authEndpoint:e.authEndpoint||o.authEndpoint,authTransport:e.authTransport||o.authTransport,cluster:e.cluster||o.cluster,httpPath:e.httpPath||o.httpPath,httpPort:e.httpPort||o.httpPort,httpsPort:e.httpsPort||o.httpsPort,pongTimeout:e.pongTimeout||o.pongTimeout,statsHost:e.statsHost||o.stats_host,unavailableTimeout:e.unavailableTimeout||o.unavailableTimeout,wsPath:e.wsPath||o.wsPath,wsPort:e.wsPort||o.wsPort,wssPort:e.wssPort||o.wssPort,enableStats:Ut(e),httpHost:Dt(e),useTLS:Ft(e),wsHost:Lt(e)};return"auth"in e&&(t.auth=e.auth),"authorizer"in e&&(t.authorizer=e.authorizer),"disabledTransports"in e&&(t.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(t.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(t.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(t.timelineParams=e.timelineParams),"nacl"in e&&(t.nacl=e.nacl),t}(n),this.channels=Xe.createChannels(),this.global_emitter=new le,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new It(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ct.INFO,version:o.VERSION}),this.config.enableStats&&(this.timelineSender=Xe.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Et.TimelineTransport.name})),this.connection=Xe.createConnectionManager(this.key,{getStrategy:function(e){return Et.getDefaultStrategy(r.config,e,At)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())})),this.connection.bind("message",(function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e)}t||r.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(function(){r.channels.disconnect()})),this.connection.bind("disconnected",(function(){r.channels.disconnect()})),this.connection.bind("error",(function(e){X.warn(e)})),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return B(K({ws:Et.Transports.ws},(function(e){return e.isSupported({})})))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new L(6e4,(function(){t.send(e)}))}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,n){return this.global_emitter.bind(e,t,n),this},e.prototype.unbind=function(e,t,n){return this.global_emitter.unbind(e,t,n),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=Et,e.ScriptReceivers=Et.ScriptReceivers,e.DependenciesReceivers=Et.DependenciesReceivers,e.auth_callbacks=Et.auth_callbacks,e}(),qt=t.default=jt;Et.setup(jt)}])},e.exports=t()},463:function(e,t,n){"use strict";var r=n(791),i=n(725),o=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,x=60106,S=60107,T=60108,E=60114,C=60109,I=60110,R=60112,N=60113,P=60120,A=60115,O=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;w=j("react.element"),x=j("react.portal"),S=j("react.fragment"),T=j("react.strict_mode"),E=j("react.profiler"),C=j("react.provider"),I=j("react.context"),R=j("react.forward_ref"),N=j("react.suspense"),P=j("react.suspense_list"),A=j("react.memo"),O=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function z(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Re=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=oi(t),Ce(e.stateNode,e.type,t))}}function Pe(e){Ie?Re?Re.push(e):Re=[e]:Ie=e}function Ae(){if(Ie){var e=Ie,t=Re;if(Re=Ie=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Oe,Fe=!1,Ue=!1;function je(){null===Ie&&null===Re||(Le(),Ae())}function qe(e,t){var n=e.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ve=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){Ve=!1}function ze(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ke=!1,Ge=null,Qe={onError:function(e){We=!0,He=e}};function Ye(e,t,n,r,i,o,a,s,u){We=!1,He=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Je(e)!==e)throw Error(a(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xe(i),e;if(o===r)return Xe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function yt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ht.forEach(kt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return _t(t,e)}if(0<at.length){_t(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&_t(st,e),null!==ut&&_t(ut,e),null!==ct&&_t(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Tt={},Et={};function Ct(e){if(Tt[e])return Tt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return Tt[e]=n[t];return e}h&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var It=Ct("animationend"),Rt=Ct("animationiteration"),Nt=Ct("animationstart"),Pt=Ct("transitionend"),At=new Map,Ot=new Map,Dt=["abort","abort",It,"animationEnd",Rt,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),At.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Mt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ft(u),i=Mt):0!==(s&=o)&&(r=Ft(s),i=Mt)}else 0!==(o=n&~a)?(r=Ft(o),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?qt(10,t):e;case 10:return 0===(e=Vt(192&~t))?qt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Vt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Kt|0)|0},Ht=Math.log,Kt=Math.LN2;var Gt=o.unstable_UserBlockingPriority,Qt=o.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Fe||Le();var i=Xt,o=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=o)||je()}}function $t(e,t,n,r){Qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<at.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),at.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=yt(st,e,t,n,r,i),!0;case"dragenter":return ut=yt(ut,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return lt.set(o,yt(lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ht.set(o,yt(ht.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Ee(r);if(null!==(i=ni(i))){var o=Je(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=$e(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(yn),gn=un(i({},yn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),bn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(_n),xn=un(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return Cn}var Rn=i({},pn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=un(Rn),Pn=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),On=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Dn),Mn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Un=null;h&&"documentMode"in document&&(Un=document.documentMode);var jn=h&&"TextEvent"in window&&!Un,qn=h&&(!Fn||Un&&8<Un&&11>=Un),Vn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Pe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function $n(e){Rr(e,0)}function Xn(e){if($(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",or),Jn=Yn=null)}function or(e){if("value"===e.propertyName&&Xn(Jn)){var t=[];if(Qn(t,Jn,e,Ee(e)),e=$n,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,je()}}}}function ar(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",or)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Jn)}function ur(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,_r=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&fr(_r,r)||(_r=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Sr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Sr.length;Tr++)Ot.set(Sr[Tr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(a(198));var l=He;We=!1,He=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Nr(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Pr]||(e[Pr]=!0,s.forEach((function(t){Cr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ai(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Dr(o,e,i,t),a.add(s))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=$t;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ni(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=o,i=Ee(n),a=[];e:{var s=At.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case It:case Rt:case Nt:u=bn;break;case Pt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Pn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=qe(p,f))&&l.push(Mr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Pn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=f;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)f=Ur(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Ur(l),f=Ur(f)}l=null}else l=null;null!==u&&jr(a,s,u,l,!1),null!==c&&null!==h&&jr(a,h,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(Gn(s))if(er)y=cr;else{y=sr;var m=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ur);switch(y&&(y=y(e,r))?Qn(a,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,br=r,_r=null);break;case"focusout":_r=br=kr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(qn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),a.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g))}Rr(a,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=qe(e,n))&&r.unshift(Mr(e,o,i)),null!=(o=qe(e,t))&&r.push(Mr(e,o,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=qe(n,o))&&a.unshift(Mr(n,u,s)):i||null!=(u=qe(n,o))&&a.push(Mr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function qr(){}var Vr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var $r=Math.random().toString(36).slice(2),Xr="__reactFiber$"+$r,Zr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function oi(e){return e[Zr]||null}function ai(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=ci(fi),pi=ci(!1),vi=fi;function yi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==fi)throw Error(a(168));hi(di,t),hi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,G(t)||"Unknown",o));return i({},n,r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),hi(di,e)):li(pi),hi(pi,n)}var xi=null,Si=null,Ti=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Ii=o.unstable_shouldYield,Ri=o.unstable_requestPaint,Ni=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Mi=o.unstable_IdlePriority,Fi={},Ui=void 0!==Ri?Ri:function(){},ji=null,qi=null,Vi=!1,Bi=Ni(),zi=1e4>Bi?Ni:function(){return Ni()-Bi};function Wi(){switch(Pi()){case Ai:return 99;case Oi:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(a(332))}}function Hi(e){switch(e){case 99:return Ai;case 98:return Oi;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(a(332))}}function Ki(e,t){return e=Hi(e),Ti(e,t)}function Gi(e,t,n){return e=Hi(e),Ei(e,t,n)}function Qi(){if(null!==qi){var e=qi;qi=null,Ci(e)}Yi()}function Yi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ei(Ai,Qi),n}finally{Vi=!1}}}var Ji=_.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,eo=null,to=null;function no(){to=eo=Zi=null}function ro(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function io(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){Zi=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fa=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===Zi)throw Error(a(308));eo=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function po(e,t,n,r){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,v=a;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,Vs|=s,e.lanes=s,e.memoizedState=f}}function vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var yo=(new r.Component).refs;function mo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ho(e,i),pu(e,r,n)}};function ko(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,o))}function bo(e,t,n){var r=!1,i=fi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=mi(t)?vi:di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):fi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=yo,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=mi(t)?vi:di.current,i.context=yi(e,o)),po(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),po(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xo=Array.isArray;function So(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===yo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function To(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=So(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=So(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=So(e,null,t),n.return=e,n;case x:return(t=$u(t,e.mode,n)).return=e,t}if(xo(t)||B(t))return(t=Qu(t,e.mode,n,null)).return=e,t;To(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(xo(n)||B(n))return null!==i?null:h(e,t,n,r,null);To(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xo(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);To(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===S&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case w:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(o.type===S){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=So(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===S?((r=Qu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Gu(o.type,o.key,o.props,null,e.mode,u)).ref=So(e,r,o),u.return=e,e=u)}return s(e);case x:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ju(o,e.mode,u)).return=e,e=r),s(e);if(xo(o))return v(e,r,o,u);if(B(o))return y(e,r,o,u);if(l&&To(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(e.type)||"Component"))}return n(e,r)}}var Co=Eo(!0),Io=Eo(!1),Ro={},No=ci(Ro),Po=ci(Ro),Ao=ci(Ro);function Oo(e){if(e===Ro)throw Error(a(174));return e}function Do(e,t){switch(hi(Ao,t),hi(Po,e),hi(No,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(No),hi(No,t)}function Lo(){li(No),li(Po),li(Ao)}function Mo(e){Oo(Ao.current);var t=Oo(No.current),n=pe(t,e.type);t!==n&&(hi(Po,e),hi(No,n))}function Fo(e){Po.current===e&&(li(No),li(Po))}var Uo=ci(0);function jo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qo=null,Vo=null,Bo=!1;function zo(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Wo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ho(e){if(Bo){var t=Vo;if(t){var n=t;if(!Wo(e,t)){if(!(t=Qr(n.nextSibling))||!Wo(e,t))return e.flags=-1025&e.flags|2,Bo=!1,void(qo=e);zo(qo,n)}qo=e,Vo=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Bo=!1,qo=e}}function Ko(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qo=e}function Go(e){if(e!==qo)return!1;if(!Bo)return Ko(e),Bo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Vo;t;)zo(e,t),t=Qr(t.nextSibling);if(Ko(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vo=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vo=null}}else Vo=qo?Qr(e.stateNode.nextSibling):null;return!0}function Qo(){Vo=qo=null,Bo=!1}var Yo=[];function Jo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var $o=_.ReactCurrentDispatcher,Xo=_.ReactCurrentBatchConfig,Zo=0,ea=null,ta=null,na=null,ra=!1,ia=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function sa(e,t,n,r,i,o){if(Zo=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$o.current=null===e||null===e.memoizedState?Oa:Da,e=n(r,i),ia){o=0;do{if(ia=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,$o.current=La,e=n(r,i)}while(ia)}if($o.current=Aa,t=null!==ta&&null!==ta.next,Zo=0,na=ta=ea=null,ra=!1,t)throw Error(a(300));return e}function ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function ca(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function la(e,t){return"function"===typeof t?t(e):t}function ha(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Zo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,ea.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,lr(r,t.memoizedState)||(Fa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fa(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);lr(o,t.memoizedState)||(Fa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function da(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Zo&e)===e)&&(t._workInProgressVersionPrimary=r,Yo.push(t))),e)return n(t._source);throw Yo.push(t),Error(a(350))}function pa(e,t,n,r){var i=Os;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=$o.current,c=u.useState((function(){return da(i,t,n)})),l=c[1],h=c[0];c=na;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var y=ea;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!lr(s,e)){e=n(t._source),lr(h,e)||(l(e),e=du(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Wt(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(y);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:la,lastRenderedState:h}).dispatch=l=Pa.bind(null,ea,e),c.queue=e,c.baseQueue=null,h=da(i,t,n),c.memoizedState=c.baseState=h),h}function va(e,t,n){return pa(ca(),e,t,n)}function ya(e){var t=ua();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:la,lastRenderedState:e}).dispatch=Pa.bind(null,ea,e),[t.memoizedState,e]}function ma(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(e){return e={current:e},ua().memoizedState=e}function ka(){return ca().memoizedState}function ba(e,t,n,r){var i=ua();ea.flags|=e,i.memoizedState=ma(1|t,n,void 0,void 0===r?null:r)}function _a(e,t,n,r){var i=ca();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&aa(r,a.deps))return void ma(t,n,o,r)}ea.flags|=e,i.memoizedState=ma(1|t,n,o,r)}function wa(e,t){return ba(516,4,e,t)}function xa(e,t){return _a(516,4,e,t)}function Sa(e,t){return _a(4,2,e,t)}function Ta(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ea(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,2,Ta.bind(null,t,e),n)}function Ca(){}function Ia(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ra(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Na(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xo.transition;Xo.transition=1;try{e(!1),t()}finally{Xo.transition=n}}))}function Pa(e,t,n){var r=fu(),i=du(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ia=ra=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Aa={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Oa={readContext:ao,useCallback:function(e,t){return ua().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=ua();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ua();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Pa.bind(null,ea,e),[r.memoizedState,e]},useRef:ga,useState:ya,useDebugValue:Ca,useDeferredValue:function(e){var t=ya(e),n=t[0],r=t[1];return wa((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=ya(!1),t=e[0];return ga(e=Na.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ua();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},pa(r,e,t,n)},useOpaqueIdentifier:function(){if(Bo){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(a(355))})),n=ya(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ma(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return ya(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Da={readContext:ao,useCallback:Ia,useContext:ao,useEffect:xa,useImperativeHandle:Ea,useLayoutEffect:Sa,useMemo:Ra,useReducer:ha,useRef:ka,useState:function(){return ha(la)},useDebugValue:Ca,useDeferredValue:function(e){var t=ha(la),n=t[0],r=t[1];return xa((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=ha(la)[0];return[ka().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return ha(la)[0]},unstable_isNewReconciler:!1},La={readContext:ao,useCallback:Ia,useContext:ao,useEffect:xa,useImperativeHandle:Ea,useLayoutEffect:Sa,useMemo:Ra,useReducer:fa,useRef:ka,useState:function(){return fa(la)},useDebugValue:Ca,useDeferredValue:function(e){var t=fa(la),n=t[0],r=t[1];return xa((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=fa(la)[0];return[ka().current,e]},useMutableSource:va,useOpaqueIdentifier:function(){return fa(la)[0]},unstable_isNewReconciler:!1},Ma=_.ReactCurrentOwner,Fa=!1;function Ua(e,t,n,r){t.child=null===e?Io(t,null,n,r):Co(t,e.child,n,r)}function ja(e,t,n,r,i){n=n.render;var o=t.ref;return oo(t,i),r=sa(e,t,n,r,o,i),null===e||Fa?(t.flags|=1,Ua(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function qa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Hu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Va(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Ku(a,r)).ref=t.ref,e.return=t,t.child=e)}function Va(e,t,n,r,i,o){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fa=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Fa=!0)}return Wa(e,t,n,r,o)}function Ba(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return Ua(e,t,i,n),t.child}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wa(e,t,n,r,i){var o=mi(n)?vi:di.current;return o=yi(t,o),oo(t,i),n=sa(e,t,n,r,o,i),null===e||Fa?(t.flags|=1,Ua(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Ha(e,t,n,r,i){if(mi(n)){var o=!0;_i(t)}else o=!1;if(oo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ao(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),so=!1;var f=t.memoizedState;a.state=f,po(t,r,a,i),u=t.memoizedState,s!==r||f!==u||pi.current||so?("function"===typeof l&&(mo(t,n,l,r),u=t.memoizedState),(s=so||ko(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,co(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$i(t.type,s),a.props=c,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ao(u):u=yi(t,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&_o(t,a,r,u),so=!1,f=t.memoizedState,a.state=f,po(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||pi.current||so?("function"===typeof d&&(mo(t,n,d,r),p=t.memoizedState),(c=so||ko(t,n,c,r,f,p,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ka(e,t,n,r,o,i)}function Ka(e,t,n,r,i,o){za(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,Ma.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Ua(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Ga(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Do(e,t.containerInfo)}var Qa,Ya,Ja,$a={dehydrated:null,retryLane:0};function Xa(e,t,n){var r,i=t.pendingProps,o=Uo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(Uo,1&o),null===e?(void 0!==i.fallback&&Ho(t),e=i.children,o=i.fallback,a?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$a,e):"number"===typeof i.unstable_expectedLoadTime?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$a,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=$a,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Za(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yu(t,i,0,null),n=Qu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(a,s),null!==e?r=Ku(e,r):(r=Qu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),io(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ua(e,t,r.children,n),0!==(2&(r=Uo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Uo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Bo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Lo(),li(pi),li(di),Jo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fo(t);var o=Oo(Ao.current);if(n=t.type,null!==e&&null!=t.stateNode)Ya(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Oo(No.current),Go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Zr]=s,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Nr(Er[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ue(r,s),Nr("invalid",r)}for(var c in Se(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=qr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qa(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),o=r;break;case"iframe":case"object":case"embed":Nr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Er.length;o++)Nr(Er[o],e);o=r;break;case"source":Nr("error",e),o=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),o=r;break;case"details":Nr("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Nr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Nr("invalid",e);break;default:o=r}Se(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Nr("scroll",e):null!=h&&b(e,s,h,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=qr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ja(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Oo(Ao.current),Oo(No.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Uo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Uo.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Os||0===(134217727&Vs)&&0===(134217727&Bs)||gu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Lo(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ro(t),null;case 19:if(li(Uo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)as(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=jo(e))){for(t.flags|=64,as(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Uo,1&Uo.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ks&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=jo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Bo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Uo.current,hi(Uo,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Lo(),li(pi),li(di),Jo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Fo(e),null;case 13:return li(Uo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Uo),null;case 4:return Lo(),null;case 10:return ro(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ya=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Oo(No.current);var a,s=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=qr)}for(h in Se(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Nr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,$s=r),ls(0,t)},n}function ds(e,t,n){(n=lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qu(e,n)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(a(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&vo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_e("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(xi,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(o){qu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){qu(t,o)}break;case 5:vs(t);break;case 4:Ts(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(_s(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Ss(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Ss(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Rs=Math.ceil,Ns=_.ReactCurrentDispatcher,Ps=_.ReactCurrentOwner,As=0,Os=null,Ds=null,Ls=0,Ms=0,Fs=ci(0),Us=0,js=null,qs=0,Vs=0,Bs=0,zs=0,Ws=null,Hs=0,Ks=1/0;function Gs(){Ks=zi()+500}var Qs,Ys=null,Js=!1,$s=null,Xs=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,ou=0,au=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&As)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=qs),0!==Ji.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&As)&&98===e?e=qt(12,uu):e=qt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<ou)throw ou=0,au=null,Error(a(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(Bs|=t,4===Us&&gu(e,Ls));var r=Wi();1===t?0!==(8&As)&&0===(48&As)?ku(e):(yu(e,n),0===As&&(Gs(),Qi())):(0===(4&As)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),yu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var h=Mt;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Os?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ci(n)}15===t?(n=ku.bind(null,e),null===ji?(ji=[n],qi=Ei(Ai,Yi)):ji.push(n),n=Fi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Gi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&As))throw Error(a(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=As;As|=16;var o=Eu();for(Os===e&&Ls===r||(Gs(),Su(e,r));;)try{Ru();break}catch(u){Tu(e,u)}if(no(),Ns.current=o,As=i,null!==Ds?r=0:(Os=null,Ls=0,r=Us),0!==(qs&Bs))Su(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Cu(e,n))),1===r)throw t=js,Su(e,0),gu(e,n),yu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Au(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Au.bind(null,e),r);break}Au(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Rs(n/1960))-n)){e.timeoutHandle=Hr(Au.bind(null,e),n);break}Au(e);break;default:throw Error(a(329))}}return yu(e,zi()),e.callbackNode===t?mu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&As))throw Error(a(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Cu(e,t);0!==(qs&Bs)&&(n=Cu(e,t=Ut(e,t)))}else n=Cu(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Cu(e,t))),1===n)throw n=js,Su(e,0),gu(e,t),yu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),yu(e,zi()),null}function bu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}}function _u(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}}function wu(e,t){hi(Fs,Ms),Ms|=t,qs|=t}function xu(){Ms=Fs.current,li(Fs)}function Su(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Lo(),li(pi),li(di),Jo();break;case 5:Fo(r);break;case 4:Lo();break;case 13:case 19:li(Uo);break;case 10:ro(r);break;case 23:case 24:xu()}n=n.return}Os=e,Ds=Ku(e.current,null),Ls=Ms=qs=t,Us=0,js=null,zs=Bs=Vs=0}function Tu(e,t){for(;;){var n=Ds;try{if(no(),$o.current=Aa,ra){for(var r=ea.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ra=!1}if(Zo=0,na=ta=ea=null,ia=!1,Ps.current=null,null===n||null===n.return){Us=1,js=t,Ds=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Uo.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var y=f.updateQueue;if(null===y){var m=new Set;m.add(c),f.updateQueue=m}else y.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=lo(-1,1);g.tag=2,ho(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=o.pingCache;if(null===k?(k=o.pingCache=new hs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=Vu.bind(null,o,c,s);c.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,fo(f,fs(0,o,t));break e;case 1:o=u;var _=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Xs||!Xs.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,fo(f,ds(f,o,t));break e}}f=f.return}while(null!==f)}Pu(n)}catch(x){t=x,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Eu(){var e=Ns.current;return Ns.current=Aa,null===e?Aa:e}function Cu(e,t){var n=As;As|=16;var r=Eu();for(Os===e&&Ls===t||Su(e,t);;)try{Iu();break}catch(i){Tu(e,i)}if(no(),As=n,Ns.current=r,null!==Ds)throw Error(a(261));return Os=null,Ls=0,Us}function Iu(){for(;null!==Ds;)Nu(Ds)}function Ru(){for(;null!==Ds&&!Ii();)Nu(Ds)}function Nu(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Pu(e):Ds=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Us&&(Us=5)}function Au(e){var t=Wi();return Ki(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&As))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-Wt(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Ps.current=null,Vr=Yt,mr(s=yr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(E){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==u||0!==o&&3!==y.nodeType||(f=h+o),y!==c||0!==l&&3!==y.nodeType||(d=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===u&&++p===o&&(f=h),m===c&&++v===l&&(d=h),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,hu=!1,Ys=r;do{try{Du()}catch(E){if(null===Ys)throw Error(a(330));qu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var b=Ys.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&k){case 2:ws(Ys),Ys.flags&=-3;break;case 6:ws(Ys),Ys.flags&=-3,Es(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Es(Ys.alternate,Ys);break;case 4:Es(Ys.alternate,Ys);break;case 8:Ts(s,u=Ys);var w=u.alternate;bs(u),null!==w&&bs(w)}Ys=Ys.nextEffect}}catch(E){if(null===Ys)throw Error(a(330));qu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);if(_=Br,b=yr(),k=_.focusedElem,s=_.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(_,k.value.length)):(_=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),u=k.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!_.extend&&w>s&&(u=s,s=w,w=u),u=pr(k,w),o=pr(k,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),w>s?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=k;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(_=b[k]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Yt=!!Vr,Br=Vr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&ms(k,Ys.alternate,Ys),128&x){b=void 0;var S=Ys.ref;if(null!==S){var T=Ys.stateNode;Ys.tag,b=T,"function"===typeof S?S(b):S.current=b}}Ys=Ys.nextEffect}}catch(E){if(null===Ys)throw Error(a(330));qu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),As=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Xs=null),1===r?e===au?ou++:(ou=0,au=e):ou=0,n=n.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(E){}if(yu(e,zi()),Js)throw Js=!1,e=$s,$s=null,e;return 0!==(8&As)||Qi(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(hu=!0):13===Ys.tag&&Is(e,Ys)&&et(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&ys(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&As))throw Error(a(331));var t=As;As|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));qu(o,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));qu(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Qi(),!0}function ju(e,t,n){ho(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),yu(e,t))}function qu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){var i=ds(n,e=cs(t,e),1);if(ho(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),yu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>zi()-Hs?Su(e,0):zs|=n),yu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=qs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),yu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Qu(n.children,i,o,t);case M:s=8,i|=16;break;case T:s=8,i|=1;break;case E:return(e=Wu(12,n,t,8|i)).elementType=E,e.type=E,e.lanes=o,e;case N:return(e=Wu(13,n,t,i)).type=N,e.elementType=N,e.lanes=o,e;case P:return(e=Wu(19,n,t,i)).elementType=P,e.lanes=o,e;case F:return Yu(n,i,o,t);case U:return(e=Wu(24,n,t,i)).elementType=U,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case R:s=11;break e;case A:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function Ju(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,o=fu(),s=du(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ho(i,t),pu(i,s,o),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,uo(t),e[ei]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(a);s.call(e)}}ec(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(a);u.call(e)}}_u((function(){ec(t,a,e,i)}))}return tc(a)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(a(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fa=!0;else{if(0===(n&r)){switch(Fa=!1,t.tag){case 3:Ga(t),Qo();break;case 5:Mo(t);break;case 1:mi(t.type)&&_i(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xa(e,t,n):(hi(Uo,1&Uo.current),null!==(t=os(e,t,n))?t.sibling:null);hi(Uo,1&Uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Uo,Uo.current),r)break;return null;case 23:case 24:return t.lanes=0,Ba(e,t,n)}return os(e,t,n)}Fa=0!==(16384&e.flags)}else Fa=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),oo(t,n),i=sa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mo(t,r,s,e),i.updater=go,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Ka(null,t,r,!0,o,n)}else t.tag=0,Ua(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===A)return 14}return 2}(i),e=$i(i,e),o){case 0:t=Wa(null,t,i,e,n);break e;case 1:t=Ha(null,t,i,e,n);break e;case 11:t=ja(null,t,i,e,n);break e;case 14:t=qa(null,t,i,$i(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Ga(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,co(e,t),po(t,r,null,n),(r=t.memoizedState.element)===i)Qo(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Vo=Qr(t.stateNode.containerInfo.firstChild),qo=t,o=Bo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Yo.push(o);for(n=Io(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ua(e,t,r,n),Qo();t=t.child}return t;case 5:return Mo(t),null===e&&Ho(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==o&&Wr(r,o)&&(t.flags|=16),za(e,t),Ua(e,t,s,n),t.child;case 6:return null===e&&Ho(t),null;case 13:return Xa(e,t,n);case 4:return Do(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Ua(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(hi(Xi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=lr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!pi.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=lo(-1,n&-n)).tag=2,ho(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),io(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ua(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,oo(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.flags|=1,Ua(e,t,r,n),t.child;case 14:return o=$i(i=t.type,t.pendingProps),qa(e,t,i,o=$i(i.type,o),r,n);case 15:return Va(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,_i(t)):e=!1,oo(t,n),bo(t,r,i),wo(t,r,i,n),Ka(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Ba(e,t,n)}throw Error(a(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oi(r);if(!i)throw Error(a(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Oe=bu,De=function(e,t,n,r,i){var o=As;As|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(As=o)&&(Gs(),Qi())}},Le=function(){0===(49&As)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yu(e,zi())}))}Qi()}(),Lu())},Me=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,oi,Pe,Ae,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{xi=hc.inject(lc),Si=hc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{As=n,Qi()}},t.hydrate=function(e,t,n){if(!oc(t))throw Error(a(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!oc(t))throw Error(a(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!oc(e))throw Error(a(40));return!!e._reactRootContainer&&(_u((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+E(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+E(s=e[c],c);u+=C(s,t,n,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+E(s,c++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function P(){var e=N.current;if(null===e)throw Error(d(321));return e}var A={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!w.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(R([])));_&&_!==n&&r.call(_,o)&&(k=_);var w=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,u(w,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(w),u(w,s,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?_.postMessage(null):(v=!1,y=null)}catch(n){throw _.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,_.postMessage(null))},r=function(e,n){m=f((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>T(a,n))void 0!==u&&0>T(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],C=[],I=1,R=null,N=3,P=!1,A=!1,O=!1;function D(e){for(var t=x(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,w(E,t)}t=x(C)}}function L(e){if(O=!1,D(e),!A)if(null!==x(E))A=!0,n(M);else{var t=x(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){A=!1,O&&(O=!1,i()),P=!0;var o=N;try{for(D(n),R=x(E);null!==R&&(!(R.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=R.callback;if("function"===typeof a){R.callback=null,N=R.priorityLevel;var s=a(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?R.callback=s:R===x(E)&&S(E),D(n)}else S(E);R=x(E)}if(null!==R)var u=!0;else{var c=x(C);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{R=null,N=o,P=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||P||(A=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(E)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:I++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,w(C,e),null===x(E)&&e===x(C)&&(O?i():O=!0,r(L,a-s))):(e.sortIndex=u,w(E,e),A||P||(A=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return No},SDK_VERSION:function(){return La},_DEFAULT_ENTRY_NAME:function(){return ba},_addComponent:function(){return Sa},_addOrOverwriteComponent:function(){return Ta},_apps:function(){return wa},_clearComponents:function(){return Ra},_components:function(){return xa},_getProvider:function(){return Ca},_registerComponent:function(){return Ea},_removeServiceInstance:function(){return Ia},deleteApp:function(){return ja},getApp:function(){return Fa},getApps:function(){return Ua},initializeApp:function(){return Ma},onLog:function(){return Ba},registerVersion:function(){return Va},setLogLevel:function(){return za}});var t=n(791),r=n(164);function i(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(py){return void n(py)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,u,"next",e)}function u(e){i(a,r,o,s,u,"throw",e)}s(void 0)}))}}function a(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||u(e,t)||c()}var h=n(757),f=n.n(h);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function v(e,t){if(null==e)return{};var n,r,i=p(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=y(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function m(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=y(e))&&(r&&(r+=" "),r+=t);return r}var g=n(110),k=n.n(g),b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_="object"===("undefined"===typeof window?"undefined":b(window))&&"object"===("undefined"===typeof document?"undefined":b(document))&&9===document.nodeType;function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function T(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,S(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C={}.constructor;function I(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(I);if(e.constructor!==C)return e;var t={};for(var n in e)t[n]=I(e[n]);return t}function R(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=I(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var N=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},P=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=N(e[r]," ");else n=N(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function A(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function O(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function D(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;!1===n.format&&(o=-1/0);var s=A(n),u=s.linebreak,c=s.space;if(e&&o++,a)if(Array.isArray(a))for(var l=0;l<a.length;l++){var h=a[l];for(var f in h){var d=h[f];null!=d&&(r&&(r+=u),r+=O(f+":"+c+P(d)+";",o))}}else for(var p in a){var v=a[p];null!=v&&(r&&(r+=u),r+=O(p+":"+c+P(v)+";",o))}for(var y in t){var m=t[y];null!=m&&"fallbacks"!==y&&(r&&(r+=u),r+=O(y+":"+c+P(m)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),O(""+e+c+"{"+r,--o)+O("}",o)):r}var L=/([[\].#*$><+~=|^:(),"'`\s])/g,M="undefined"!==typeof CSS&&CSS.escape,F=function(e){return M?M(e):e.replace(L,"\\$1")},U=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),j=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(E(E(i)),s),i.selectorText="."+F(i.id)),i}T(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=P(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?d({},e,{allowEmpty:!0}):e;return D(this.selectorText,this.style,n)},x(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(U),q={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new j(e,t,n)}},V={indent:1,children:!0},B=/@([\w-]+)/,z=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(B);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new de(d({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=V);var t=A(e).linebreak;if(null==e.indent&&(e.indent=V.indent),null==e.children&&(e.children=V.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),W=/@media|@supports\s+/,H={onCreateRule:function(e,t,n){return W.test(e)?new z(e,t,n):null}},K={indent:1,children:!0},G=/@keyframes\s+([\w-]+)/,Q=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(G);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:F(a(this,o)),this.rules=new de(d({},n,{parent:this})),t)this.rules.add(s,t[s],d({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=K);var t=A(e).linebreak;if(null==e.indent&&(e.indent=K.indent),null==e.children&&(e.children=K.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),Y=/@keyframes\s+/,J=/\$([\w-]+)/g,$=function(e,t){return"string"===typeof e?e.replace(J,(function(e,n){return n in t?t[n]:e})):e},X=function(e,t,n){var r=e[t],i=$(r,n);i!==r&&(e[t]=i)},Z={onCreateRule:function(e,t,n){return"string"===typeof e&&Y.test(e)?new Q(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&X(e,"animation-name",n.keyframes),"animation"in e&&X(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return $(e,r.keyframes);default:return e}}},ee=function(e){function t(){return e.apply(this,arguments)||this}return T(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?d({},e,{allowEmpty:!0}):e;return D(this.key,this.style,n)},t}(U),te={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new ee(e,t,n):null}},ne=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=A(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=D(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return D(this.at,this.style,e)},e}(),re=/@font-face/,ie={onCreateRule:function(e,t,n){return re.test(e)?new ne(e,t,n):null}},oe=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return D(this.key,this.style,e)},e}(),ae={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new oe(e,t,n):null}},se=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),ue={"@charset":!0,"@import":!0,"@namespace":!0},ce={onCreateRule:function(e,t,n){return e in ue?new se(e,t,n):null}},le=[q,H,Z,te,ie,ae,ce],he={process:!0},fe={force:!0,process:!0},de=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,u=r.generateId,c=r.scoped,l=d({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(l.selector="."+F(this.classes[h]));var f=R(h,t,l);if(!f)return null;this.register(f);var p=void 0===l.index?this.index.length:l.index;return this.index.splice(p,0,f),f},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=d({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof j?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Q&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof j?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Q&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=he);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(o.onUpdate(n,t,a,r),r.process&&s&&s!==t.style){for(var u in o.onProcessStyle(t.style,t,a),t.style){var c=t.style[u];c!==s[u]&&t.prop(u,c,fe)}for(var l in s){var h=t.style[l],f=s[l];null==h&&h!==f&&t.prop(l,null,fe)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=A(e).linebreak,o=0;o<this.index.length;o++){var a=this.index[o].toString(e);(a||r)&&(t&&(t+=i),t+=a)}return t},e}(),pe=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=d({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new de(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ve=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ye=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=p(t,["attached"]),i=A(r).linebreak,o="",a=0;a<this.registry.length;a++){var s=this.registry[a];null!=n&&s.attached!==n||(o&&(o+=i),o+=s.toString(r))}return o},x(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),me=new ye,ge="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),ke="2f1acc6c3a606b082e5eef5e54414ffb";null==ge[ke]&&(ge[ke]=0);var be=ge[ke]++,_e=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+be+i+t:o+n.key+"-"+be+(i?"-"+i:"")+"-"+t}},we=function(e){var t;return function(){return t||(t=e()),t}},xe=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Se=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=P(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0},Te=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Ee=function(e,t){return e.selectorText=t,e.selectorText===t},Ce=we((function(){return document.querySelector("head")}));function Ie(e){var t=me.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=Ce(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Re=we((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Ne=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Pe=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Ae=function(){function e(e){this.getPropertyValue=xe,this.setProperty=Se,this.removeProperty=Te,this.setSelector=Ee,this.hasInsertedRules=!1,this.cssRules=[],e&&me.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=Re();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Ie(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else Ce().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=Pe(n,t);if(!1===(i=Ne(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var a=e.toString();if(!a)return!1;var s=Pe(n,t),u=Ne(n,a,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof pe&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Oe=0,De=function(){function e(e){this.id=Oe++,this.version="10.9.0",this.plugins=new ve,this.options={id:{minify:!1},createGenerateId:_e,Renderer:_?Ae:null,plugins:[]},this.generateId=_e({minify:!1});for(var t=0;t<le.length;t++)this.plugins.use(le[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=d({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===me.index?0:me.index+1);var r=new pe(e,d({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),me.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=d({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=R(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Le=function(e){return new De(e)},Me="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Fe(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var o=Fe(r);o&&(t||(t={}),t[n]=o)}}return t}Le();function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=d({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var je={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},qe=je;var Ve=t.createContext(null);function Be(){return t.useContext(Ve)}var ze="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",We=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var He=Date.now(),Ke="fnValues"+He,Ge="fnStyle"+ ++He,Qe=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=R(e,{},n);return r[Ge]=t,r},onProcessStyle:function(e,t){if(Ke in t||Ge in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Ke]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[Ge];o&&(i.style=o(e)||{});var a=i[Ke];if(a)for(var s in a)i.prop(s,a[s](e),r)}}},Ye="@global",Je="@global ",$e=function(){function e(e,t,n){for(var r in this.type="global",this.at=Ye,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new de(d({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Xe=function(){function e(e,t,n){this.type="global",this.at=Ye,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(Je.length);this.rule=n.jss.createRule(r,t,d({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ze=/\s*,\s*/g;function et(e,t){for(var n=e.split(Ze),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var tt=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Ye)return new $e(e,t,n);if("@"===e[0]&&e.substr(0,Je.length)===Je)return new Xe(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Ye]:null;if(i){for(var o in i)t.addRule(o,i[o],d({},n,{selector:et(o,e.selector)}));delete r[Ye]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Ye.length)===Ye){var o=et(i.substr(Ye.length),e.selector);t.addRule(o,r[i],d({},n,{selector:o})),delete r[i]}}(e,t))}}},nt=/\s*,\s*/g,rt=/&/g,it=/\$([\w-]+)/g;var ot=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(nt),r=e.split(nt),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(rt,a):a+" "+u}return i}function n(e,t,n){if(n)return d({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=d({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,u=i,c=u.options.parent;for(var l in r){var h=-1!==l.indexOf("&"),f="@"===l[0];if(h||f){if(a=n(u,c,a),h){var p=t(l,u.selector);s||(s=e(c,o)),p=p.replace(it,s);var v=u.key+"-"+l;"replaceRule"in c?c.replaceRule(v,r[l],d({},a,{selector:p})):c.addRule(v,r[l],d({},a,{selector:p}))}else f&&c.addRule(l,{},a).addRule(u.key,r[l],{selector:u.selector});delete r[l]}}return r}}},at=/[A-Z]/g,st=/^ms-/,ut={};function ct(e){return"-"+e.toLowerCase()}var lt=function(e){if(ut.hasOwnProperty(e))return ut[e];var t=e.replace(at,ct);return ut[e]=st.test(t)?"-"+t:t};function ht(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:lt(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(ht):t.fallbacks=ht(e.fallbacks)),t}var ft=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=ht(e[t]);return e}return ht(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=lt(t);return t===r?e:(n.prop(r,e),null)}}},dt=Me&&CSS?CSS.px:"px",pt=Me&&CSS?CSS.ms:"ms",vt=Me&&CSS?CSS.percent:"%";function yt(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var mt=yt({"animation-delay":pt,"animation-duration":pt,"background-position":dt,"background-position-x":dt,"background-position-y":dt,"background-size":dt,border:dt,"border-bottom":dt,"border-bottom-left-radius":dt,"border-bottom-right-radius":dt,"border-bottom-width":dt,"border-left":dt,"border-left-width":dt,"border-radius":dt,"border-right":dt,"border-right-width":dt,"border-top":dt,"border-top-left-radius":dt,"border-top-right-radius":dt,"border-top-width":dt,"border-width":dt,"border-block":dt,"border-block-end":dt,"border-block-end-width":dt,"border-block-start":dt,"border-block-start-width":dt,"border-block-width":dt,"border-inline":dt,"border-inline-end":dt,"border-inline-end-width":dt,"border-inline-start":dt,"border-inline-start-width":dt,"border-inline-width":dt,"border-start-start-radius":dt,"border-start-end-radius":dt,"border-end-start-radius":dt,"border-end-end-radius":dt,margin:dt,"margin-bottom":dt,"margin-left":dt,"margin-right":dt,"margin-top":dt,"margin-block":dt,"margin-block-end":dt,"margin-block-start":dt,"margin-inline":dt,"margin-inline-end":dt,"margin-inline-start":dt,padding:dt,"padding-bottom":dt,"padding-left":dt,"padding-right":dt,"padding-top":dt,"padding-block":dt,"padding-block-end":dt,"padding-block-start":dt,"padding-inline":dt,"padding-inline-end":dt,"padding-inline-start":dt,"mask-position-x":dt,"mask-position-y":dt,"mask-size":dt,height:dt,width:dt,"min-height":dt,"max-height":dt,"min-width":dt,"max-width":dt,bottom:dt,left:dt,top:dt,right:dt,inset:dt,"inset-block":dt,"inset-block-end":dt,"inset-block-start":dt,"inset-inline":dt,"inset-inline-end":dt,"inset-inline-start":dt,"box-shadow":dt,"text-shadow":dt,"column-gap":dt,"column-rule":dt,"column-rule-width":dt,"column-width":dt,"font-size":dt,"font-size-delta":dt,"letter-spacing":dt,"text-decoration-thickness":dt,"text-indent":dt,"text-stroke":dt,"text-stroke-width":dt,"word-spacing":dt,motion:dt,"motion-offset":dt,outline:dt,"outline-offset":dt,"outline-width":dt,perspective:dt,"perspective-origin-x":vt,"perspective-origin-y":vt,"transform-origin":vt,"transform-origin-x":vt,"transform-origin-y":vt,"transform-origin-z":vt,"transition-delay":pt,"transition-duration":pt,"vertical-align":dt,"flex-basis":dt,"shape-margin":dt,size:dt,gap:dt,grid:dt,"grid-gap":dt,"row-gap":dt,"grid-row-gap":dt,"grid-column-gap":dt,"grid-template-rows":dt,"grid-template-columns":dt,"grid-auto-rows":dt,"grid-auto-columns":dt,"box-shadow-x":dt,"box-shadow-y":dt,"box-shadow-blur":dt,"box-shadow-spread":dt,"font-line-height":dt,"text-shadow-x":dt,"text-shadow-y":dt,"text-shadow-blur":dt});function gt(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=gt(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=gt(i,t[i],n);else for(var o in t)t[o]=gt(e+"-"+o,t[o],n);else if("number"===typeof t&&!1===isNaN(t)){var a=n[e]||mt[e];return!a||0===t&&a===dt?t.toString():"function"===typeof a?a(t).toString():""+t+a}return t}var kt=function(e){void 0===e&&(e={});var t=yt(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=gt(r,e[r],t);return e},onChangeValue:function(e,n){return gt(n,e,t)}}};function bt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _t(e){return function(e){if(Array.isArray(e))return s(e)}(e)||bt(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wt="",xt="",St="",Tt="",Et=_&&"ontouchstart"in document.documentElement;if(_){var Ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},It=document.createElement("p").style;for(var Rt in Ct)if(Rt+"Transform"in It){wt=Rt,xt=Ct[Rt];break}"Webkit"===wt&&"msHyphens"in It&&(wt="ms",xt=Ct.ms,Tt="edge"),"Webkit"===wt&&"-apple-trailing-word"in It&&(St="apple")}var Nt=wt,Pt=xt,At=St,Ot=Tt,Dt=Et;var Lt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Nt?"-webkit-"+e:Pt+e)}},Mt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Nt?Pt+"print-"+e:e)}},Ft=/[-\s]+(.)?/g;function Ut(e,t){return t?t.toUpperCase():""}function jt(e){return e.replace(Ft,Ut)}function qt(e){return jt("-"+e)}var Vt,Bt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Nt){var n="mask-image";if(jt(n)in t)return e;if(Nt+qt(n)in t)return Pt+e}return e}},zt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==At||Dt?e:Pt+e)}},Wt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Pt+e)}},Ht={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Pt+e)}},Kt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Nt||"ms"===Nt&&"edge"!==Ot?Pt+e:e)}},Gt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Nt||"ms"===Nt||"apple"===At?Pt+e:e)}},Qt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Nt?"WebkitColumn"+qt(e)in t&&Pt+"column-"+e:"Moz"===Nt&&("page"+qt(e)in t&&"page-"+e))}},Yt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Nt)return e;var n=e.replace("-inline","");return Nt+qt(n)in t&&Pt+n}},Jt={supportedProperty:function(e,t){return jt(e)in t&&e}},$t={supportedProperty:function(e,t){var n=qt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Nt+n in t?Pt+e:"Webkit"!==Nt&&"Webkit"+n in t&&"-webkit-"+e}},Xt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Nt?""+Pt+e:e)}},Zt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Nt?Pt+"scroll-chaining":e)}},en={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},tn={supportedProperty:function(e,t){var n=en[e];return!!n&&(Nt+qt(n)in t&&Pt+n)}},nn={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},rn=Object.keys(nn),on=function(e){return Pt+e},an={supportedProperty:function(e,t,n){var r=n.multiple;if(rn.indexOf(e)>-1){var i=nn[e];if(!Array.isArray(i))return Nt+qt(i)in t&&Pt+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(Nt+qt(i[0])in t))return!1;return i.map(on)}return!1}},sn=[Lt,Mt,Bt,zt,Wt,Ht,Kt,Gt,Qt,Yt,Jt,$t,Xt,Zt,tn,an],un=sn.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),cn=sn.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,_t(t.noPrefill)),e}),[]),ln={};if(_){Vt=document.createElement("p");var hn=window.getComputedStyle(document.documentElement,"");for(var fn in hn)isNaN(fn)||(ln[hn[fn]]=hn[fn]);cn.forEach((function(e){return delete ln[e]}))}function dn(e,t){if(void 0===t&&(t={}),!Vt)return e;if(null!=ln[e])return ln[e];"transition"!==e&&"transform"!==e||(t[e]=e in Vt.style);for(var n=0;n<un.length&&(ln[e]=un[n](e,Vt.style,t),!ln[e]);n++);try{Vt.style[e]=""}catch(r){return!1}return ln[e]}var pn,vn={},yn={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},mn=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function gn(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?dn(t):", "+dn(n);return r||(t||n)}function kn(e,t){var n=t;if(!pn||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=vn[r])return vn[r];try{pn.style[e]=n}catch(i){return vn[r]=!1,!1}if(yn[e])n=n.replace(mn,gn);else if(""===pn.style[e]&&("-ms-flex"===(n=Pt+n)&&(pn.style[e]="-ms-flexbox"),pn.style[e]=n,""===pn.style[e]))return vn[r]=!1,!1;return pn.style[e]="",vn[r]=n,vn[r]}_&&(pn=document.createElement("p"));var bn=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=dn(n);o&&o!==n&&(i=!0);var a=!1,s=kn(o,P(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Nt?e:"@"+Pt+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return kn(t,P(e))||e}}};var _n=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),o=0;o<i.length;o++)r[i[o]]=t[i[o]];return r}}};var wn=Le({plugins:[Qe(),tt(),ot(),ft(),kt(),"undefined"===typeof window?null:bn(),_n()]}),xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0,c=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==We.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[ze]&&""===a?"".concat(o,"-").concat(c()):o}return"".concat(s).concat(i).concat(c())}}(),Sn={disableGeneration:!1,generateClassName:xn,jss:wn,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Tn=t.createContext(Sn);var En=-1e9;function Cn(){return En+=1}function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Rn(e){return e&&"object"===In(e)&&e.constructor===Object}function Nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?d({},e):e;return Rn(e)&&Rn(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(Rn(t[i])&&i in e?r[i]=Nn(e[i],t[i],n):r[i]=t[i])})),r}function Pn(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],a=d({},i);return Object.keys(o).forEach((function(e){a[e]=Nn(a[e],o[e])})),a},options:{}}}var An={};function On(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Ue({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function Dn(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!i.disableGeneration){var s=qe.get(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},qe.set(i.sheetsManager,o,r,s));var u=d({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=i.sheetsRegistry;if(0===s.refs){var l;i.sheetsCache&&(l=qe.get(i.sheetsCache,o,r));var h=o.create(r,a);l||((l=i.jss.createStyleSheet(h,d({link:!1},u))).attach(),i.sheetsCache&&qe.set(i.sheetsCache,o,r,l)),c&&c.add(l),s.staticSheet=l,s.dynamicStyles=Fe(h)}if(s.dynamicStyles){var f=i.jss.createStyleSheet(s.dynamicStyles,d({link:!0},u));f.update(t),f.attach(),n.dynamicSheet=f,n.classes=Ue({baseClasses:s.staticSheet.classes,newClasses:f.classes}),c&&c.add(f)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Ln(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Mn(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=qe.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(qe.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function Fn(e,n){var r,i=t.useRef([]),o=t.useMemo((function(){return{}}),n);i.current!==o&&(i.current=o,r=e()),t.useEffect((function(){return function(){r&&r()}}),[o])}function Un(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=n.classNamePrefix,o=n.Component,a=n.defaultTheme,s=void 0===a?An:a,u=v(n,["name","classNamePrefix","Component","defaultTheme"]),c=Pn(e),l=r||i||"makeStyles";c.options={index:Cn(),name:r,meta:l,classNamePrefix:l};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Be()||s,i=d({},t.useContext(Tn),u),a=t.useRef(),l=t.useRef();Fn((function(){var t={name:r,state:{},stylesCreator:c,stylesOptions:i,theme:n};return Dn(t,e),l.current=!1,a.current=t,function(){Mn(t)}}),[n,c]),t.useEffect((function(){l.current&&Ln(a.current,e),l.current=!0}));var h=On(a.current,e.classes,o);return h};return h}function jn(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}var qn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var i=n.defaultTheme,o=n.withTheme,a=void 0!==o&&o,s=n.name,u=v(n,["defaultTheme","withTheme","name"]);var c=s,l=Un(e,d({defaultTheme:i,Component:r,name:s||r.displayName,classNamePrefix:c},u)),h=t.forwardRef((function(e,n){e.classes;var o,u=e.innerRef,c=v(e,["classes","innerRef"]),h=l(d({},r.defaultProps,e)),f=c;return("string"===typeof s||a)&&(o=Be()||i,s&&(f=jn({theme:o,name:s,props:c})),a&&!f.theme&&(f.theme=o)),t.createElement(r,d({ref:u||n,classes:h},f))}));return k()(h,r),h}},Vn=["xs","sm","md","lg","xl"];function Bn(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=v(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function c(e,t){var r=Vn.indexOf(t);return r===Vn.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Vn[r+1]]?n[Vn[r+1]]:t)-a/100).concat(i,")")}return d({keys:Vn,values:n,up:u,down:function(e){var t=Vn.indexOf(e)+1,r=n[Vn[t]];return t===Vn.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-a/100).concat(i,")")},between:c,only:function(e){return c(e,e)},width:function(e){return n[e]}},s)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t,n){var r;return d({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),d({paddingLeft:t(2),paddingRight:t(2)},n,zn({},e.up("sm"),d({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},zn(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),zn(r,e.up("sm"),{minHeight:64}),r)},n)}function Hn(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var Kn={black:"#000",white:"#fff"},Gn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Qn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Yn={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Jn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},$n={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Xn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Zn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function tr(e){if(e.type)return e;if("#"===e.charAt(0))return tr(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Hn(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function nr(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function rr(e){var t="hsl"===(e=tr(e)).type?tr(function(e){var t=(e=tr(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),nr({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ir(e,t){return e=tr(e),t=er(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,nr(e)}function or(e,t){if(e=tr(e),t=er(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return nr(e)}function ar(e,t){if(e=tr(e),t=er(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return nr(e)}var sr={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Kn.white,default:Gn[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ur={text:{primary:Kn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Gn[800],default:"#303030"},action:{active:Kn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function cr(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=ar(e.main,i):"dark"===t&&(e.dark=or(e.main,o)))}function lr(e){var t=e.primary,n=void 0===t?{light:Qn[300],main:Qn[500],dark:Qn[700]}:t,r=e.secondary,i=void 0===r?{light:Yn.A200,main:Yn.A400,dark:Yn.A700}:r,o=e.error,a=void 0===o?{light:Jn[300],main:Jn[500],dark:Jn[700]}:o,s=e.warning,u=void 0===s?{light:$n[300],main:$n[500],dark:$n[700]}:s,c=e.info,l=void 0===c?{light:Xn[300],main:Xn[500],dark:Xn[700]}:c,h=e.success,f=void 0===h?{light:Zn[300],main:Zn[500],dark:Zn[700]}:h,p=e.type,y=void 0===p?"light":p,m=e.contrastThreshold,g=void 0===m?3:m,k=e.tonalOffset,b=void 0===k?.2:k,_=v(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(e){var t=function(e,t){var n=rr(e),r=rr(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,ur.text.primary)>=g?ur.text.primary:sr.text.primary;return t}var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=d({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Hn(4,t));if("string"!==typeof e.main)throw new Error(Hn(5,JSON.stringify(e.main)));return cr(e,"light",n,b),cr(e,"dark",r,b),e.contrastText||(e.contrastText=w(e.main)),e},S={dark:ur,light:sr};return Nn(d({common:Kn,type:y,primary:x(n),secondary:x(i,"A400","A200","A700"),error:x(a),warning:x(u),info:x(l),success:x(f),grey:Gn,contrastThreshold:g,getContrastText:w,augmentColor:x,tonalOffset:b},S[y]),_)}function hr(e){return Math.round(1e5*e)/1e5}function fr(e){return hr(e)}var dr={textTransform:"uppercase"},pr='"Roboto", "Helvetica", "Arial", sans-serif';function vr(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?pr:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,f=void 0===h?500:h,p=n.fontWeightBold,y=void 0===p?700:p,m=n.htmlFontSize,g=void 0===m?16:m,k=n.allVariants,b=n.pxToRem,_=v(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=a/14,x=b||function(e){return"".concat(e/g*w,"rem")},S=function(e,t,n,r,o){return d({fontFamily:i,fontWeight:e,fontSize:x(t),lineHeight:n},i===pr?{letterSpacing:"".concat(hr(r/t),"em")}:{},o,k)},T={h1:S(u,96,1.167,-1.5),h2:S(u,60,1.2,-.5),h3:S(l,48,1.167,0),h4:S(l,34,1.235,.25),h5:S(l,24,1.334,0),h6:S(f,20,1.6,.15),subtitle1:S(l,16,1.75,.15),subtitle2:S(f,14,1.57,.1),body1:S(l,16,1.5,.15),body2:S(l,14,1.43,.15),button:S(f,14,1.75,.4,dr),caption:S(l,12,1.66,.4),overline:S(l,12,2.66,1,dr)};return Nn(d({htmlFontSize:g,pxToRem:x,round:fr,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:y},T),_,{clone:!1})}function yr(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var mr=["none",yr(0,2,1,-1,0,1,1,0,0,1,3,0),yr(0,3,1,-2,0,2,2,0,0,1,5,0),yr(0,3,3,-2,0,3,4,0,0,1,8,0),yr(0,2,4,-1,0,4,5,0,0,1,10,0),yr(0,3,5,-1,0,5,8,0,0,1,14,0),yr(0,3,5,-1,0,6,10,0,0,1,18,0),yr(0,4,5,-2,0,7,10,1,0,2,16,1),yr(0,5,5,-3,0,8,10,1,0,3,14,2),yr(0,5,6,-3,0,9,12,1,0,3,16,2),yr(0,6,6,-3,0,10,14,1,0,4,18,3),yr(0,6,7,-4,0,11,15,1,0,4,20,3),yr(0,7,8,-4,0,12,17,2,0,5,22,4),yr(0,7,8,-4,0,13,19,2,0,5,24,4),yr(0,7,9,-4,0,14,21,2,0,5,26,4),yr(0,8,9,-5,0,15,22,2,0,6,28,5),yr(0,8,10,-5,0,16,24,2,0,6,30,5),yr(0,8,11,-5,0,17,26,2,0,6,32,5),yr(0,9,11,-5,0,18,28,2,0,7,34,6),yr(0,9,12,-6,0,19,29,2,0,7,36,6),yr(0,10,13,-6,0,20,31,3,0,8,38,7),yr(0,10,13,-6,0,21,33,3,0,8,40,7),yr(0,10,14,-6,0,22,35,3,0,8,42,7),yr(0,11,14,-7,0,23,36,3,0,9,44,8),yr(0,11,15,-7,0,24,38,3,0,9,46,8)],gr={borderRadius:4},kr={xs:0,sm:600,md:960,lg:1280,xl:1920},br={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(kr[e],"px)")}};var _r=function(e,t){return t?Nn(e,t,{clone:!1}):e};var wr={m:"margin",p:"padding"},xr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Sr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Tr=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!Sr[e])return[e];e=Sr[e]}var t=l(e.split(""),2),n=t[0],r=t[1],i=wr[n],o=xr[r]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),Er=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Cr(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function Ir(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Rr(e){var t=Cr(e.theme);return Object.keys(e).map((function(n){if(-1===Er.indexOf(n))return null;var r=Ir(Tr(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||br;return t.reduce((function(e,i,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===In(t)){var i=e.theme.breakpoints||br;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(_r,{})}Rr.propTypes={},Rr.filterProps=Er;function Nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Cr({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var Pr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ar={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Or(e){return"".concat(Math.round(e),"ms")}var Dr={easing:Pr,duration:Ar,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Ar.standard:n,i=t.easing,o=void 0===i?Pr.easeInOut:i,a=t.delay,s=void 0===a?0:a;v(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Or(r)," ").concat(o," ").concat("string"===typeof s?s:Or(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Lr={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Mr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,o=e.palette,a=void 0===o?{}:o,s=e.spacing,u=e.typography,c=void 0===u?{}:u,l=v(e,["breakpoints","mixins","palette","spacing","typography"]),h=lr(a),f=Bn(n),d=Nr(s),p=Nn({breakpoints:f,direction:"ltr",mixins:Wn(f,d,i),overrides:{},palette:h,props:{},shadows:mr,typography:vr(h,c),spacing:d,shape:gr,transitions:Dr,zIndex:Lr},l),y=arguments.length,m=new Array(y>1?y-1:0),g=1;g<y;g++)m[g-1]=arguments[g];return p=m.reduce((function(e,t){return Nn(e,t)}),p)}var Fr=Mr();var Ur=function(e,t){return qn(e,d({defaultTheme:Fr},t))};function jr(e){if("string"!==typeof e)throw new Error(Hn(7));return e.charAt(0).toUpperCase()+e.slice(1)}var qr=t.forwardRef((function(e,n){var r=e.children,i=e.classes,o=e.className,a=e.color,s=void 0===a?"inherit":a,u=e.component,c=void 0===u?"svg":u,l=e.fontSize,h=void 0===l?"medium":l,f=e.htmlColor,p=e.titleAccess,y=e.viewBox,g=void 0===y?"0 0 24 24":y,k=v(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return t.createElement(c,d({className:m(i.root,o,"inherit"!==s&&i["color".concat(jr(s))],"default"!==h&&"medium"!==h&&i["fontSize".concat(jr(h))]),focusable:"false",viewBox:g,color:f,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:n},k),r,p?t.createElement("title",null,p):null)}));qr.muiName="SvgIcon";var Vr=Ur((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(qr);var Br=function(e,n){var r=function(n,r){return t.createElement(Vr,d({ref:r},n),e)};return r.muiName=Vr.muiName,t.memo(t.forwardRef(r))}(t.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));var zr=t.forwardRef((function(e,n){var r=e.alt,i=e.children,o=e.classes,a=e.className,s=e.component,u=void 0===s?"div":s,c=e.imgProps,l=e.sizes,h=e.src,f=e.srcSet,p=e.variant,y=void 0===p?"circular":p,g=v(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),k=null,b=function(e){var n=e.src,r=e.srcSet,i=t.useState(!1),o=i[0],a=i[1];return t.useEffect((function(){if(n||r){a(!1);var e=!0,t=new Image;return t.src=n,t.srcSet=r,t.onload=function(){e&&a("loaded")},t.onerror=function(){e&&a("error")},function(){e=!1}}}),[n,r]),o}({src:h,srcSet:f}),_=h||f,w=_&&"error"!==b;return k=w?t.createElement("img",d({alt:r,src:h,srcSet:f,sizes:l,className:o.img},c)):null!=i?i:_&&r?r[0]:t.createElement(Br,{className:o.fallback}),t.createElement(u,d({className:m(o.root,o.system,o[y],a,!w&&o.colorDefault),ref:n},g),k)})),Wr=Ur((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(zr),Hr=n(184),Kr=function(e){var t=e.username,n=e.caption,r=e.imageUrl;return(0,Hr.jsxs)("div",{className:"post",children:[(0,Hr.jsxs)("div",{className:"post__header",children:[(0,Hr.jsx)(Wr,{className:"post__avatar",alt:t,src:"/static/images/avatar/1.jpg"}),(0,Hr.jsx)("h3",{children:t})]}),(0,Hr.jsx)("img",{className:"post__image",src:r,alt:"React"}),(0,Hr.jsxs)("h4",{className:"post__text",children:[(0,Hr.jsx)("strong",{children:t}),n]})]})};var Gr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Un(e,d({defaultTheme:Fr},t))};function Qr(e){return e&&e.ownerDocument||document}function Yr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Jr(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){Yr(e,t),Yr(n,t)}}),[e,n])}var $r="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var Xr=t.forwardRef((function(e,n){var i=e.children,o=e.container,a=e.disablePortal,s=void 0!==a&&a,u=e.onRendered,c=t.useState(null),l=c[0],h=c[1],f=Jr(t.isValidElement(i)?i.ref:null,n);return $r((function(){s||h(function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(o)||document.body)}),[o,s]),$r((function(){if(l&&!s)return Yr(n,l),function(){Yr(n,null)}}),[n,l,s]),$r((function(){u&&(l||s)&&u()}),[u,l,s]),s?t.isValidElement(i)?t.cloneElement(i,{ref:f}):i:l?r.createPortal(i,l):l}));function Zr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var ei="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function ti(e){var n=t.useRef(e);return ei((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e){var t,n=Qr(e);return n.body===e?(t=n,Qr(t).defaultView||window).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ii(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function oi(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function ai(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat(_t(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&ii(e,i)}))}function si(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function ui(e,t){var n,r=[],i=[],o=e.container;if(!t.disableScrollLock){if(ri(o)){var a=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(oi(o)+a,"px"),n=Qr(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(oi(e)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var ci=function(){function e(){ni(this,e),this.modals=[],this.containers=[]}return x(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ii(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);ai(t,e.mountNode,e.modalRef,r,!0);var i=si(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=si(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=ui(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=si(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&ii(e.modalRef,!0),ai(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&ii(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var li=function(e){var n=e.children,i=e.disableAutoFocus,o=void 0!==i&&i,a=e.disableEnforceFocus,s=void 0!==a&&a,u=e.disableRestoreFocus,c=void 0!==u&&u,l=e.getDoc,h=e.isEnabled,f=e.open,d=t.useRef(),p=t.useRef(null),v=t.useRef(null),y=t.useRef(),m=t.useRef(null),g=t.useCallback((function(e){m.current=r.findDOMNode(e)}),[]),k=Jr(n.ref,g),b=t.useRef();return t.useEffect((function(){b.current=f}),[f]),!b.current&&f&&"undefined"!==typeof window&&(y.current=l().activeElement),t.useEffect((function(){if(f){var e=Qr(m.current);o||!m.current||m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex",-1),m.current.focus());var t=function(){null!==m.current&&(e.hasFocus()&&!s&&h()&&!d.current?m.current&&!m.current.contains(e.activeElement)&&m.current.focus():d.current=!1)},n=function(t){!s&&h()&&9===t.keyCode&&e.activeElement===m.current&&(d.current=!0,t.shiftKey?v.current.focus():p.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),c||(y.current&&y.current.focus&&y.current.focus(),y.current=null)}}}),[o,s,c,h,f]),t.createElement(t.Fragment,null,t.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:k}),t.createElement("div",{tabIndex:0,ref:v,"data-test":"sentinelEnd"}))},hi={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},fi=t.forwardRef((function(e,n){var r=e.invisible,i=void 0!==r&&r,o=e.open,a=v(e,["invisible","open"]);return o?t.createElement("div",d({"aria-hidden":!0,ref:n},a,{style:d({},hi.root,i?hi.invisible:{},a.style)})):null}));var di=new ci,pi=t.forwardRef((function(e,n){var i=Be(),o=jn({name:"MuiModal",props:d({},e),theme:i}),a=o.BackdropComponent,s=void 0===a?fi:a,u=o.BackdropProps,c=o.children,l=o.closeAfterTransition,h=void 0!==l&&l,f=o.container,p=o.disableAutoFocus,y=void 0!==p&&p,m=o.disableBackdropClick,g=void 0!==m&&m,k=o.disableEnforceFocus,b=void 0!==k&&k,_=o.disableEscapeKeyDown,w=void 0!==_&&_,x=o.disablePortal,S=void 0!==x&&x,T=o.disableRestoreFocus,E=void 0!==T&&T,C=o.disableScrollLock,I=void 0!==C&&C,R=o.hideBackdrop,N=void 0!==R&&R,P=o.keepMounted,A=void 0!==P&&P,O=o.manager,D=void 0===O?di:O,L=o.onBackdropClick,M=o.onClose,F=o.onEscapeKeyDown,U=o.onRendered,j=o.open,q=v(o,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),V=t.useState(!0),B=V[0],z=V[1],W=t.useRef({}),H=t.useRef(null),K=t.useRef(null),G=Jr(K,n),Q=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(o),Y=function(){return Qr(H.current)},J=function(){return W.current.modalRef=K.current,W.current.mountNode=H.current,W.current},$=function(){D.mount(J(),{disableScrollLock:I}),K.current.scrollTop=0},X=ti((function(){var e=function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(f)||Y().body;D.add(J(),e),K.current&&$()})),Z=t.useCallback((function(){return D.isTopModal(J())}),[D]),ee=ti((function(e){H.current=e,e&&(U&&U(),j&&Z()?$():ii(K.current,!0))})),te=t.useCallback((function(){D.remove(J())}),[D]);if(t.useEffect((function(){return function(){te()}}),[te]),t.useEffect((function(){j?X():Q&&h||te()}),[j,te,Q,h,X]),!A&&!j&&(!Q||B))return null;var ne=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(i||{zIndex:Lr}),re={};return void 0===c.props.tabIndex&&(re.tabIndex=c.props.tabIndex||"-1"),Q&&(re.onEnter=Zr((function(){z(!1)}),c.props.onEnter),re.onExited=Zr((function(){z(!0),h&&te()}),c.props.onExited)),t.createElement(Xr,{ref:ee,container:f,disablePortal:S},t.createElement("div",d({ref:G,onKeyDown:function(e){"Escape"===e.key&&Z()&&(F&&F(e),w||(e.stopPropagation(),M&&M(e,"escapeKeyDown")))},role:"presentation"},q,{style:d({},ne.root,!j&&B?ne.hidden:{},q.style)}),N?null:t.createElement(s,d({open:j,onClick:function(e){e.target===e.currentTarget&&(L&&L(e),!g&&M&&M(e,"backdropClick"))}},u)),t.createElement(li,{disableEnforceFocus:b,disableAutoFocus:y,disableRestoreFocus:E,getDoc:Y,isEnabled:Z,open:j},t.cloneElement(c,re))))}));var vi=t.createContext();var yi=vi;function mi(e,t){return parseInt(e[t],10)||0}var gi="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,ki={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},bi=t.forwardRef((function(e,n){var r=e.onChange,i=e.rows,o=e.rowsMax,a=e.rowsMin,s=e.maxRows,u=e.minRows,c=void 0===u?1:u,l=e.style,h=e.value,f=v(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),p=s||o,y=i||a||c,m=t.useRef(null!=h).current,g=t.useRef(null),k=Jr(n,g),b=t.useRef(null),_=t.useRef(0),w=t.useState({}),x=w[0],S=w[1],T=t.useCallback((function(){var t=g.current,n=window.getComputedStyle(t),r=b.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=mi(n,"padding-bottom")+mi(n,"padding-top"),a=mi(n,"border-bottom-width")+mi(n,"border-top-width"),s=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,c=s;y&&(c=Math.max(Number(y)*u,c)),p&&(c=Math.min(Number(p)*u,c));var l=(c=Math.max(c,u))+("border-box"===i?o+a:0),h=Math.abs(c-s)<=1;S((function(e){return _.current<20&&(l>0&&Math.abs((e.outerHeightStyle||0)-l)>1||e.overflow!==h)?(_.current+=1,{overflow:h,outerHeightStyle:l}):e}))}),[p,y,e.placeholder]);t.useEffect((function(){var e=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this,s=function(){e.apply(a,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}((function(){_.current=0,T()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[T]),gi((function(){T()})),t.useEffect((function(){_.current=0}),[h]);return t.createElement(t.Fragment,null,t.createElement("textarea",d({value:h,onChange:function(e){_.current=0,m||T(),r&&r(e)},ref:k,rows:y,style:d({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},l)},f)),t.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:b,tabIndex:-1,style:d({},ki,l)}))})),_i=bi;function wi(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}var xi="undefined"===typeof window?t.useEffect:t.useLayoutEffect,Si=t.forwardRef((function(e,n){var r=e["aria-describedby"],i=e.autoComplete,o=e.autoFocus,a=e.classes,s=e.className,u=(e.color,e.defaultValue),c=e.disabled,l=e.endAdornment,h=(e.error,e.fullWidth),f=void 0!==h&&h,p=e.id,y=e.inputComponent,g=void 0===y?"input":y,k=e.inputProps,b=void 0===k?{}:k,_=e.inputRef,w=(e.margin,e.multiline),x=void 0!==w&&w,S=e.name,T=e.onBlur,E=e.onChange,C=e.onClick,I=e.onFocus,R=e.onKeyDown,N=e.onKeyUp,P=e.placeholder,A=e.readOnly,O=e.renderSuffix,D=e.rows,L=e.rowsMax,M=e.rowsMin,F=e.maxRows,U=e.minRows,j=e.startAdornment,q=e.type,V=void 0===q?"text":q,B=e.value,z=v(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),W=null!=b.value?b.value:B,H=t.useRef(null!=W).current,K=t.useRef(),G=t.useCallback((function(e){0}),[]),Q=Jr(b.ref,G),Y=Jr(_,Q),J=Jr(K,Y),$=t.useState(!1),X=$[0],Z=$[1],ee=t.useContext(vi);var te=function(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}({props:e,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});te.focused=ee?ee.focused:X,t.useEffect((function(){!ee&&c&&X&&(Z(!1),T&&T())}),[ee,c,X,T]);var ne=ee&&ee.onFilled,re=ee&&ee.onEmpty,ie=t.useCallback((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(wi(e.value)&&""!==e.value||t&&wi(e.defaultValue)&&""!==e.defaultValue)}(e)?re&&re():ne&&ne()}),[ne,re]);xi((function(){H&&ie({value:W})}),[W,ie,H]);t.useEffect((function(){ie(K.current)}),[]);var oe=g,ae=d({},b,{ref:J});"string"!==typeof oe?ae=d({inputRef:J,type:V},ae,{ref:null}):x?!D||F||U||L||M?(ae=d({minRows:D||U,rowsMax:L,maxRows:F},ae),oe=_i):oe="textarea":ae=d({type:V},ae);return t.useEffect((function(){ee&&ee.setAdornedStart(Boolean(j))}),[ee,j]),t.createElement("div",d({className:m(a.root,a["color".concat(jr(te.color||"primary"))],s,te.disabled&&a.disabled,te.error&&a.error,f&&a.fullWidth,te.focused&&a.focused,ee&&a.formControl,x&&a.multiline,j&&a.adornedStart,l&&a.adornedEnd,"dense"===te.margin&&a.marginDense),onClick:function(e){K.current&&e.currentTarget===e.target&&K.current.focus(),C&&C(e)},ref:n},z),j,t.createElement(yi.Provider,{value:null},t.createElement(oe,d({"aria-invalid":te.error,"aria-describedby":r,autoComplete:i,autoFocus:o,defaultValue:u,disabled:te.disabled,id:p,onAnimationStart:function(e){ie("mui-auto-fill-cancel"===e.animationName?K.current:{value:"x"})},name:S,placeholder:P,readOnly:A,required:te.required,rows:D,value:W,onKeyDown:R,onKeyUp:N},ae,{className:m(a.input,b.className,te.disabled&&a.disabled,x&&a.inputMultiline,te.hiddenLabel&&a.inputHiddenLabel,j&&a.inputAdornedStart,l&&a.inputAdornedEnd,"search"===V&&a.inputTypeSearch,"dense"===te.margin&&a.inputMarginDense),onBlur:function(e){T&&T(e),b.onBlur&&b.onBlur(e),ee&&ee.onBlur?ee.onBlur(e):Z(!1)},onChange:function(e){if(!H){var t=e.target||K.current;if(null==t)throw new Error(Hn(1));ie({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];b.onChange&&b.onChange.apply(b,[e].concat(r)),E&&E.apply(void 0,[e].concat(r))},onFocus:function(e){te.disabled?e.stopPropagation():(I&&I(e),b.onFocus&&b.onFocus(e),ee&&ee.onFocus?ee.onFocus(e):Z(!0))}}))),l,O?O(d({},te,{startAdornment:j})):null)})),Ti=Ur((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},i={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:d({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(Si),Ei=t.forwardRef((function(e,n){var r=e.disableUnderline,i=e.classes,o=e.fullWidth,a=void 0!==o&&o,s=e.inputComponent,u=void 0===s?"input":s,c=e.multiline,l=void 0!==c&&c,h=e.type,f=void 0===h?"text":h,p=v(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return t.createElement(Ti,d({classes:d({},i,{root:m(i.root,!r&&i.underline),underline:null}),fullWidth:a,inputComponent:u,multiline:l,ref:n,type:f},p))}));Ei.muiName="Input";var Ci=Ur((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(Ei),Ii=!0,Ri=!1,Ni=null,Pi={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Ai(e){e.metaKey||e.altKey||e.ctrlKey||(Ii=!0)}function Oi(){Ii=!1}function Di(){"hidden"===this.visibilityState&&Ri&&(Ii=!0)}function Li(e){var t=e.target;try{return t.matches(":focus-visible")}catch(py){}return Ii||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Pi[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function Mi(){Ri=!0,window.clearTimeout(Ni),Ni=window.setTimeout((function(){Ri=!1}),100)}function Fi(){var e=t.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",Ai,!0),t.addEventListener("mousedown",Oi,!0),t.addEventListener("pointerdown",Oi,!0),t.addEventListener("touchstart",Oi,!0),t.addEventListener("visibilitychange",Di,!0))}),[]);return{isFocusVisible:Li,onBlurVisible:Mi,ref:e}}var Ui=t.createContext(null);function ji(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function qi(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Vi(e,n,r){var i=ji(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var u=a in n,c=a in i,l=n[a],h=(0,t.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,t.isValidElement)(l)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:qi(s,"exit",e),enter:qi(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:qi(s,"exit",e),enter:qi(s,"enter",e)})}})),o}var Bi=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},zi=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(E(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}T(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,ji(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:qi(e,"appear",r),enter:qi(e,"enter",r),exit:qi(e,"exit",r)})}))):Vi(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=ji(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=d({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=p(e,["component","childFactory"]),o=this.state.contextValue,a=Bi(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(Ui.Provider,{value:o},a):t.createElement(Ui.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);zi.propTypes={},zi.defaultProps={component:"div",childFactory:function(e){return e}};var Wi=zi,Hi="undefined"===typeof window?t.useEffect:t.useLayoutEffect;var Ki=function(e){var n=e.classes,r=e.pulsate,i=void 0!==r&&r,o=e.rippleX,a=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=void 0===c?function(){}:c,h=e.timeout,f=t.useState(!1),d=f[0],p=f[1],v=m(n.ripple,n.rippleVisible,i&&n.ripplePulsate),y={width:s,height:s,top:-s/2+a,left:-s/2+o},g=m(n.child,d&&n.childLeaving,i&&n.childPulsate),k=ti(l);return Hi((function(){if(!u){p(!0);var e=setTimeout(k,h);return function(){clearTimeout(e)}}}),[k,u,h]),t.createElement("span",{className:v,style:y},t.createElement("span",{className:g}))},Gi=t.forwardRef((function(e,n){var r=e.center,i=void 0!==r&&r,o=e.classes,a=e.className,s=v(e,["center","classes","className"]),u=t.useState([]),c=u[0],l=u[1],h=t.useRef(0),f=t.useRef(null);t.useEffect((function(){f.current&&(f.current(),f.current=null)}),[c]);var p=t.useRef(!1),y=t.useRef(null),g=t.useRef(null),k=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var b=t.useCallback((function(e){var n=e.pulsate,r=e.rippleX,i=e.rippleY,a=e.rippleSize,s=e.cb;l((function(e){return[].concat(_t(e),[t.createElement(Ki,{key:h.current,classes:o,timeout:550,pulsate:n,rippleX:r,rippleY:i,rippleSize:a})])})),h.current+=1,f.current=s}),[o]),_=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,o=void 0!==r&&r,a=t.center,s=void 0===a?i||t.pulsate:a,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&p.current)p.current=!1;else{"touchstart"===e.type&&(p.current=!0);var l,h,f,d=c?null:k.current,v=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(v.width/2),h=Math.round(v.height/2);else{var m=e.touches?e.touches[0]:e,_=m.clientX,w=m.clientY;l=Math.round(_-v.left),h=Math.round(w-v.top)}if(s)(f=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2===0&&(f+=1);else{var x=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,S=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(x,2)+Math.pow(S,2))}e.touches?null===g.current&&(g.current=function(){b({pulsate:o,rippleX:l,rippleY:h,rippleSize:f,cb:n})},y.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):b({pulsate:o,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[i,b]),w=t.useCallback((function(){_({},{pulsate:!0})}),[_]),x=t.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===e.type&&g.current)return e.persist(),g.current(),g.current=null,void(y.current=setTimeout((function(){x(e,t)})));g.current=null,l((function(e){return e.length>0?e.slice(1):e})),f.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:w,start:_,stop:x}}),[w,_,x]),t.createElement("span",d({className:m(o.root,a),ref:k},s),t.createElement(Wi,{component:null,exit:!0},c))})),Qi=Ur((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(t.memo(Gi)),Yi=t.forwardRef((function(e,n){var i=e.action,o=e.buttonRef,a=e.centerRipple,s=void 0!==a&&a,u=e.children,c=e.classes,l=e.className,h=e.component,f=void 0===h?"button":h,p=e.disabled,y=void 0!==p&&p,g=e.disableRipple,k=void 0!==g&&g,b=e.disableTouchRipple,_=void 0!==b&&b,w=e.focusRipple,x=void 0!==w&&w,S=e.focusVisibleClassName,T=e.onBlur,E=e.onClick,C=e.onFocus,I=e.onFocusVisible,R=e.onKeyDown,N=e.onKeyUp,P=e.onMouseDown,A=e.onMouseLeave,O=e.onMouseUp,D=e.onTouchEnd,L=e.onTouchMove,M=e.onTouchStart,F=e.onDragLeave,U=e.tabIndex,j=void 0===U?0:U,q=e.TouchRippleProps,V=e.type,B=void 0===V?"button":V,z=v(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),W=t.useRef(null);var H=t.useRef(null),K=t.useState(!1),G=K[0],Q=K[1];y&&G&&Q(!1);var Y=Fi(),J=Y.isFocusVisible,$=Y.onBlurVisible,X=Y.ref;function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return ti((function(r){return t&&t(r),!n&&H.current&&H.current[e](r),!0}))}t.useImperativeHandle(i,(function(){return{focusVisible:function(){Q(!0),W.current.focus()}}}),[]),t.useEffect((function(){G&&x&&!k&&H.current.pulsate()}),[k,x,G]);var ee=Z("start",P),te=Z("stop",F),ne=Z("stop",O),re=Z("stop",(function(e){G&&e.preventDefault(),A&&A(e)})),ie=Z("start",M),oe=Z("stop",D),ae=Z("stop",L),se=Z("stop",(function(e){G&&($(e),Q(!1)),T&&T(e)}),!1),ue=ti((function(e){W.current||(W.current=e.currentTarget),J(e)&&(Q(!0),I&&I(e)),C&&C(e)})),ce=function(){var e=r.findDOMNode(W.current);return f&&"button"!==f&&!("A"===e.tagName&&e.href)},le=t.useRef(!1),he=ti((function(e){x&&!le.current&&G&&H.current&&" "===e.key&&(le.current=!0,e.persist(),H.current.stop(e,(function(){H.current.start(e)}))),e.target===e.currentTarget&&ce()&&" "===e.key&&e.preventDefault(),R&&R(e),e.target===e.currentTarget&&ce()&&"Enter"===e.key&&!y&&(e.preventDefault(),E&&E(e))})),fe=ti((function(e){x&&" "===e.key&&H.current&&G&&!e.defaultPrevented&&(le.current=!1,e.persist(),H.current.stop(e,(function(){H.current.pulsate(e)}))),N&&N(e),E&&e.target===e.currentTarget&&ce()&&" "===e.key&&!e.defaultPrevented&&E(e)})),de=f;"button"===de&&z.href&&(de="a");var pe={};"button"===de?(pe.type=B,pe.disabled=y):("a"===de&&z.href||(pe.role="button"),pe["aria-disabled"]=y);var ve=Jr(o,n),ye=Jr(X,W),me=Jr(ve,ye),ge=t.useState(!1),ke=ge[0],be=ge[1];t.useEffect((function(){be(!0)}),[]);var _e=ke&&!k&&!y;return t.createElement(de,d({className:m(c.root,l,G&&[c.focusVisible,S],y&&c.disabled),onBlur:se,onClick:E,onFocus:ue,onKeyDown:he,onKeyUp:fe,onMouseDown:ee,onMouseLeave:re,onMouseUp:ne,onDragLeave:te,onTouchEnd:oe,onTouchMove:ae,onTouchStart:ie,ref:me,tabIndex:y?-1:j},pe,z),u,_e?t.createElement(Qi,d({ref:H,center:s},q)):null)})),Ji=Ur({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(Yi),$i=t.forwardRef((function(e,n){var r=e.children,i=e.classes,o=e.className,a=e.color,s=void 0===a?"default":a,u=e.component,c=void 0===u?"button":u,l=e.disabled,h=void 0!==l&&l,f=e.disableElevation,p=void 0!==f&&f,y=e.disableFocusRipple,g=void 0!==y&&y,k=e.endIcon,b=e.focusVisibleClassName,_=e.fullWidth,w=void 0!==_&&_,x=e.size,S=void 0===x?"medium":x,T=e.startIcon,E=e.type,C=void 0===E?"button":E,I=e.variant,R=void 0===I?"text":I,N=v(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),P=T&&t.createElement("span",{className:m(i.startIcon,i["iconSize".concat(jr(S))])},T),A=k&&t.createElement("span",{className:m(i.endIcon,i["iconSize".concat(jr(S))])},k);return t.createElement(Ji,d({className:m(i.root,i[R],o,"inherit"===s?i.colorInherit:"default"!==s&&i["".concat(R).concat(jr(s))],"medium"!==S&&[i["".concat(R,"Size").concat(jr(S))],i["size".concat(jr(S))]],p&&i.disableElevation,h&&i.disabled,w&&i.fullWidth),component:c,disabled:h,focusRipple:!g,focusVisibleClassName:m(i.focusVisible,b),ref:n,type:C},N),t.createElement("span",{className:i.label},P,r,A))})),Xi=Ur((function(e){return{root:d({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:ir(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:ir(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:ir(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(ir(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:ir(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(ir(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:ir(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})($i);function Zi(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function eo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function to(e){return to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},to(e)}function no(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ro(e,t){if(t&&("object"===In(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function io(e){var t=no();return function(){var n,r=to(e);if(t){var i=to(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ro(this,n)}}function oo(e,t,n){return oo=no()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&S(i,n.prototype),i},oo.apply(null,arguments)}function ao(e){var t="function"===typeof Map?new Map:void 0;return ao=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return oo(e,arguments,to(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),S(n,e)},ao(e)}var so=!1,uo=!1,co="${JSCORE_VERSION}",lo=function(e,t){if(!e)throw ho(t)},ho=function(e){return new Error("Firebase Database ("+co+") INTERNAL ASSERT FAILED: "+e)},fo=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},po={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fo(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},vo=function(e){var t=fo(e);return po.encodeByteArray(t,!0)},yo=function(e){return vo(e).replace(/\./g,"")},mo=function(e){try{return po.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function go(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&ko(n)&&(e[n]=go(e[n],t[n]));return e}function ko(e){return"__proto__"!==e}var bo=function(){function e(){var t=this;ni(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return x(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function _o(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yo(JSON.stringify({alg:"none",type:"JWT"})),yo(JSON.stringify(o)),""].join(".")}function wo(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function xo(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wo())}function So(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function To(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Eo(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Co(){var e=wo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Io(){return!0===so||!0===uo}function Ro(){return"object"===typeof indexedDB}var No=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(E(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(E(o),Po.prototype.create),o}return x(n)}(ao(Error)),Po=function(){function e(t,n,r){ni(this,e),this.service=t,this.serviceName=n,this.errors=r}return x(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ao(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),a=new No(n,o,t);return a}}]),e}();function Ao(e,t){return e.replace(Oo,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Oo=/\{\$([^}]+)}/g;function Do(e){return JSON.parse(e)}function Lo(e){return JSON.stringify(e)}var Mo=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=Do(mo(o[0])||""),n=Do(mo(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};function Fo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Uo(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function jo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qo(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Vo(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(Bo(s)&&Bo(u)){if(!Vo(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Bo(e){return null!==e&&"object"===typeof e}function zo(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Wo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ho(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ko=function(){function e(){ni(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return x(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=n[o-3]^n[o-8]^n[o-14]^n[o-16];n[o]=4294967295&(a<<1|a>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}]),e}();function Go(e,t){var n=new Qo(e,t);return n.subscribe.bind(n)}var Qo=function(){function e(t,n){var r=this;ni(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return x(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Zi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Yo),void 0===r.error&&(r.error=Yo),void 0===r.complete&&(r.complete=Yo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Yo(){}var Jo=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function $o(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Xo(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error($o(e,t)+"must be a valid function.")}function Zo(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error($o(e,t)+"must be a valid context object.")}var ea=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ta(e){return e&&e._delegate?e._delegate:e}var na=function(){function e(t,n,r){ni(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return x(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ra="[DEFAULT]",ia=function(){function e(t,n){ni(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return x(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new bo;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch(u){}var t,n=Zi(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:a});o.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=o(h.mark((function e(){var t;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(_t(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),_t(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=Zi(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(o)}}catch(f){a.e(f)}finally{a.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Zi(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(pM){}}}catch(a){i.e(a)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ra?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(pM){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra;return this.component?this.component.multipleInstances?e:ra:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var oa,aa,sa=function(){function e(t){ni(this,e),this.name=t,this.providers=new Map}return x(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ia(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ua=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(aa||(aa={}));var ca,la,ha={debug:aa.DEBUG,verbose:aa.VERBOSE,info:aa.INFO,warn:aa.WARN,error:aa.ERROR,silent:aa.SILENT},fa=aa.INFO,da=(zn(oa={},aa.DEBUG,"log"),zn(oa,aa.VERBOSE,"log"),zn(oa,aa.INFO,"info"),zn(oa,aa.WARN,"warn"),zn(oa,aa.ERROR,"error"),oa),pa=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=da[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},va=function(){function e(t){ni(this,e),this.name=t,this._logLevel=fa,this._logHandler=pa,this._userLogHandler=null,ua.push(this)}return x(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in aa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ha[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,aa.DEBUG].concat(t)),this._logHandler.apply(this,[this,aa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,aa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,aa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,aa.INFO].concat(t)),this._logHandler.apply(this,[this,aa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,aa.WARN].concat(t)),this._logHandler.apply(this,[this,aa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,aa.ERROR].concat(t)),this._logHandler.apply(this,[this,aa.ERROR].concat(t))}}]),e}();var ya=function(){function e(t){ni(this,e),this.container=t}return x(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ma="@firebase/app",ga="0.7.15",ka=new va("@firebase/app"),ba="[DEFAULT]",_a=(zn(ca={},ma,"fire-core"),zn(ca,"@firebase/app-compat","fire-core-compat"),zn(ca,"@firebase/analytics","fire-analytics"),zn(ca,"@firebase/analytics-compat","fire-analytics-compat"),zn(ca,"@firebase/app-check","fire-app-check"),zn(ca,"@firebase/app-check-compat","fire-app-check-compat"),zn(ca,"@firebase/auth","fire-auth"),zn(ca,"@firebase/auth-compat","fire-auth-compat"),zn(ca,"@firebase/database","fire-rtdb"),zn(ca,"@firebase/database-compat","fire-rtdb-compat"),zn(ca,"@firebase/functions","fire-fn"),zn(ca,"@firebase/functions-compat","fire-fn-compat"),zn(ca,"@firebase/installations","fire-iid"),zn(ca,"@firebase/installations-compat","fire-iid-compat"),zn(ca,"@firebase/messaging","fire-fcm"),zn(ca,"@firebase/messaging-compat","fire-fcm-compat"),zn(ca,"@firebase/performance","fire-perf"),zn(ca,"@firebase/performance-compat","fire-perf-compat"),zn(ca,"@firebase/remote-config","fire-rc"),zn(ca,"@firebase/remote-config-compat","fire-rc-compat"),zn(ca,"@firebase/storage","fire-gcs"),zn(ca,"@firebase/storage-compat","fire-gcs-compat"),zn(ca,"@firebase/firestore","fire-fst"),zn(ca,"@firebase/firestore-compat","fire-fst-compat"),zn(ca,"fire-js","fire-js"),zn(ca,"firebase","fire-js-all"),ca),wa=new Map,xa=new Map;function Sa(e,t){try{e.container.addComponent(t)}catch(n){ka.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ta(e,t){e.container.addOrOverwriteComponent(t)}function Ea(e){var t=e.name;if(xa.has(t))return ka.debug("There were multiple attempts to register component ".concat(t,".")),!1;xa.set(t,e);var n,r=Zi(wa.values());try{for(r.s();!(n=r.n()).done;){Sa(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ca(e,t){return e.container.getProvider(t)}function Ia(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ba;Ca(e,t).clearInstance(n)}function Ra(){xa.clear()}var Na,Pa,Aa=(zn(la={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),zn(la,"bad-app-name","Illegal App name: '{$appName}"),zn(la,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),zn(la,"app-deleted","Firebase App named '{$appName}' already deleted"),zn(la,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),zn(la,"invalid-log-argument","First argument to `onLog` must be null or a function."),la),Oa=new Po("app","Firebase",Aa),Da=function(){function e(t,n,r){var i=this;ni(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new na("app",(function(){return i}),"PUBLIC"))}return x(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}]),e}(),La="9.6.5";function Ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ba,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Oa.create("bad-app-name",{appName:String(i)});var o=wa.get(i);if(o){if(Vo(e,o.options)&&Vo(r,o.config))return o;throw Oa.create("duplicate-app",{appName:i})}var a,s=new sa(i),u=Zi(xa.values());try{for(u.s();!(a=u.n()).done;){var c=a.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Da(e,r,s);return wa.set(i,l),l}function Fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=wa.get(e);if(!t)throw Oa.create("no-app",{appName:e});return t}function Ua(){return Array.from(wa.values())}function ja(e){return qa.apply(this,arguments)}function qa(){return(qa=o(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!wa.has(n)){e.next=6;break}return wa.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t,n){var r,i=null!==(r=_a[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ka.warn(s.join(" "))}Ea(new na("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ba(e,t){if(null!==e&&"function"!==typeof e)throw Oa.create("invalid-log-argument");!function(e,t){var n,r=Zi(ua);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ha[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:aa[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(e,t)}function za(e){var t;t=e,ua.forEach((function(e){e.setLogLevel(t)}))}Na="",Ea(new na("platform-logger",(function(e){return new ya(e)}),"PRIVATE")),Va(ma,ga,Na),Va(ma,ga,"esm2017"),Va("fire-js","");var Wa=function(){function e(t,n){var r=this;ni(this,e),this._delegate=t,this.firebase=n,Sa(t,new na("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return x(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ja(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ba;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ba;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Sa(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ta(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ha=(zn(Pa={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),zn(Pa,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Pa),Ka=new Po("app-compat","Firebase",Ha);var Ga=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ma(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Fo(n,i.name))return n[i.name];var o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Va,setLogLevel:za,onLog:Ba,apps:null,SDK_VERSION:La,INTERNAL:{registerComponent:function(e){var n=e.name,o=n.replace("-compat","");if(Ea(e)&&"PUBLIC"===e.type){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Ka.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&go(a,e.serviceProps),r[o]=a,t.prototype[o]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Fo(n,e=e||ba))throw Ka.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Wa);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){go(n,e)},createSubscribe:Go,ErrorFactory:Po,deepExtend:go}),n}(),Qa=new va("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Qa.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ya=self.firebase.SDK_VERSION;Ya&&Ya.indexOf("LITE")>=0&&Qa.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ja=Ga;!function(e){Va("@firebase/app-compat","0.1.16",e)}();function $a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=to(e)););return e}function Xa(){return Xa="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=$a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xa.apply(this,arguments)}Ja.registerVersion("firebase","9.6.5","app-compat");function Za(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var es;Object.create;var ts="facebook.com",ns="github.com",rs="google.com",is="password",os="twitter.com",as="EMAIL_SIGNIN",ss="PASSWORD_RESET",us="RECOVER_EMAIL",cs="REVERT_SECOND_FACTOR_ADDITION",ls="VERIFY_AND_CHANGE_EMAIL",hs="VERIFY_EMAIL";function fs(){return zn({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ds=function(){var e;return zn(e={},"admin-restricted-operation","This operation is restricted to administrators only."),zn(e,"argument-error",""),zn(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),zn(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),zn(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),zn(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),zn(e,"cordova-not-ready","Cordova framework is not ready."),zn(e,"cors-unsupported","This browser is not supported."),zn(e,"credential-already-in-use","This credential is already associated with a different user account."),zn(e,"custom-token-mismatch","The custom token corresponds to a different audience."),zn(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),zn(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),zn(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),zn(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),zn(e,"email-already-in-use","The email address is already in use by another account."),zn(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),zn(e,"expired-action-code","The action code has expired."),zn(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),zn(e,"internal-error","An internal AuthError has occurred."),zn(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),zn(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),zn(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),zn(e,"invalid-auth-event","An internal AuthError has occurred."),zn(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),zn(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),zn(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),zn(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),zn(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),zn(e,"invalid-email","The email address is badly formatted."),zn(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),zn(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),zn(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),zn(e,"invalid-credential","The supplied auth credential is malformed or has expired."),zn(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),zn(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),zn(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),zn(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),zn(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),zn(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),zn(e,"wrong-password","The password is invalid or the user does not have a password."),zn(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),zn(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),zn(e,"invalid-provider-id","The specified provider ID is invalid."),zn(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),zn(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),zn(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),zn(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),zn(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),zn(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),zn(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),zn(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),zn(e,"missing-continue-uri","A continue URL must be provided in the request."),zn(e,"missing-iframe-start","An internal AuthError has occurred."),zn(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),zn(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),zn(e,"missing-multi-factor-info","No second factor identifier is provided."),zn(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),zn(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),zn(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),zn(e,"app-deleted","This instance of FirebaseApp has been deleted."),zn(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),zn(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),zn(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),zn(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),zn(e,"no-auth-event","An internal AuthError has occurred."),zn(e,"no-such-provider","User was not linked to an account with the given provider."),zn(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),zn(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),zn(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),zn(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),zn(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),zn(e,"provider-already-linked","User can only be linked to one identity for the given provider."),zn(e,"quota-exceeded","The project's quota for this operation has been exceeded."),zn(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),zn(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),zn(e,"rejected-credential","The request contains malformed or mismatching credentials."),zn(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),zn(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),zn(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),zn(e,"timeout","The operation has timed out."),zn(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),zn(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),zn(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),zn(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),zn(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),zn(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),zn(e,"unverified-email","The operation requires a verified email."),zn(e,"user-cancelled","The user did not grant your application the permissions it requested."),zn(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),zn(e,"user-disabled","The user account has been disabled by an administrator."),zn(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),zn(e,"user-signed-out",""),zn(e,"weak-password","The password must be 6 characters long or more."),zn(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),zn(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ps=fs,vs=new Po("auth","Firebase",fs()),ys=new va("@firebase/auth");function ms(e){if(ys.logLevel<=aa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ys.error.apply(ys,["Auth (".concat(La,"): ").concat(e)].concat(n))}}function gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ws.apply(void 0,[e].concat(n))}function ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ws.apply(void 0,[e].concat(n))}function bs(e,t,n){var r=Object.assign(Object.assign({},ps()),zn({},t,n));return new Po("auth","Firebase",r).create(t,{appName:e.name})}function _s(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gs(e,"argument-error"),bs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ws(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,o=n[0],a=_t(n.slice(1));return a[0]&&(a[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(_t(a)))}return vs.create.apply(vs,[e].concat(n))}function xs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ws.apply(void 0,[t].concat(r))}}function Ss(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ms(t),new Error(t)}function Ts(e,t){e||Ss(t)}var Es=new Map;function Cs(e){Ts(e instanceof Function,"Expected a class definition");var t=Es.get(e);return t?(Ts(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Es.set(e,t),t)}function Is(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Rs(){return"http:"===Ns()||"https:"===Ns()}function Ns(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ps=function(){function e(t,n){ni(this,e),this.shortDelay=t,this.longDelay=n,Ts(n>t,"Short delay should be less than long delay!"),this.isMobile=xo()||Eo()}return x(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Rs()||To()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function As(e,t){Ts(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Os=function(){function e(){ni(this,e)}return x(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ds=(zn(es={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),zn(es,"MISSING_CUSTOM_TOKEN","internal-error"),zn(es,"INVALID_IDENTIFIER","invalid-email"),zn(es,"MISSING_CONTINUE_URI","internal-error"),zn(es,"INVALID_PASSWORD","wrong-password"),zn(es,"MISSING_PASSWORD","internal-error"),zn(es,"EMAIL_EXISTS","email-already-in-use"),zn(es,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),zn(es,"INVALID_IDP_RESPONSE","invalid-credential"),zn(es,"INVALID_PENDING_TOKEN","invalid-credential"),zn(es,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),zn(es,"MISSING_REQ_TYPE","internal-error"),zn(es,"EMAIL_NOT_FOUND","user-not-found"),zn(es,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),zn(es,"EXPIRED_OOB_CODE","expired-action-code"),zn(es,"INVALID_OOB_CODE","invalid-action-code"),zn(es,"MISSING_OOB_CODE","internal-error"),zn(es,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),zn(es,"INVALID_ID_TOKEN","invalid-user-token"),zn(es,"TOKEN_EXPIRED","user-token-expired"),zn(es,"USER_NOT_FOUND","user-token-expired"),zn(es,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),zn(es,"INVALID_CODE","invalid-verification-code"),zn(es,"INVALID_SESSION_INFO","invalid-verification-id"),zn(es,"INVALID_TEMPORARY_PROOF","invalid-credential"),zn(es,"MISSING_SESSION_INFO","missing-verification-id"),zn(es,"SESSION_EXPIRED","code-expired"),zn(es,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),zn(es,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),zn(es,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),zn(es,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),zn(es,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),zn(es,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),zn(es,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),zn(es,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),zn(es,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),zn(es,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),zn(es,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),es),Ls=new Ps(3e4,6e4);function Ms(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Fs(e,t,n,r){return Us.apply(this,arguments)}function Us(){return Us=o(f().mark((function e(t,n,r,i){var a,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",js(t,a,o(f().mark((function e(){var o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},a={},i&&("GET"===n?a=i:o={body:JSON.stringify(i)}),s=zo(Object.assign({key:t.config.apiKey},a)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Os.fetch()(zs(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Us.apply(this,arguments)}function js(e,t,n){return qs.apply(this,arguments)}function qs(){return qs=o(f().mark((function e(t,n,r){var i,o,a,s,u,c,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ds),n),e.prev=2,o=new Ws(t),e.next=6,Promise.race([r(),o.promise]);case 6:return a=e.sent,o.clearNetworkTimeout(),e.next=10,a.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Hs(t,"account-exists-with-different-credential",s);case 13:if(!a.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=a.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Hs(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw Hs(t,"email-already-in-use",s);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw bs(t,v,p);case 30:gs(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof No)){e.next=37;break}throw e.t0;case 37:gs(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),qs.apply(this,arguments)}function Vs(e,t,n,r){return Bs.apply(this,arguments)}function Bs(){return Bs=o(f().mark((function e(t,n,r,i){var o,a,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Fs(t,n,r,i,o);case 3:return"mfaPendingCredential"in(a=e.sent)&&gs(t,"multi-factor-auth-required",{_serverResponse:a}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}function zs(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?As(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ws=function(){function e(t){var n=this;ni(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ks(n.auth,"network-request-failed"))}),Ls.get())}))}return x(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Hs(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ks(e,t,r);return i.customData._tokenResponse=n,i}function Ks(e,t){return Gs.apply(this,arguments)}function Gs(){return Gs=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Qs(e,t){return Ys.apply(this,arguments)}function Ys(){return Ys=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Js(e,t){return $s.apply(this,arguments)}function $s(){return $s=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Xs(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Zs(){return Zs=o(f().mark((function e(t){var n,r,i,o,a,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ta(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,xs((o=tu(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"===typeof o.firebase?o.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:Xs(eu(o.auth_time)),issuedAtTime:Xs(eu(o.iat)),expirationTime:Xs(eu(o.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function eu(e){return 1e3*Number(e)}function tu(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ms("JWT malformed, contained fewer than 3 sections"),null;try{var o=mo(r);return o?JSON.parse(o):(ms("Failed to decode base64 JWT payload"),null)}catch(a){return ms("Caught error parsing JWT payload as JSON",a),null}}function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=o(f().mark((function e(t,n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof No&&iu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ru.apply(this,arguments)}function iu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ou=function(){function e(t){ni(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return x(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),au=function(){function e(t,n){ni(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return x(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Xs(this.lastLoginAt),this.creationTime=Xs(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function su(e){return uu.apply(this,arguments)}function uu(){return uu=o(f().mark((function e(t){var n,r,i,o,a,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,nu(t,Js(r,{idToken:i}));case 6:xs(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),a=o.users[0],t._notifyReloadListener(a),s=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?hu(a.providerUserInfo):[],u=lu(t.providerData,s),c=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new au(a.createdAt,a.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function cu(){return(cu=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ta(t),e.next=3,su(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(_t(n),_t(t))}function hu(e){return e.map((function(e){var t=e.providerId,n=Za(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function fu(e,t){return du.apply(this,arguments)}function du(){return du=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,js(t,{},o(f().mark((function e(){var r,i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,a=i.apiKey,s=zs(t,o,"/v1/token","key=".concat(a)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Os.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}var pu=function(){function e(){ni(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return x(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){xs(e.idToken,"internal-error"),xs("undefined"!==typeof e.idToken,"internal-error"),xs("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=tu(e);return xs(t,"internal-error"),xs("undefined"!==typeof t.exp,"internal-error"),xs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=o(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],xs(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ss("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new e;return r&&(xs("string"===typeof r,"internal-error",{appName:t}),a.refreshToken=r),i&&(xs("string"===typeof i,"internal-error",{appName:t}),a.accessToken=i),o&&(xs("number"===typeof o,"internal-error",{appName:t}),a.expirationTime=o),a}}]),e}();function vu(e,t){xs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var yu=function(){function e(t){ni(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=Za(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ou(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.metadata=new au(o.createdAt||void 0,o.lastLoginAt||void 0)}return x(e,[{key:"getIdToken",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(xs(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Zs.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return cu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(xs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){xs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=o(f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,su(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,nu(this,Ks(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,o,a,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(a=n.photoURL)&&void 0!==a?a:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,_=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;xs(k&&x,t,"internal-error");var S=pu.fromJSON(this.name,x);xs("string"===typeof k,t,"internal-error"),vu(h,t.name),vu(f,t.name),xs("boolean"===typeof b,t,"internal-error"),xs("boolean"===typeof _,t,"internal-error"),vu(d,t.name),vu(p,t.name),vu(v,t.name),vu(y,t.name),vu(m,t.name),vu(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=o(f().mark((function t(n,r){var i,o,a,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new pu).updateFromServerResponse(r),a=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,su(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),mu=function(){function e(){ni(this,e),this.type="NONE",this.storage={}}return x(e,[{key:"_isAvailable",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();mu.type="NONE";var gu=mu;function ku(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var bu=function(){function e(t,n,r){ni(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=ku(this.userKey,o.apiKey,a),this.fullPersistenceKey=ku("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return x(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?yu._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=o(f().mark((function t(n,r){var i,a,s,u,c,l,h,d,p,v,y,m=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Cs(gu),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),s=a[0]||Cs(gu),u=ku(i,n.config.apiKey,n.name),c=null,l=Zi(r),t.prev=10,l.s();case 12:if((h=l.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(u);case 17:if(!(p=t.sent)){t.next=23;break}return v=yu._fromJSON(n,p),d!==s&&(c=v),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(y=a.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=y[0],!c){t.next=44;break}return t.next=44,s._set(u,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function _u(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cu(t))return"Blackberry";if(Iu(t))return"Webos";if(xu(t))return"Safari";if((t.includes("chrome/")||Su(t))&&!t.includes("edge/"))return"Chrome";if(Eu(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/firefox\//i.test(e)}function xu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Su(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/crios\//i.test(e)}function Tu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/iemobile/i.test(e)}function Eu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/android/i.test(e)}function Cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/blackberry/i.test(e)}function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/webos/i.test(e)}function Ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/iphone|ipad|ipod/i.test(e)}function Nu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return Ru(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Pu(){return Co()&&10===document.documentMode}function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return Ru(e)||Eu(e)||Iu(e)||Cu(e)||/windows phone/i.test(e)||Tu(e)}function Ou(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_u(wo());break;case"Worker":t="".concat(_u(wo()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(La,"/").concat(r)}var Du=function(){function e(t,n){ni(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mu(this),this.idTokenSubscription=new Mu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return x(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(o(f().mark((function r(){var i,o;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,bu.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=o(f().mark((function e(t){var n,r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:a=e.sent,i&&i!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return xs(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ta(t):null)&&xs(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=o(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&xs(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Cs(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Po("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return xs(n=t&&Cs(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,bu.create(this,[Cs(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=o(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"===typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return xs(a,this,"internal-error"),a.then((function(){return o(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return xs(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ou(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=zn({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lu(e){return ta(e)}var Mu=function(){function e(t){var n=this;ni(this,e),this.auth=t,this.observer=null,this.addObserver=Go((function(e){return n.observer=e}))}return x(e,[{key:"next",get:function(){return xs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Fu(e,t,n){var r=Lu(e);xs(r._canInitEmulator,r,"emulator-config-failed"),xs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Uu(t),a=function(e){var t=Uu(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:ju(r.substr(o.length+1))}}var a=l(r.split(":"),2);return{host:a[0],port:ju(a[1])}}(t),s=a.host,u=a.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Uu(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ju(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var qu=function(){function e(t,n){ni(this,e),this.providerId=t,this.signInMethod=n}return x(e,[{key:"toJSON",value:function(){return Ss("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ss("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ss("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ss("not implemented")}}]),e}();function Vu(e,t){return Bu.apply(this,arguments)}function Bu(){return Bu=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:resetPassword",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function zu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:update",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPassword",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Yu(e,t){return Ju.apply(this,arguments)}function Ju(){return Ju=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:sendOobCode",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function $u(e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Zu(e,t){return ec.apply(this,arguments)}function ec(){return ec=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)}))),ec.apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return nc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)}))),nc.apply(this,arguments)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return ic=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yu(t,n));case 1:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function oc(e,t){return ac.apply(this,arguments)}function ac(){return ac=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function sc(e,t){return uc.apply(this,arguments)}function uc(){return uc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithEmailLink",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}var cc=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ni(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=a,o}return x(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gu(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",oc(t,{email:this._email,oobCode:this._password}));case 5:gs(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",zu(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",sc(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:gs(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(qu);function lc(e,t){return hc.apply(this,arguments)}function hc(){return hc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithIdp",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}var fc=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return x(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return lc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zo(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gs("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=Za(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(qu);function dc(e,t){return pc.apply(this,arguments)}function pc(){return pc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:sendVerificationCode",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(){return vc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function yc(){return yc=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ms(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Hs(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}var mc=zn({},"USER_NOT_FOUND","user-not-found");function gc(){return gc=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ms(t,r),mc));case 2:case"end":return e.stop()}}),e)}))),gc.apply(this,arguments)}var kc=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this,"phone","phone")).params=e,r}return x(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return vc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return yc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return gc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(qu);var bc=function(){function e(t){var n,r,i,o,a,s;ni(this,e);var u=Wo(Ho(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);xs(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(o=u.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=u.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return x(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Wo(Ho(e)).link,n=t?Wo(Ho(t)).deep_link_id:null,r=Wo(Ho(e)).deep_link_id;return(r?Wo(Ho(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(pM){return null}}}]),e}();var _c=function(){function e(){ni(this,e),this.providerId=e.PROVIDER_ID}return x(e,null,[{key:"credential",value:function(e,t){return cc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=bc.parseLink(t);return xs(n,"argument-error"),cc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();_c.PROVIDER_ID="password",_c.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_c.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var wc=function(){function e(t){ni(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return x(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),xc=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.apply(this,arguments)).scopes=[],e}return x(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return _t(this.scopes)}}]),n}(wc),Sc=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return xs(e.idToken||e.accessToken,"argument-error"),fc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return xs("providerId"in t&&"signInMethod"in t,"argument-error"),fc._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,a=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!o&&!r&&!a)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:a})}catch(c){return null}}}]),n}(xc),Tc=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.call(this,"facebook.com")}return x(n,null,[{key:"credential",value:function(e){return fc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pM){return null}}}]),n}(xc);Tc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tc.PROVIDER_ID="facebook.com";var Ec=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return x(n,null,[{key:"credential",value:function(e,t){return fc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(pM){return null}}}]),n}(xc);Ec.GOOGLE_SIGN_IN_METHOD="google.com",Ec.PROVIDER_ID="google.com";var Cc=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.call(this,"github.com")}return x(n,null,[{key:"credential",value:function(e){return fc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pM){return null}}}]),n}(xc);Cc.GITHUB_SIGN_IN_METHOD="github.com",Cc.PROVIDER_ID="github.com";var Ic=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return x(n,[{key:"_getIdTokenResponse",value:function(e){return lc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=t.pendingToken;return r&&i&&o&&r===i?new n(r,o):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qu),Rc=function(e){eo(n,e);var t=io(n);function n(e){return ni(this,n),xs(e.startsWith("saml."),"argument-error"),t.call(this,e)}return x(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ic.fromJSON(e);return xs(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ic._create(r,n)}catch(i){return null}}}]),n}(wc),Nc=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.call(this,"twitter.com")}return x(n,null,[{key:"credential",value:function(e,t){return fc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(pM){return null}}}]),n}(xc);function Pc(e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signUp",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}Nc.TWITTER_SIGN_IN_METHOD="twitter.com",Nc.PROVIDER_ID="twitter.com";var Oc=function(){function e(t){ni(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return x(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=o(f().mark((function t(n,r,i){var o,a,s,u,c=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]&&c[3],t.next=3,yu._fromIdTokenResponse(n,i,o);case 3:return a=t.sent,s=Dc(i),u=new e({user:a,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=o(f().mark((function t(n,r,i){var o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Dc(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Dc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Lc(){return Lc=o(f().mark((function e(t){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lu(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Oc({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Pc(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Oc._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}var Mc=function(e){eo(n,e);var t=io(n);function n(e,r,i,o){var a,s;return ni(this,n),(a=t.call(this,r.code,r.message)).operationType=i,a.user=o,Object.setPrototypeOf(E(a),n.prototype),a.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},a}return x(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(No);function Fc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Mc._fromErrorAndOperation(e,n,t,r);throw n}))}function Uc(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function jc(e,t){return qc.apply(this,arguments)}function qc(){return qc=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(t),e.next=3,zc(!0,r,n);case 3:return e.t0=Qs,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,a=Uc(o||[]),r.providerData=r.providerData.filter((function(e){return a.has(e.providerId)})),a.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}function Vc(e,t){return Bc.apply(this,arguments)}function Bc(){return Bc=o(f().mark((function e(t,n){var r,i,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=nu,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Oc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Bc.apply(this,arguments)}function zc(e,t,n){return Wc.apply(this,arguments)}function Wc(){return(Wc=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(n);case 2:i=Uc(n.providerData),o=!1===t?"provider-already-linked":"no-such-provider",xs(i.has(r)===t,n.auth,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t){return Kc.apply(this,arguments)}function Kc(){return Kc=o(f().mark((function e(t,n){var r,i,o,a,s,u,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,o="reauthenticate",e.prev=3,e.next=6,nu(t,Fc(i,o,n,t),r);case 6:return xs((a=e.sent).idToken,i,"internal-error"),xs(s=tu(a.idToken),i,"internal-error"),u=s.sub,xs(t.uid===u,i,"user-mismatch"),e.abrupt("return",Oc._forOperation(t,o,a));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&gs(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Kc.apply(this,arguments)}function Gc(e,t){return Qc.apply(this,arguments)}function Qc(){return Qc=o(f().mark((function e(t,n){var r,i,o,a,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Fc(t,i,n);case 4:return o=e.sent,e.next=7,Oc._fromIdTokenResponse(t,i,o);case 7:if(a=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function Yc(e,t){return Jc.apply(this,arguments)}function Jc(){return Jc=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gc(Lu(t),n));case 1:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function $c(e,t){return Xc.apply(this,arguments)}function Xc(){return(Xc=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(t),e.next=3,zc(!1,r,n.providerId);case 3:return e.abrupt("return",Vc(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e,t){return el.apply(this,arguments)}function el(){return(el=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hc(ta(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tl(e,t){return nl.apply(this,arguments)}function nl(){return nl=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(t,"POST","/v1/accounts:signInWithCustomToken",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),nl.apply(this,arguments)}function rl(){return rl=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lu(t),e.next=3,tl(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Oc._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),rl.apply(this,arguments)}var il=function(){function e(t,n){ni(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return x(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ol._fromServerResponse(e,t):gs(e,"internal-error")}}]),e}(),ol=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return x(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(il);function al(e,t,n){var r;xs((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),xs("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(xs(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(xs(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function sl(){return sl=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),o={requestType:"PASSWORD_RESET",email:n},r&&al(i,o,r),e.next=5,Zu(i,o);case 5:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function ul(){return ul=o(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vu(ta(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function cl(){return cl=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu(ta(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function ll(e,t){return hl.apply(this,arguments)}function hl(){return hl=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(t),e.next=3,Vu(r,{oobCode:n});case 3:i=e.sent,xs(o=i.requestType,r,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return xs(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:xs(i.mfaInfo,r,"internal-error");case 13:xs(i.email,r,"internal-error");case 14:return a=null,i.mfaInfo&&(a=il._fromServerResponse(Lu(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:a},operation:o});case 17:case"end":return e.stop()}}),e)}))),hl.apply(this,arguments)}function fl(){return fl=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ll(ta(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}function dl(e,t,n){return pl.apply(this,arguments)}function pl(){return pl=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),e.next=3,Pc(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=e.sent,e.next=6,Oc._fromIdTokenResponse(i,"signIn",o);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),pl.apply(this,arguments)}function vl(){return vl=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),o={requestType:"EMAIL_SIGNIN",email:n},xs(r.handleCodeInApp,i,"argument-error"),r&&al(i,o,r),e.next=6,tc(i,o);case 6:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function yl(){return yl=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),xs((o=_c.credentialWithLink(n,r||Is()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Yc(i,o));case 4:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function ml(e,t){return gl.apply(this,arguments)}function gl(){return gl=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:createAuthUri",Ms(t,n)));case 1:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}function kl(){return kl=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rs()?Is():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ml(ta(t),i);case 4:return o=e.sent,a=o.signinMethods,e.abrupt("return",a||[]);case 7:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}function bl(){return(bl=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_EMAIL",idToken:i},n&&al(r.auth,o,n),e.next=8,$u(r.auth,o);case 8:if(a=e.sent,a.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _l(){return(_l=o(f().mark((function e(t,n,r){var i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),e.next=3,t.getIdToken();case 3:return o=e.sent,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:n},r&&al(i.auth,a,r),e.next=8,rc(i.auth,a);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wl(e,t){return xl.apply(this,arguments)}function xl(){return xl=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}function Sl(){return(Sl=o(f().mark((function e(t,n){var r,i,o,a,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=ta(t),e.next=6,o.getIdToken();case 6:return a=e.sent,s={idToken:a,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,nu(o,wl(o.auth,s));case 10:return u=e.sent,o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null,(c=o.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=o.displayName,c.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(e,t,n){return El.apply(this,arguments)}function El(){return El=o(f().mark((function e(t,n,r){var i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return o=e.sent,a={idToken:o,returnSecureToken:!0},n&&(a.email=n),r&&(a.password=r),e.next=9,nu(t,zu(i,a));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),El.apply(this,arguments)}var Cl=x((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ni(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Il=function(e){eo(n,e);var t=io(n);function n(e,r,i,o){var a;return ni(this,n),(a=t.call(this,e,r,i)).username=o,a}return x(n)}(Cl),Rl=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"facebook.com",r)}return x(n)}(Cl),Nl=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return x(n)}(Il),Pl=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"google.com",r)}return x(n)}(Cl),Al=function(e){eo(n,e);var t=io(n);function n(e,r,i){return ni(this,n),t.call(this,e,"twitter.com",r,i)}return x(n)}(Il);function Ol(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var a=null===(n=null===(t=tu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(a)return new Cl(o,"anonymous"!==a&&"custom"!==a?a:null)}if(!r)return null;switch(r){case"facebook.com":return new Rl(o,i);case"github.com":return new Nl(o,i);case"google.com":return new Pl(o,i);case"twitter.com":return new Al(o,i,e.screenName||null);case"custom":case"anonymous":return new Cl(o,null);default:return new Cl(o,r,i)}}(n)}var Dl=function(){function e(t,n){ni(this,e),this.type=t,this.credential=n}return x(e,[{key:"toJSON",value:function(){return{multiFactorSession:zn({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ll=function(){function e(t,n,r){ni(this,e),this.session=t,this.hints=n,this.signInResolver=r}return x(e,[{key:"resolveSignIn",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Lu(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return il._fromServerResponse(r,e)}));xs(i.mfaPendingCredential,r,"internal-error");var s=Dl._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,a,function(){var e=o(f().mark((function e(t){var o,a,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,a=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Oc._fromIdTokenResponse(r,n.operationType,a);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return xs(n.user,r,"internal-error"),e.abrupt("return",Oc._forOperation(n.user,n.operationType,a));case 17:gs(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ml(e,t){return Fs(e,"POST","/v2/accounts/mfaEnrollment:start",Ms(e,t))}function Fl(e,t){return Fs(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ms(e,t))}var Ul=function(){function e(t){var n=this;ni(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return il._fromServerResponse(t.auth,e)})))}))}return x(e,[{key:"getSession",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Dl,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,nu(this.user,r._process(this.user.auth,i,n));case 6:return o=e.sent,e.next=9,this.user._updateTokensIfNecessary(o);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=o(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,nu(this.user,Fl(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),jl=new WeakMap;var ql="__sak",Vl=function(){function e(t,n){ni(this,e),this.storageRetriever=t,this.type=n}return x(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ql,"1"),this.storage.removeItem(ql),Promise.resolve(!0)):Promise.resolve(!1)}catch(pM){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Bl=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=wo();return xu(e)||Ru(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Au(),e._shouldAllowMigration=!0,e}return x(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);Pu()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=o(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(to(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(to(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(to(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Vl);Bl.type="LOCAL";var zl=Bl,Wl=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return x(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vl);Wl.type="SESSION";var Hl=Wl;function Kl(e){return Promise.all(e.map(function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Gl=function(){function e(t){ni(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return x(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=o(f().mark((function e(t){var n,r,i,a,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,s=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),c=Array.from(u).map(function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Kl(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ql(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gl.receivers=[];var Yl=function(){function e(t){ni(this,e),this.target=t,this.handlers=new Set}return x(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=o(f().mark((function e(t,n){var r,i,o,a,s=this,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ql("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);a={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},s.handlers.add(a),i.port1.addEventListener("message",a.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){a&&s.removeMessageHandler(a)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Jl(){return window}function $l(){return"undefined"!==typeof Jl().WorkerGlobalScope&&"function"===typeof Jl().importScripts}function Xl(){return Zl.apply(this,arguments)}function Zl(){return(Zl=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function eh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var th="firebaseLocalStorageDb",nh="firebaseLocalStorage",rh="fbase_key",ih=function(){function e(t){ni(this,e),this.request=t}return x(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function oh(e,t){return e.transaction([nh],t?"readwrite":"readonly").objectStore(nh)}function ah(){var e=indexedDB.deleteDatabase(th);return new ih(e).toPromise()}function sh(){var e=indexedDB.open(th,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(nh,{keyPath:rh})}catch(r){n(r)}})),e.addEventListener("success",o(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(nh)){n.next=12;break}return r.close(),n.next=5,ah();case 5:return n.t0=t,n.next=8,sh();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function uh(e,t,n){return ch.apply(this,arguments)}function ch(){return ch=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=oh(t,!0).put((zn(i={},rh,n),zn(i,"value",r),i)),e.abrupt("return",new ih(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),ch.apply(this,arguments)}function lh(e,t){return hh.apply(this,arguments)}function hh(){return hh=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oh(t,!1).get(n),e.next=3,new ih(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),hh.apply(this,arguments)}function fh(e,t){var n=oh(e,!0).delete(t);return new ih(n).toPromise()}var dh=function(){function e(){ni(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return x(e,[{key:"_openDb",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,sh();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$l()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=o(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Gl._getInstance($l()?self:null),this.receiver._subscribe("keyChanged",function(){var e=o(f().mark((function e(n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=o(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xl();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Yl(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&eh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,sh();case 5:return t=e.sent,e.next=8,uh(t,ql,"1");case 8:return e.next=10,fh(t,ql);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=o(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return uh(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return lh(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=o(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return fh(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=o(f().mark((function e(){var t,n,r,i,o,a,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=oh(e,!1).getAll();return new ih(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Zi(t);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.fbase_key,u=a.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();dh.type="LOCAL";var ph=dh;function vh(e,t){return Fs(e,"POST","/v2/accounts/mfaSignIn:start",Ms(e,t))}function yh(e){return mh.apply(this,arguments)}function mh(){return mh=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ks("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function kh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var bh=1e12,_h=function(){function e(t){ni(this,e),this.auth=t,this.counter=bh,this._widgets=new Map}return x(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new wh(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||bh;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||bh;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||bh,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),wh=function(){function e(t,n,r){var i=this;ni(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;xs(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return x(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var xh=kh("rcb"),Sh=new Ps(3e4,6e4),Th="https://www.google.com/recaptcha/api.js?",Eh=function(){function e(){ni(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jl().grecaptcha}return x(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return xs(Ch(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Jl().grecaptcha):new Promise((function(r,i){var o=Jl().setTimeout((function(){i(ks(e,"network-request-failed"))}),Sh.get());Jl()[xh]=function(){Jl().clearTimeout(o),delete Jl()[xh];var a=Jl().grecaptcha;if(a){var s=a.render;a.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(a)}else i(ks(e,"internal-error"))},gh("".concat(Th,"?").concat(zo({onload:xh,render:"explicit",hl:n}))).catch((function(){clearTimeout(o),i(ks(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Jl().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ch(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ih=function(){function e(){ni(this,e)}return x(e,[{key:"load",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new _h(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Rh="recaptcha",Nh={theme:"light",type:"image"},Ph=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Nh),r=arguments.length>2?arguments[2]:void 0;ni(this,e),this.parameters=n,this.type=Rh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lu(r),this.isInvisible="invisible"===this.parameters.size,xs("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;xs(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ih:new Eh,this.validateStartingState()}return x(e,[{key:"verify",value:function(){var e=o(f().mark((function e(){var t,n,r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){xs(!this.parameters.sitekey,this.auth,"argument-error"),xs(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xs("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Jl()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){xs(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=o(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xs(Rs()&&!$l(),this.auth,"internal-error"),e.next=3,Ah();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,yh(this.auth);case 8:xs(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return xs(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ah(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Oh=function(){function e(t,n){ni(this,e),this.verificationId=t,this.onConfirmation=n}return x(e,[{key:"confirm",value:function(e){var t=kc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Dh(){return Dh=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),e.next=3,Uh(i,n,ta(r));case 3:return o=e.sent,e.abrupt("return",new Oh(o,(function(e){return Yc(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Dh.apply(this,arguments)}function Lh(e,t,n){return Mh.apply(this,arguments)}function Mh(){return(Mh=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),e.next=3,zc(!1,i,"phone");case 3:return e.next=5,Uh(i.auth,n,ta(r));case 5:return o=e.sent,e.abrupt("return",new Oh(o,(function(e){return $c(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(){return(Fh=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ta(t),e.next=3,Uh(i.auth,n,ta(r));case 3:return o=e.sent,e.abrupt("return",new Oh(o,(function(e){return Zc(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uh(e,t,n){return jh.apply(this,arguments)}function jh(){return jh=o(f().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,xs("string"===typeof o,t,"argument-error"),xs(r.type===Rh,t,"argument-error"),!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=a.session,!("phoneNumber"in a)){e.next=17;break}return xs("enroll"===s.type,t,"internal-error"),e.next=13,Ml(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return xs("signin"===s.type,t,"internal-error"),xs(c=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,vh(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:o}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,dc(t,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),jh.apply(this,arguments)}function qh(){return(qh=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc(ta(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vh=function(){function e(t){ni(this,e),this.providerId=e.PROVIDER_ID,this.auth=Lu(t)}return x(e,[{key:"verifyPhoneNumber",value:function(e,t){return Uh(this.auth,e,ta(t))}}],[{key:"credential",value:function(e,t){return kc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?kc._fromTokenResponse(n,r):null}}]),e}();function Bh(e,t){return t?Cs(t):(xs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vh.PROVIDER_ID="phone",Vh.PHONE_SIGN_IN_METHOD="phone";var zh=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this,"custom","custom")).params=e,r}return x(n,[{key:"_getIdTokenResponse",value:function(e){return lc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return lc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return lc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(qu);function Wh(e){return Gc(e.auth,new zh(e),e.bypassAuthState)}function Hh(e){var t=e.auth,n=e.user;return xs(n,t,"internal-error"),Hc(n,new zh(e),e.bypassAuthState)}function Kh(e){return Gh.apply(this,arguments)}function Gh(){return Gh=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,xs(r=t.user,n,"internal-error"),e.abrupt("return",Vc(r,new zh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}var Qh=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ni(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return x(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=o(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=o(f().mark((function e(t){var n,r,i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,a=t.error,s=t.type,!a){e.next=4;break}return this.reject(a),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wh;case"linkViaPopup":case"linkViaRedirect":return Kh;case"reauthViaPopup":case"reauthViaRedirect":return Hh;default:gs(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Yh=new Ps(2e3,1e4);function Jh(e,t,n){return $h.apply(this,arguments)}function $h(){return $h=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),_s(t,n,wc),o=Bh(i,r),a=new tf(i,"signInViaPopup",n,o),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),$h.apply(this,arguments)}function Xh(){return(Xh=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=ta(t)).auth,n,wc),o=Bh(i.auth,r),a=new tf(i.auth,"reauthViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zh(e,t,n){return ef.apply(this,arguments)}function ef(){return(ef=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=ta(t)).auth,n,wc),o=Bh(i.auth,r),a=new tf(i.auth,"linkViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tf=function(e){eo(n,e);var t=io(n);function n(e,r,i,o,a){var s;return ni(this,n),(s=t.call(this,e,r,o,a)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=E(s),s}return x(n,[{key:"executeNotNull",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return xs(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=o(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ts(1===this.filter.length,"Popup operations only handle one event"),t=Ql(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ks(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ks(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ks(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Yh.get())}()}}]),n}(Qh);tf.currentPopupAction=null;var nf=new Map,rf=function(e){eo(n,e);var t=io(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ni(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return x(n,[{key:"execute",value:function(){var e=o(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=nf.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,of(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Xa(to(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:nf.set(this.auth._key(),t);case 21:return this.bypassAuthState||nf.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=o(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Xa(to(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Xa(to(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Qh);function of(e,t){return af.apply(this,arguments)}function af(){return af=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lf(n),i=cf(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),af.apply(this,arguments)}function sf(e,t){return uf.apply(this,arguments)}function uf(){return uf=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cf(t)._set(lf(n),"true"));case 1:case"end":return e.stop()}}),e)}))),uf.apply(this,arguments)}function cf(e){return Cs(e._redirectPersistence)}function lf(e){return ku("pendingRedirect",e.config.apiKey,e.name)}function hf(e,t,n){return function(e,t,n){return ff.apply(this,arguments)}(e,t,n)}function ff(){return ff=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lu(t),_s(t,n,wc),o=Bh(i,r),e.next=5,sf(o,i);case 5:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),ff.apply(this,arguments)}function df(e,t,n){return function(e,t,n){return pf.apply(this,arguments)}(e,t,n)}function pf(){return(pf=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=ta(t)).auth,n,wc),o=Bh(i.auth,r),e.next=5,sf(o,i.auth);case 5:return e.next=7,_f(i);case 7:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vf(e,t,n){return function(e,t,n){return yf.apply(this,arguments)}(e,t,n)}function yf(){return(yf=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s((i=ta(t)).auth,n,wc),o=Bh(i.auth,r),e.next=5,zc(!1,i,n.providerId);case 5:return e.next=7,sf(o,i.auth);case 7:return e.next=9,_f(i);case 9:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",a));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mf(e,t){return gf.apply(this,arguments)}function gf(){return gf=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu(t)._initializationPromise;case 2:return e.abrupt("return",kf(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),gf.apply(this,arguments)}function kf(e,t){return bf.apply(this,arguments)}function bf(){return bf=o(f().mark((function e(t,n){var r,i,o,a,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Lu(t),o=Bh(i,n),a=new rf(i,o,r),e.next=6,a.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function _f(e){return wf.apply(this,arguments)}function wf(){return(wf=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ql("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xf=function(){function e(t){ni(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return x(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Tf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ks(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Sf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Sf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Tf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ef(e){return Cf.apply(this,arguments)}function Cf(){return Cf=o(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Fs(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}var If=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rf=/^https?/;function Nf(){return Nf=o(f().mark((function e(t){var n,r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ef(t);case 4:n=e.sent,r=n.authorizedDomains,i=Zi(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(a=o.value,e.prev=11,!Pf(a)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:gs(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Nf.apply(this,arguments)}function Pf(e){var t=Is(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!Rf.test(r))return!1;if(If.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var Af=new Ps(3e4,6e4);function Of(){var e=Jl().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=_t(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Df=null;function Lf(e){return Df=Df||function(e){return new Promise((function(t,n){var r,i,o;function a(){Of(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Of(),n(ks(e,"network-request-failed"))},timeout:Af.get()})}if(null===(i=null===(r=Jl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Jl().gapi)||void 0===o?void 0:o.load)){var s=kh("iframefcb");return Jl()[s]=function(){gapi.load?a():n(ks(e,"network-request-failed"))},gh("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}a()}})).catch((function(e){throw Df=null,e}))}(e),Df}var Mf=new Ps(5e3,15e3),Ff={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jf(e){var t=e.config;xs(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?As(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:La},i=Uf.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(zo(r).slice(1))}function qf(e){return Vf.apply(this,arguments)}function Vf(){return Vf=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lf(t);case 2:return n=e.sent,xs(r=Jl().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:jf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ff,dontclear:!0},(function(e){return new Promise(function(){var n=o(f().mark((function n(r,i){var o,a,s;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Jl().clearTimeout(a),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=ks(t,"network-request-failed"),a=Jl().setTimeout((function(){i(o)}),Mf.get()),e.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Vf.apply(this,arguments)}var Bf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zf="_blank",Wf="http://localhost",Hf=function(){function e(t){ni(this,e),this.window=t,this.associatedEvent=null}return x(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Kf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Bf),{width:r.toString(),height:i.toString(),top:o,left:a}),c=wo().toLowerCase();n&&(s=Su(c)?zf:n),wu(c)&&(t=t||Wf,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Nu(c)&&"_self"!==s)return Gf(t||"",s),new Hf(null);var f=window.open(t||"",s,h);xs(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Hf(f)}function Gf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Qf="__/auth/handler",Yf="emulator/auth/handler";function Jf(e,t,n,r,i,o){xs(e.config.authDomain,e,"auth-domain-config-required"),xs(e.config.apiKey,e,"invalid-api-key");var a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:La,eventId:i};if(t instanceof wc){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",jo(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(o||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];a[h]=f}}if(t instanceof xc){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);for(var p=a,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Qf);return As(t,Yf)}(e),"?").concat(zo(p).slice(1))}var $f="webStorageSupport",Xf=function(){function e(){ni(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hl,this._completeRedirectFn=kf}return x(e,[{key:"_openPopup",value:function(){var e=o(f().mark((function e(t,n,r,i){var o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ts(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),a=Jf(t,n,r,Is(),i),e.abrupt("return",Kf(t,a,Ql()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=o(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return o=Jf(t,n,r,Is(),i),Jl().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,o=r.promise;return i?Promise.resolve(i):(Ts(o,"If manager is not set, promise should be"),o)}var a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch((function(){delete t.eventManagers[n]})),a}},{key:"initAndGetManager",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qf(t);case 2:return n=e.sent,r=new xf(t),n.register("authEvent",(function(e){return xs(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($f,{type:$f},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),gs(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Au()||xu()||Ru()}}]),e}(),Zf=Xf,ed=function(){function e(t){ni(this,e),this.factorId=t}return x(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ss("unexpected MultiFactorSessionType")}}}]),e}(),td=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this,"phone")).credential=e,r}return x(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Fs(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ms(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Fs(e,"POST","/v2/accounts/mfaSignIn:finalize",Ms(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ed),nd=function(){function e(){ni(this,e)}return x(e,null,[{key:"assertion",value:function(e){return td._fromCredential(e)}}]),e}();nd.FACTOR_ID="phone";var rd,id="@firebase/auth",od="0.19.7",ad=function(){function e(t){ni(this,e),this.auth=t,this.internalListeners=new Map}return x(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){xs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function sd(){return window}rd="Browser",Ea(new na("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,o=i.apiKey,a=i.authDomain;return function(e){xs(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),xs(!(null===a||void 0===a?void 0:a.includes(":")),"argument-error",{appName:e.name});var t={apiKey:o,authDomain:a,clientPlatform:rd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ou(rd)},r=new Du(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ea(new na("auth-internal",(function(e){return function(e){return new ad(e)}(Lu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Va(id,od,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(rd)),Va(id,od,"esm2017");function ud(e,t,n){return cd.apply(this,arguments)}function cd(){return cd=o(f().mark((function e(t,n,r){var i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=sd(),a=o.BuildInfo,Ts(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,vd(n.sessionId);case 4:return s=e.sent,u={},Ru()?u.ibi=a.packageName:Eu()?u.apn=a.packageName:gs(t,"operation-not-supported-in-this-environment"),a.displayName&&(u.appDisplayName=a.displayName),u.sessionId=s,e.abrupt("return",Jf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}function ld(){return ld=o(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sd(),r=n.BuildInfo,i={},Ru()?i.iosBundleId=r.packageName:Eu()?i.androidPackageName=r.packageName:gs(t,"operation-not-supported-in-this-environment"),e.next=5,Ef(t,i);case 5:case"end":return e.stop()}}),e)}))),ld.apply(this,arguments)}function hd(e){var t=sd().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function fd(e,t,n){return dd.apply(this,arguments)}function dd(){return dd=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sd(),o=i.cordova,a=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(ks(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Eu()&&document.addEventListener("visibilitychange",l,!1),a=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,a(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),dd.apply(this,arguments)}function pd(e){var t,n,r,i,o,a,s,u,c,l,h=sd();xs("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xs("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xs("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xs("function"===typeof(null===(u=null===(s=null===(a=null===h||void 0===h?void 0:h.cordova)||void 0===a?void 0:a.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xs("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function vd(e){return yd.apply(this,arguments)}function yd(){return(yd=o(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=md(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e){if(Ts(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var gd=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return x(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Xa(to(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xf);function kd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Sd(),postBody:null,tenantId:e.tenantId,error:ks(e,"no-auth-event")}}function bd(e,t){return Td()._set(Ed(e),t)}function _d(e){return wd.apply(this,arguments)}function wd(){return wd=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Td()._get(Ed(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Td()._remove(Ed(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function xd(e,t){var n,r,i=function(e){var t=Cd(e),n=t.link?decodeURIComponent(t.link):void 0,r=Cd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Cd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var o=Cd(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(o.firebaseError)):null,s=null===(r=null===(n=null===a||void 0===a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?ks(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Sd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Td(){return Cs(zl)}function Ed(e){return ku("authEvent",e.config.apiKey,e.name)}function Cd(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||bt(t)||u(t)||c();r[0];return Wo(r.slice(1).join("?"))}var Id=function(){function e(){ni(this,e),this._redirectPersistence=Hl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kf}return x(e,[{key:"_initialize",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new gd(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){gs(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=o(f().mark((function e(t,n,r,i){var o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pd(t),e.next=3,this._initialize(t);case 3:return o=e.sent,e.next=6,o.initialized();case 6:return o.resetRedirect(),nf.clear(),e.next=10,this._originValidation(t);case 10:return a=kd(t,r,i),e.next=13,bd(t,a);case 13:return e.next=15,ud(t,a,n);case 15:return s=e.sent,e.next=18,hd(s);case 18:return u=e.sent,e.abrupt("return",fd(t,o,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ld.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=sd(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,s=setTimeout(o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_d(e);case 2:t.onEvent(Nd());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=o(f().mark((function n(r){var i,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,_d(e);case 3:i=n.sent,o=null,i&&(null===r||void 0===r?void 0:r.url)&&(o=xd(i,r.url)),t.onEvent(o||Nd());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var c=i,l="".concat(a.packageName.toLowerCase(),"://");sd().handleOpenURL=function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&u({url:t}),"function"===typeof c)try{c(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Rd=Id;function Nd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ks("no-auth-event")}}function Pd(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ad(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return!("file:"!==Pd()&&"ionic:"!==Pd()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Od(){return Co()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Dd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return/Edge\/\d+/.test(e)}function Ld(){try{var e=self.localStorage,t=Ql();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo();return Od()||Dd(e)}()||Ro()}catch(n){return Md()&&Ro()}return!1}function Md(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Fd(){return("http:"===Pd()||"https:"===Pd()||To()||Ad())&&!(Eo()||So())&&Ld()&&!Md()}function Ud(){return Ad()&&"undefined"!==typeof document}function jd(){return qd.apply(this,arguments)}function qd(){return(qd=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ud()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vd={LOCAL:"local",NONE:"none",SESSION:"session"},Bd=xs,zd="persistence";function Wd(e,t){Bd(Object.values(Vd).includes(t),e,"invalid-persistence-type"),Eo()?Bd(t!==Vd.SESSION,e,"unsupported-persistence-type"):So()?Bd(t===Vd.NONE,e,"unsupported-persistence-type"):Md()?Bd(t===Vd.NONE||t===Vd.LOCAL&&Ro(),e,"unsupported-persistence-type"):Bd(t===Vd.NONE||Ld(),e,"unsupported-persistence-type")}function Hd(e){return Kd.apply(this,arguments)}function Kd(){return Kd=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Gd(),r=ku(zd,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Gd(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Qd=xs,Yd=function(){function e(){ni(this,e),this.browserResolver=Cs(Zf),this.cordovaResolver=Cs(Rd),this.underlyingResolver=null,this._redirectPersistence=Hl,this._completeRedirectFn=kf}return x(e,[{key:"_initialize",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=o(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=o(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ud()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Qd(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jd();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Jd(e){return e.unwrap()}function $d(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new np(e,function(e,t){var n,r=ta(e),i=t;return xs(t.customData.operationType,r,"argument-error"),xs(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ll._fromError(r,i)}(e,t));else if(r){var i=Xd(t),o=t;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function Xd(e){var t=(e instanceof No?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof No)&&"temporaryProof"in t&&"phoneNumber"in t)return Vh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===is)return null;switch(r){case rs:n=Ec;break;case ts:n=Tc;break;case ns:n=Cc;break;case os:n=Nc;break;default:var i=t.oauthIdToken,o=t.oauthAccessToken,a=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return o||a||i||s?s?r.startsWith("saml.")?Ic._create(r,s):fc._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:o}):new Sc(r).credential({idToken:i,accessToken:o,rawNonce:u}):null}return e instanceof No?n.credentialFromError(e):n.credentialFromResult(e)}function Zd(e,t){return t.catch((function(t){throw t instanceof No&&$d(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Xd(t)),additionalUserInfo:Ol(e),user:rp.getOrCreate(r)}}))}function ep(e,t){return tp.apply(this,arguments)}function tp(){return tp=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Zd(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}var np=function(){function e(t,n){ni(this,e),this.resolver=n,this.auth=t.wrapped()}return x(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Zd(Jd(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),rp=function(){function e(t){ni(this,e),this._delegate=t,this.multiFactor=function(e){var t=ta(e);return jl.has(t)||jl.set(t,Ul._fromUser(t)),jl.get(t)}(t)}return x(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zd(this.auth,$c(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ep(this.auth,Lh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zd(this.auth,Zh(this._delegate,t,Yd)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hd(Lu(this.auth));case 2:return e.abrupt("return",vf(this._delegate,t,Yd));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zd(this.auth,Zc(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ep(this.auth,function(e,t,n){return Fh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Zd(this.auth,function(e,t,n){return Xh.apply(this,arguments)}(this._delegate,e,Yd))}},{key:"reauthenticateWithRedirect",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hd(Lu(this.auth));case 2:return e.abrupt("return",df(this._delegate,t,Yd));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return bl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Tl(ta(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Tl(ta(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return qh.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Sl.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return _l.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();rp.USER_MAP=new WeakMap;var ip=xs,op=function(){function e(t,n){if(ni(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ip(r,"invalid-api-key",{appName:t.name}),ip(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Yd:void 0;this._delegate=n.initialize({options:{persistence:sp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ds),this.linkUnderlyingAuth()}return x(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?rp.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Fu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return cl.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ll(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ul.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zd(this._delegate,dl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return kl.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=bc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ip(Fd(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,mf(this._delegate,Yd);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Zd(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Lu(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ap(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onAuthStateChanged(i,o,a)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ap(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onIdTokenChanged(i,o,a)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return vl.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return sl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wd(this._delegate,t),e.t0=t,e.next=e.t0===Vd.SESSION?4:e.t0===Vd.LOCAL?6:e.t0===Vd.NONE?11:13;break;case 4:return n=Hl,e.abrupt("break",14);case 6:return e.next=8,Cs(ph)._isAvailable();case 8:return r=e.sent,n=r?ph:zl,e.abrupt("break",14);case 11:return n=gu,e.abrupt("break",14);case 13:return e.abrupt("return",gs("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Zd(this._delegate,function(e){return Lc.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Zd(this._delegate,Yc(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Zd(this._delegate,function(e,t){return rl.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Zd(this._delegate,function(e,t,n){return Yc(ta(e),_c.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Zd(this._delegate,function(e,t,n){return yl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ep(this._delegate,function(e,t,n){return Dh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ip(Fd(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Zd(this._delegate,Jh(this._delegate,t,Yd)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ip(Fd(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Hd(this._delegate);case 3:return e.abrupt("return",hf(this._delegate,t,Yd));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return fl.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ap(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&rp.getOrCreate(e))},error:t,complete:n}}function sp(e,t){var n=function(e,t){var n=Gd();if(!n)return[];var r=ku(zd,e,t);switch(n.getItem(r)){case Vd.NONE:return[gu];case Vd.LOCAL:return[ph,Hl];case Vd.SESSION:return[Hl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ph)||n.push(ph),"undefined"!==typeof window)for(var r=0,i=[zl,Hl];r<i.length;r++){var o=i[r];n.includes(o)||n.push(o)}return n.includes(gu)||n.push(gu),n}op.Persistence=Vd;var up=function(){function e(){ni(this,e),this.providerId="phone",this._delegate=new Vh(Jd(Ja.auth()))}return x(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Vh.credential(e,t)}}]),e}();up.PHONE_SIGN_IN_METHOD=Vh.PHONE_SIGN_IN_METHOD,up.PROVIDER_ID=Vh.PROVIDER_ID;var cp=xs,lp=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ja.app();ni(this,e),cp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ph(t,n,i.auth()),this.type=this._delegate.type}return x(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new na("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new op(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:as,PASSWORD_RESET:ss,RECOVER_EMAIL:us,REVERT_SECOND_FACTOR_ADDITION:cs,VERIFY_AND_CHANGE_EMAIL:ls,VERIFY_EMAIL:hs}},EmailAuthProvider:_c,FacebookAuthProvider:Tc,GithubAuthProvider:Cc,GoogleAuthProvider:Ec,OAuthProvider:Sc,SAMLAuthProvider:Rc,PhoneAuthProvider:up,PhoneMultiFactorGenerator:nd,RecaptchaVerifier:lp,TwitterAuthProvider:Nc,Auth:op,AuthCredential:qu,Error:No}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.7")}(Ja);var hp="firebasestorage.googleapis.com",fp=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,dp(e),"Firebase Storage: ".concat(r," (").concat(dp(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(E(i),n.prototype),i}return x(n,[{key:"_codeEquals",value:function(e){return dp(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(No);function dp(e){return"storage/"+e}function pp(){return new fp("unknown","An unknown error occurred, please check the error payload for server response.")}function vp(){return new fp("canceled","User canceled the upload/download.")}function yp(){return new fp("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mp(e){return new fp("invalid-argument",e)}function gp(){return new fp("app-deleted","The Firebase app was deleted.")}function kp(e){return new fp("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bp(e,t){return new fp("invalid-format","String does not match format '"+e+"': "+t)}function _p(e){throw new fp("internal-error","Internal error: "+e)}var wp,xp=function(){function e(t,n){ni(this,e),this.bucket=t,this.path_=n}return x(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new fp("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(n===hp?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new fp("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Sp=function(){function e(t){ni(this,e),this.promise_=Promise.reject(t)}return x(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Tp(e){return"string"===typeof e||e instanceof String}function Ep(e){return Cp()&&e instanceof Blob}function Cp(){return"undefined"!==typeof Blob}function Ip(e,t,n,r){if(r<t)throw mp("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw mp("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Rp(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Np(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(wp||(wp={}));var Pp=function(){function e(t,n,r,i,o,a,s,u,c,l,h){var f=this;ni(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return x(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponse());!function(e){return void 0!==e}(a)?r():r(a)}catch(u){i(u)}else if(null!==o){var s=pp();s.serverResponse=o.getErrorText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s)}else{if(n.canceled)i(e.appDelete_?gp():vp());else i(new fp("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Ap(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){o&&clearTimeout(o)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var o;if(u()||a)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),h(o)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),o=setTimeout((function(){a=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Ap(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===wp.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Ap(a,r))}else{var s=r.getErrorCode()===wp.ABORT;t(!1,new Ap(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Ap=x((function e(t,n,r){ni(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Op(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Dp(){for(var e=Op(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,o=0;o<n.length;o++)i.append(n[o]);return i.getBlob()}if(Cp())return new Blob(n);throw new fp("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Lp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Mp=x((function e(t,n){ni(this,e),this.data=t,this.contentType=n||null}));function Fp(e,t){switch(e){case Lp.RAW:return new Mp(Up(t));case Lp.BASE64:case Lp.BASE64URL:return new Mp(jp(e,t));case Lp.DATA_URL:return new Mp(function(e){var t=new qp(e);return t.base64?jp(Lp.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw bp(Lp.DATA_URL,"Malformed data URL.")}return Up(t)}(t.rest)}(t),new qp(t).contentType)}throw pp()}function Up(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function jp(e,t){switch(e){case Lp.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw bp(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Lp.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw bp(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(c){throw bp(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var qp=x((function e(t){ni(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw bp(Lp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Vp=function(){function e(t,n){ni(this,e);var r=0,i="";Ep(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return x(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Ep(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Cp()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Dp.apply(null,i))}var o=n.map((function(e){return Tp(e)?Fp(Lp.RAW,e).data:e.data_})),a=0;o.forEach((function(e){a+=e.byteLength}));var s=new Uint8Array(a),u=0;return o.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Bp(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function zp(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Wp(e,t){return t}var Hp=x((function e(t,n,r,i){ni(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Wp})),Kp=null;function Gp(){if(Kp)return Kp;var e=[];e.push(new Hp("bucket")),e.push(new Hp("generation")),e.push(new Hp("metageneration")),e.push(new Hp("name","fullPath",!0));var t=new Hp("name");t.xform=function(e,t){return function(e){return!Tp(e)||e.length<2?e:zp(e)}(t)},e.push(t);var n=new Hp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Hp("timeCreated")),e.push(new Hp("updated")),e.push(new Hp("md5Hash",null,!0)),e.push(new Hp("cacheControl",null,!0)),e.push(new Hp("contentDisposition",null,!0)),e.push(new Hp("contentEncoding",null,!0)),e.push(new Hp("contentLanguage",null,!0)),e.push(new Hp("contentType",null,!0)),e.push(new Hp("metadata","customMetadata",!0)),Kp=e}function Qp(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new xp(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Yp(e,t,n){var r=Bp(t);return null===r?null:Qp(e,r,n)}function Jp(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function $p(e,t,n){var r=Bp(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,o=Zi(n.prefixes);try{for(o.s();!(i=o.n()).done;){var a=i.value.replace(/\/$/,""),s=e._makeStorageReference(new xp(t,a));r.prefixes.push(s)}}catch(f){o.e(f)}finally{o.f()}}if(n.items){var u,c=Zi(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new xp(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var Xp=x((function e(t,n,r,i){ni(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Zp(e){if(!e)throw pp()}function ev(e,t){return function(n,r){var i=Yp(e,r,t);return Zp(null!==i),i}}function tv(e,t){return function(n,r){var i=Yp(e,r,t);return Zp(null!==i),function(e,t,n,r){var i=Bp(t);if(null===i)return null;if(!Tp(i.downloadTokens))return null;var o=i.downloadTokens;if(0===o.length)return null;var a=encodeURIComponent;return o.split(",").map((function(t){var i=e.bucket,o=e.fullPath;return Rp("/b/"+a(i)+"/o/"+a(o),n,r)+Np({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function nv(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new fp("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new fp("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new fp("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new fp("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function rv(e){var t=nv(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new fp("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function iv(e,t,n){var r=Rp(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Xp(r,"GET",ev(e,n),i);return o.errorHandler=rv(t),o}function ov(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Rp(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Xp(a,"GET",function(e,t){return function(n,r){var i=$p(e,t,r);return Zp(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=nv(t),u}function av(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function sv(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=av(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Jp(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Vp.getBlob(c,r,l);if(null===h)throw yp();var f={name:u.fullPath},d=Rp(o,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Xp(d,"POST",ev(e,n),p);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=nv(t),v}var uv=x((function e(t,n,r,i){ni(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function cv(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Zp(!1)}return Zp(!!n&&-1!==(t||["active"]).indexOf(n)),n}var lv=262144;function hv(e,t,n,r,i,o,a,s){var u=new uv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new fp("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw yp();var v=t.maxUploadRetryTime,y=new Xp(n,"POST",(function(e,n){var i,a=cv(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ev(t,o)(e,n):null,new uv(s,c,"final"===a,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=nv(e),y}var fv={STATE_CHANGED:"state_changed"},dv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pv(e){switch(e){case"running":case"pausing":case"canceling":return dv.RUNNING;case"paused":return dv.PAUSED;case"success":return dv.SUCCESS;case"canceled":return dv.CANCELED;default:return dv.ERROR}}var vv=x((function e(t,n,r){ni(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}));function yv(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var mv=function(){function e(){var t=this;ni(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wp.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=wp.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=wp.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return x(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw _p("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw _p("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw _p("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw _p("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw _p("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),gv=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(mv);function kv(){return new gv}var bv=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ni(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Gp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return x(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],o=r[1];switch(t._state){case"running":e(i,o);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=av(t,r,i),s={name:a.fullPath},u=Rp(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Jp(a,n),h=e.maxUploadRetryTime,f=new Xp(u,"POST",(function(e){var t;cv(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Zp(!1)}return Zp(Tp(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=nv(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,kv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Xp(n,"POST",(function(e){var t=cv(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Zp(!1)}n||Zp(!1);var i=Number(n);return Zp(!isNaN(i)),new uv(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=nv(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,kv,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=lv*this._chunkMultiplier,n=new uv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=hv(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(a,kv,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){lv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=iv(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,kv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=sv(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,kv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vp(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=pv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,o=new vv(t||void 0,n||void 0,r||void 0);return this._addObserver(o),function(){i._removeObserver(o)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(pv(this._state)){case dv.SUCCESS:yv(this._resolve.bind(null,this.snapshot))();break;case dv.CANCELED:case dv.ERROR:yv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(pv(this._state)){case dv.RUNNING:case dv.PAUSED:e.next&&yv(e.next.bind(e,this.snapshot))();break;case dv.SUCCESS:e.complete&&yv(e.complete.bind(e))();break;default:e.error&&yv(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),_v=function(){function e(t,n){ni(this,e),this._service=t,this._location=n instanceof xp?n:xp.makeFromUrl(n,t.host)}return x(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new xp(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return zp(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new xp(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw kp(e)}}]),e}();function wv(e,t,n){return xv.apply(this,arguments)}function xv(){return(xv=o(f().mark((function e(t,n,r){var i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={pageToken:r},e.next=3,Sv(t,a);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,_t(s.prefixes)),(o=n.items).push.apply(o,_t(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,wv(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sv(e,t){null!=t&&"number"===typeof t.maxResults&&Ip("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=ov(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,kv)}function Tv(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Rp(t.fullServerUrl(),e.host,e._protocol),o=Jp(n,r),a=e.maxOperationRetryTime,s=new Xp(i,"PATCH",ev(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=rv(t),s}(e.storage,e._location,t,Gp());return e.storage.makeRequestWithTokens(n,kv)}function Ev(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Rp(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Xp(r,"GET",tv(e,n),i);return o.errorHandler=rv(t),o}(e.storage,e._location,Gp());return e.storage.makeRequestWithTokens(t,kv).then((function(e){if(null===e)throw new fp("no-download-url","The given file does not have any download URLs.");return e}))}function Cv(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Rp(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Xp(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=rv(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,kv)}function Iv(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new xp(e._location.bucket,n);return new _v(e.storage,r)}function Rv(e,t){if(e instanceof Ov){var n=e;if(null==n._bucket)throw new fp("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new _v(n,n._bucket);return null!=t?Rv(r,t):r}return void 0!==t?Iv(e,t):e}function Nv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ov)return new _v(e,t);throw mp("To use ref(service, url), the first argument must be a Storage instance.")}return Rv(e,t)}function Pv(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:xp.makeFromBucketSpec(n,e)}function Av(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:_o(i,e.app.options.projectId))}var Ov=function(){function e(t,n,r,i,o){ni(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=hp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xp.makeFromBucketSpec(i,this._host):Pv(this._host,this.app.options)}return x(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=xp.makeFromBucketSpec(this._url,e):this._bucket=Pv(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Ip("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Ip("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=o(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=o(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new _v(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Sp(gp());var o=function(e,t,n,r,i,o){var a=Np(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Pp(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),o=i[0],a=i[1],e.abrupt("return",this._makeRequest(t,n,o,a).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Dv="@firebase/storage",Lv="0.9.2",Mv="storage";function Fv(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new bv(e,new Vp(t),n)}(e=ta(e),t,n)}function Uv(e){return function(e){e._throwIfRoot("getMetadata");var t=iv(e.storage,e._location,Gp());return e.storage.makeRequestWithTokens(t,kv)}(e=ta(e))}function jv(e){return function(e){var t={prefixes:[],items:[]};return wv(e,t).then((function(){return t}))}(e=ta(e))}function qv(e,t){return Nv(e=ta(e),t)}function Vv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Av(e,t,n,r)}function Bv(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Ov(r,i,o,n,La)}Ea(new na(Mv,Bv,"PUBLIC").setMultipleInstances(!0)),Va(Dv,Lv,""),Va(Dv,Lv,"esm2017");var zv=function(){function e(t,n,r){ni(this,e),this._delegate=t,this.task=n,this.ref=r}return x(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Wv=function(){function e(t,n){ni(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return x(e,[{key:"snapshot",get:function(){return new zv(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new zv(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new zv(e,i,i._ref))}:{next:t.next?function(e){return t.next(new zv(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)}}]),e}(),Hv=function(){function e(t,n){ni(this,e),this._delegate=t,this._service=n}return x(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Kv(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Kv(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Kv=function(){function e(t,n){ni(this,e),this._delegate=t,this.storage=n}return x(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Iv(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Wv(Fv(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lp.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Fp(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Wv(new bv(this._delegate,new Vp(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return jv(this._delegate).then((function(t){return new Hv(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Sv(e=ta(e),t)}(this._delegate,e||void 0).then((function(e){return new Hv(e,t.storage)}))}},{key:"getMetadata",value:function(){return Uv(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Tv(e=ta(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Ev(ta(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Cv(ta(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw kp(e)}}]),e}(),Gv=function(){function e(t,n){ni(this,e),this.app=t,this._delegate=n}return x(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Qv(e))throw mp("ref() expected a child path but got a URL, use refFromURL instead.");return new Kv(qv(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Qv(e))throw mp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xp.makeFromUrl(e,this._delegate.host)}catch(t){throw mp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Kv(qv(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vv(this._delegate,e,t,n)}}]),e}();function Qv(e){return/^[A-Za-z]+:\/\//.test(e)}function Yv(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Gv(r,i)}!function(e){var t={TaskState:dv,TaskEvent:fv,StringFormat:Lp,Storage:Gv,Reference:Kv};e.INTERNAL.registerComponent(new na("storage-compat",Yv,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.10")}(Ja);var Jv="@firebase/database",$v="0.12.5",Xv="";function Zv(e){Xv=e}var ey=function(){function e(t){ni(this,e),this.domStorage_=t,this.prefix_="firebase:"}return x(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Lo(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Do(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),ty=function(){function e(){ni(this,e),this.cache_={},this.isInMemoryStorage=!0}return x(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Fo(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),ny=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ey(t)}}catch(n){}return new ty},ry=ny("localStorage"),iy=ny("sessionStorage"),oy=new va("@firebase/database"),ay=function(){var e=1;return function(){return e++}}(),sy=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,lo(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ko;n.update(t);var r=n.digest();return po.encodeByteArray(r)},uy=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Lo(r):r,t+=" "}return t},cy=null,ly=!0,hy=function(e,t){lo(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(oy.logLevel=aa.VERBOSE,cy=oy.log.bind(oy),t&&iy.set("logging_enabled",!0)):"function"===typeof e?cy=e:(cy=null,iy.remove("logging_enabled"))},fy=function(){if(!0===ly&&(ly=!1,null===cy&&!0===iy.get("logging_enabled")&&hy(!0)),cy){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=uy.apply(null,t);cy(r)}},dy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];fy.apply(void 0,[e].concat(n))}},py=function(){var e="FIREBASE INTERNAL ERROR: "+uy.apply(void 0,arguments);oy.error(e)},vy=function(){var e="FIREBASE FATAL ERROR: ".concat(uy.apply(void 0,arguments));throw oy.error(e),new Error(e)},yy=function(){var e="FIREBASE WARNING: "+uy.apply(void 0,arguments);oy.warn(e)},my=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},gy="[MIN_NAME]",ky="[MAX_NAME]",by=function(e,t){if(e===t)return 0;if(e===gy||t===ky)return-1;if(t===gy||e===ky)return 1;var n=Ny(e),r=Ny(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},_y=function(e,t){return e===t?0:e<t?-1:1},wy=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Lo(t))},xy=function e(t){if("object"!==typeof t||null===t)return Lo(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=Lo(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},Sy=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ty(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ey=function(e){lo(!my(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Cy=new RegExp("^-?(0*)\\d{1,10}$"),Iy=-2147483648,Ry=2147483647,Ny=function(e){if(Cy.test(e)){var t=Number(e);if(t>=Iy&&t<=Ry)return t}return null},Py=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw yy("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Ay=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},Oy=function(){function e(t,n){var r=this;ni(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return x(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){yy('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Dy=function(){function e(t,n,r){var i=this;ni(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return x(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(fy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yy(e)}}]),e}(),Ly=function(){function e(t){ni(this,e),this.accessToken=t}return x(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Ly.OWNER="owner";var My="5",Fy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Uy="websocket",jy="long_polling",qy=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];ni(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ry.get("host:"+t)||this._host}return x(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ry.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Vy(e,t,n){var r;if(lo("string"===typeof t,"typeof type must == string"),lo("object"===typeof n,"typeof params must == object"),t===Uy)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==jy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Ty(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var By=function(){function e(){ni(this,e),this.counters_={}}return x(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Fo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return go(void 0,this.counters_)}}]),e}(),zy={},Wy={};function Hy(e){var t=e.toString();return zy[t]||(zy[t]=new By),zy[t]}var Ky=function(){function e(t){ni(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return x(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Py((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Gy="start",Qy="close",Yy=function(){function e(t,n,r,i,o,a,s){var u=this;ni(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dy(t),this.stats_=Hy(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),Vy(n,jy,e)}}return x(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ky(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Io()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Jy((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Gy)n.id=o,n.password=a;else{if(i!==Qy)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=My,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Fy.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Lo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=vo(t),r=Sy(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Io()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Lo(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Io()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Jy=function(){function e(t,n,r,i){if(ni(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Io())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ay(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){fy("frame writing exception"),s.stack&&fy(s.stack),fy(s)}}}return x(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Io()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){fy("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||fy("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),$y=null;"undefined"!==typeof MozWebSocket?$y=MozWebSocket:"undefined"!==typeof WebSocket&&($y=WebSocket);var Xy=function(){function e(t,n,r,i,o,a,s){ni(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dy(this.connId),this.stats_=Hy(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return x(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ry.set("previous_websocket_failure",!0);try{if(Io()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(My,"/").concat(Xv,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new $y(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new $y(this.connURL,[],s)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){ry.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Do(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(lo(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Lo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Sy(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=My,!Io()&&"undefined"!==typeof location&&location.hostname&&Fy.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Vy(e,Uy,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==$y&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return ry.isInMemoryStorage||!0===ry.get("previous_websocket_failure")}}]),e}();Xy.responsesRequiredToBeHealthy=2,Xy.healthyTimeout=3e4;var Zy=function(){function e(t){ni(this,e),this.initTransports_(t)}return x(e,[{key:"initTransports_",value:function(t){var n=Xy&&Xy.isAvailable(),r=n&&!Xy.previouslyFailed();if(t.webSocketOnly&&(n||yy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xy];else{var i,o=this.transports_=[],a=Zi(e.ALL_TRANSPORTS);try{for(a.s();!(i=a.n()).done;){var s=i.value;s&&s.isAvailable()&&o.push(s)}}catch(u){a.e(u)}finally{a.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Yy,Xy]}}]),e}(),em=function(){function e(t,n,r,i,o,a,s,u,c,l){ni(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dy("c:"+this.id+":"),this.transportManager_=new Zy(n),this.log_("Connection created"),this.start_()}return x(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ay((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=wy("t",e),n=wy("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=wy("t",e),n=wy("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=wy("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?py("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):py("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),My!==n&&yy("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ay((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ay((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ry.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),tm=function(){function e(){ni(this,e)}return x(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),nm=function(){function e(t){ni(this,e),this.allowedEvents_=t,this.listeners_={},lo(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return x(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=_t(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){lo(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),rm=function(e){eo(n,e);var t=io(n);function n(){var e;return ni(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||xo()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return x(n,[{key:"getInitialEvent",value:function(e){return lo("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(nm),im=function(){function e(t,n){if(ni(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return x(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function om(){return new im("")}function am(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function sm(e){return e.pieces_.length-e.pieceNum_}function um(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new im(e.pieces_,t)}function cm(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function hm(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new im(t,0)}function fm(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof im)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var o=t.split("/"),a=0;a<o.length;a++)o[a].length>0&&n.push(o[a]);return new im(n,0)}function dm(e){return e.pieceNum_>=e.pieces_.length}function pm(e,t){var n=am(e),r=am(t);if(null===n)return t;if(n===r)return pm(um(e),um(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vm(e,t){for(var n=lm(e,0),r=lm(t,0),i=0;i<n.length&&i<r.length;i++){var o=by(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function ym(e,t){if(sm(e)!==sm(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function mm(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(sm(e)>sm(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var gm=x((function e(t,n){ni(this,e),this.errorPrefix_=n,this.parts_=lm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ea(this.parts_[r]);km(this)}));function km(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bm(e))}function bm(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var _m=function(e){eo(n,e);var t=io(n);function n(){var e,r,i;return ni(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return x(n,[{key:"getInitialEvent",value:function(e){return lo("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(nm),wm=1e3,xm=function(e){eo(n,e);var t=io(n);function n(e,r,i,o,a,s,u,c){var l;if(ni(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=dy("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=wm,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Io())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return _m.getInstance().on("visible",l.onVisible_,E(l)),-1===e.host.indexOf("fblocal")&&rm.getInstance().on("online",l.onOnline_,E(l)),l}return x(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Lo(i)),lo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new bo,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),lo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),lo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(o))===e&&(t.log_("listen response",a),"ok"!==u&&t.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Mo(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Mo(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),lo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Lo(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):py("Unrecognized action received from server: "+Lo(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;lo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=wm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=wm),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=o(f().mark((function e(){var t,r,i,o,a,s,u,c,h,d,p,v,y,m,g=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){lo(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=l(p,2),y=v[0],m=v[1],s?fy("getToken() completed but was canceled"):(fy("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,u=new em(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){yy(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),a)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&yy(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){fy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){fy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jo(this.interruptReasons_)&&(this.reconnectDelay_=wm,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return xy(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new im(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){fy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){fy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Zi(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Zi(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){var a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Io()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Xv.replace(/\./g,"-")]=1,xo()?e["framework.cordova"]=1:Eo()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=rm.getInstance().currentlyOnline();return jo(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Fo(e,"w")){var n=Uo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();yy("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(tm);xm.nextPersistentConnectionId_=0,xm.nextConnectionId_=0;var Sm,Tm=function(){function e(t,n){ni(this,e),this.name=t,this.node=n}return x(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Em=function(){function e(){ni(this,e)}return x(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Tm(gy,e),r=new Tm(gy,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Tm.MIN}}]),e}(),Cm=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"compare",value:function(e,t){return by(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ho("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Tm.MIN}},{key:"maxPost",value:function(){return new Tm(ky,Sm)}},{key:"makePost",value:function(e,t){return lo("string"===typeof e,"KeyIndex indexValue must always be a string."),new Tm(e,Sm)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Sm},set:function(e){Sm=e}}]),n}(Em),Im=new Cm,Rm=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ni(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return x(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Nm=function(){function e(t,n,r,i,o){ni(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Om.EMPTY_NODE,this.right=null!=o?o:Om.EMPTY_NODE}return x(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Om.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Om.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Nm.RED=!0,Nm.BLACK=!1;var Pm,Am=function(){function e(){ni(this,e)}return x(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Nm(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Om=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;ni(this,e),this.comparator_=t,this.root_=n}return x(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Nm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Nm.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Rm(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Rm(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Rm(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Rm(this.root_,null,this.comparator_,!0,e)}}]),e}();function Dm(e,t){return by(e.name,t.name)}function Lm(e,t){return by(e,t)}Om.EMPTY_NODE=new Am;var Mm,Fm,Um,jm=function(e){return"number"===typeof e?"number:"+Ey(e):"string:"+e},qm=function(e){if(e.isLeafNode()){var t=e.val();lo("string"===typeof t||"number"===typeof t||"object"===typeof t&&Fo(t,".sv"),"Priority must be a string or number.")}else lo(e===Pm||e.isEmpty(),"priority of unexpected type.");lo(e===Pm||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Vm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;ni(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,lo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),qm(this.priorityNode_)}return x(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return dm(t)?this:".priority"===am(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=am(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(lo(".priority"!==r||1===sm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(um(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+jm(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ey(this.value_):this.value_,this.lazyHash_=sy(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(lo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return lo(i>=0,"Unknown leaf type: "+n),lo(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Mm},set:function(e){Mm=e}}]),e}();Vm.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Bm,zm,Wm=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?by(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Tm.MIN}},{key:"maxPost",value:function(){return new Tm(ky,new Vm("[PRIORITY-POST]",Um))}},{key:"makePost",value:function(e,t){var n=Fm(e);return new Tm(t,new Vm("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Em),Hm=new Wm,Km=Math.log(2),Gm=function(){function e(t){ni(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Km,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return x(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Qm=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new Nm(a,o.node,Nm.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new Nm(a,o.node,Nm.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new Nm(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Nm.BLACK):(s(h,Nm.BLACK),s(h,Nm.RED))}return o}(new Gm(e.length));return new Om(r||t,o)},Ym={},Jm=function(){function e(t,n){ni(this,e),this.indexes_=t,this.indexSet_=n}return x(e,[{key:"get",value:function(e){var t=Uo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Om?t:null}},{key:"hasIndex",value:function(e){return Fo(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){lo(t!==Im,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Tm.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Qm(i,t.getCompare()):Ym;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=qo(this.indexes_,(function(e,i){var o=Uo(r.indexSet_,i);if(lo(o,"Missing index implementation for "+i),e===Ym){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(Tm.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),Qm(a,o.getCompare())}return Ym}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Tm(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(qo(this.indexes_,(function(e){if(e===Ym)return e;var r=n.get(t.name);return r?e.remove(new Tm(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return lo(Ym&&Hm,"ChildrenNode.ts has not been loaded"),Bm=Bm||new e({".priority":Ym},{".priority":Hm})}}]),e}(),$m=function(){function e(t,n,r){ni(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&qm(this.priorityNode_),this.children_.isEmpty()&&lo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return x(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||zm}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?zm:t}},{key:"getChild",value:function(e){var t=am(e);return null===t?this:this.getImmediateChild(t).getChild(um(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(lo(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,o=new Tm(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(o,this.children_));var a=r.isEmpty()?zm:this.priorityNode_;return new e(r,a,i)}},{key:"updateChild",value:function(e,t){var n=am(e);if(null===n)return t;lo(".priority"!==am(e)||1===sm(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(um(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Hm,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+jm(this.getPriority().val())+":"),this.forEachChild(Hm,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":sy(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tm(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Tm(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Tm(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Tm.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Tm.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xm?-1:0}},{key:"withIndex",value:function(t){if(t===Im||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Im||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Hm),r=t.getIterator(Hm),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Im?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return zm||(zm=new e(new Om(Lm),null,Jm.Default))}}]),e}();$m.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Xm=new(function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.call(this,new Om(Lm),$m.EMPTY_NODE,Jm.Default)}return x(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return $m.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}($m));Object.defineProperties(Tm,{MIN:{value:new Tm(gy,$m.EMPTY_NODE)},MAX:{value:new Tm(ky,Xm)}}),Cm.__EMPTY_NODE=$m.EMPTY_NODE,Vm.__childrenNodeConstructor=$m,Pm=Xm,function(e){Um=e}(Xm);function Zm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return $m.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),lo(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Vm(n,Zm(t))}if(e instanceof Array){var r=$m.EMPTY_NODE;return Ty(e,(function(t,n){if(Fo(e,t)&&"."!==t.substring(0,1)){var i=Zm(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Zm(t))}var i=[],o=!1,a=e;if(Ty(a,(function(e,t){if("."!==e.substring(0,1)){var n=Zm(t);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new Tm(e,n)))}})),0===i.length)return $m.EMPTY_NODE;var s=Qm(i,Dm,(function(e){return e.name}),Lm);if(o){var u=Qm(i,Hm.getCompare());return new $m(s,Zm(t),new Jm({".priority":u},{".priority":Hm}))}return new $m(s,Zm(t),Jm.Default)}!function(e){Fm=e}(Zm);var eg=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).indexPath_=e,lo(!dm(e)&&".priority"!==am(e),"Can't create PathIndex with empty path or .priority key"),r}return x(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?by(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Zm(e),r=$m.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tm(t,r)}},{key:"maxPost",value:function(){var e=$m.EMPTY_NODE.updateChild(this.indexPath_,Xm);return new Tm(ky,e)}},{key:"toString",value:function(){return lm(this.indexPath_,0).join("/")}}]),n}(Em),tg=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?by(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Tm.MIN}},{key:"maxPost",value:function(){return Tm.MAX}},{key:"makePost",value:function(e,t){var n=Zm(e);return new Tm(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Em),ng=new tg,rg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ig=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=rg.charAt(n%64),n=Math.floor(n/64);lo(0===n,"Cannot push at time == 0");var a=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=rg.charAt(t[r]);return lo(20===a.length,"nextPushId: Length should be 20."),a}}(),og=function(e){if("2147483647"===e)return"-";var t=Ny(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return ky;var o=n[i],a=rg.charAt(rg.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},ag=function(e){if("-2147483648"===e)return gy;var t=Ny(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=rg.charAt(rg.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function sg(e){return{type:"value",snapshotNode:e}}function ug(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function cg(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function lg(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var hg=function(){function e(t){ni(this,e),this.index_=t}return x(e,[{key:"updateChild",value:function(e,t,n,r,i,o){lo(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(cg(t,a)):lo(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ug(t,n)):o.trackChildChange(lg(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Hm,(function(e,r){t.hasChild(e)||n.trackChildChange(cg(e,r))})),t.isLeafNode()||t.forEachChild(Hm,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(lg(t,r,i))}else n.trackChildChange(ug(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?$m.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),fg=function(){function e(t){ni(this,e),this.indexedFilter_=new hg(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return x(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,o){return this.matches(new Tm(t,n))||(n=$m.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=$m.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority($m.EMPTY_NODE);var i=this;return t.forEachChild(Hm,(function(e,t){i.matches(new Tm(e,t))||(r=r.updateImmediateChild(e,$m.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),dg=function(){function e(t){ni(this,e),this.rangedFilter_=new fg(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return x(e,[{key:"updateChild",value:function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Tm(t,n))||(n=$m.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=$m.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=$m.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority($m.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,$m.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;lo(s.numChildren()===this.limit_,"");var u=new Tm(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(lg(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(cg(t,h));var p=s.updateImmediateChild(t,$m.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ug(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(cg(c.name,c.node)),i.trackChildChange(ug(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,$m.EMPTY_NODE)):e}}]),e}(),pg=function(){function e(){ni(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hm}return x(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return lo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return lo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gy}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return lo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return lo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ky}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return lo(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Hm}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function vg(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function yg(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function mg(e,t){var n=e.copy();return n.index_=t,n}function gg(e){var t,n={};return e.isDefault()||(e.index_===Hm?t="$priority":e.index_===ng?t="$value":e.index_===Im?t="$key":(lo(e.index_ instanceof eg,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Lo(t),e.startSet_&&(n.startAt=Lo(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Lo(e.indexStartName_))),e.endSet_&&(n.endAt=Lo(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Lo(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function kg(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Hm&&(t.i=e.index_.toString()),t}var bg=function(e){eo(n,e);var t=io(n);function n(e,r,i,o){var a;return ni(this,n),(a=t.call(this)).repoInfo_=e,a.onDataUpdate_=r,a.authTokenProvider_=i,a.appCheckTokenProvider_=o,a.log_=dy("p:rest:"),a.listens_={},a}return x(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=gg(e._queryParams);this.restRequest_(a+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),Uo(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=gg(e._queryParams),r=e._path.toString(),i=new bo;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=l(i,2),a=o[0],s=o[1];a&&a.accessToken&&(n.auth=a.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+zo(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Do(c.responseText)}catch(n){yy("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&yy("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(lo(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(tm),_g=function(){function e(){ni(this,e),this.rootNode_=$m.EMPTY_NODE}return x(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function wg(){return{value:null,children:new Map}}function xg(e,t,n){if(dm(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=am(t);e.children.has(r)||e.children.set(r,wg()),xg(e.children.get(r),t=um(t),n)}}function Sg(e,t){if(dm(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Hm,(function(t,n){xg(e,new im(t),n)})),Sg(e,t)}if(e.children.size>0){var r=am(t);if(t=um(t),e.children.has(r))Sg(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Tg(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Tg(r,new im(t.toString()+"/"+e),n)}))}var Eg,Cg=function(){function e(t){ni(this,e),this.collection_=t,this.last_=null}return x(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ty(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Ig=function(){function e(t,n){ni(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Cg(t);var r=1e4+2e4*Math.random();Ay(this.reportStats_.bind(this),Math.floor(r))}return x(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Ty(t,(function(t,i){i>0&&Fo(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Ay(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Rg(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Eg||(Eg={}));var Ng,Pg=function(){function e(t,n,r){ni(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Eg.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return x(e,[{key:"operationForChild",value:function(t){if(dm(this.path)){if(null!=this.affectedTree.value)return lo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new im(t));return new e(om(),n,this.revert)}return lo(am(this.path)===t,"operationForChild called for unrelated child."),new e(um(this.path),this.affectedTree,this.revert)}}]),e}(),Ag=function(){function e(t,n){ni(this,e),this.source=t,this.path=n,this.type=Eg.LISTEN_COMPLETE}return x(e,[{key:"operationForChild",value:function(t){return dm(this.path)?new e(this.source,om()):new e(this.source,um(this.path))}}]),e}(),Og=function(){function e(t,n,r){ni(this,e),this.source=t,this.path=n,this.snap=r,this.type=Eg.OVERWRITE}return x(e,[{key:"operationForChild",value:function(t){return dm(this.path)?new e(this.source,om(),this.snap.getImmediateChild(t)):new e(this.source,um(this.path),this.snap)}}]),e}(),Dg=function(){function e(t,n,r){ni(this,e),this.source=t,this.path=n,this.children=r,this.type=Eg.MERGE}return x(e,[{key:"operationForChild",value:function(t){if(dm(this.path)){var n=this.children.subtree(new im(t));return n.isEmpty()?null:n.value?new Og(this.source,om(),n.value):new e(this.source,om(),n)}return lo(am(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,um(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Lg=function(){function e(t,n,r){ni(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return x(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(dm(e))return this.isFullyInitialized()&&!this.filtered_;var t=am(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Mg=x((function e(t){ni(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Fg(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ho("Should only compare child_ events.");var r=new Tm(t.childName,t.snapshotNode),i=new Tm(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Ug(e,t){return{eventCache:e,serverCache:t}}function jg(e,t,n,r){return Ug(new Lg(t,n,r),e.serverCache)}function qg(e,t,n,r){return Ug(e.eventCache,new Lg(t,n,r))}function Vg(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Bg(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var zg=function(){return Ng||(Ng=new Om(_y)),Ng},Wg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zg();ni(this,e),this.value=t,this.children=n}return x(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:om(),value:this.value};if(dm(e))return null;var n=am(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(um(e),t);return null!=i?{path:fm(new im(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(dm(t))return this;var n=am(t),r=this.children.get(n);return null!==r?r.subtree(um(t)):new e(null)}},{key:"set",value:function(t,n){if(dm(t))return new e(n,this.children);var r=am(t),i=(this.children.get(r)||new e(null)).set(um(t),n),o=this.children.insert(r,i);return new e(this.value,o)}},{key:"remove",value:function(t){if(dm(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=am(t),r=this.children.get(n);if(r){var i,o=r.remove(um(t));return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(dm(e))return this.value;var t=am(e),n=this.children.get(t);return n?n.get(um(e)):null}},{key:"setTree",value:function(t,n){if(dm(t))return n;var r,i=am(t),o=(this.children.get(i)||new e(null)).setTree(um(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(om(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(fm(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,om(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(dm(e))return null;var i=am(e),o=this.children.get(i);return o?o.findOnPath_(um(e),fm(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,om(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(dm(t))return this;this.value&&r(n,this.value);var i=am(t),o=this.children.get(i);return o?o.foreachOnPath_(um(t),fm(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(om(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(fm(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Ty(t,(function(e,t){n=n.set(new im(e),t)})),n}}]),e}(),Hg=function(){function e(t){ni(this,e),this.writeTree_=t}return x(e,null,[{key:"empty",value:function(){return new e(new Wg(null))}}]),e}();function Kg(e,t,n){if(dm(t))return new Hg(new Wg(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=pm(i,t);return o=o.updateChild(a,n),new Hg(e.writeTree_.set(i,o))}var s=new Wg(n),u=e.writeTree_.setTree(t,s);return new Hg(u)}function Gg(e,t,n){var r=e;return Ty(n,(function(e,n){r=Kg(r,fm(t,e),n)})),r}function Qg(e,t){if(dm(t))return Hg.empty();var n=e.writeTree_.setTree(t,new Wg(null));return new Hg(n)}function Yg(e,t){return null!=Jg(e,t)}function Jg(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(pm(n.path,t)):null}function $g(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Hm,(function(e,n){t.push(new Tm(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Tm(e,n.value))})),t}function Xg(e,t){if(dm(t))return e;var n=Jg(e,t);return new Hg(null!=n?new Wg(n):e.writeTree_.subtree(t))}function Zg(e){return e.writeTree_.isEmpty()}function ek(e,t){return tk(om(),e.writeTree_,t)}function tk(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(lo(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=tk(fm(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(fm(e,".priority"),r)),n}function nk(e,t){return yk(t,e)}function rk(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function ik(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));lo(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&ok(s,r.path)?i=!1:mm(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=sk(e.allWrites,ak,om()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Qg(e.visibleWrites,r.path):Ty(r.children,(function(t){e.visibleWrites=Qg(e.visibleWrites,fm(r.path,t))}));return!0}return!1}function ok(e,t){if(e.snap)return mm(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&mm(fm(e.path,n),t))return!0;return!1}function ak(e){return e.visible}function sk(e,t,n){for(var r=Hg.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)mm(n,a)?r=Kg(r,s=pm(n,a),o.snap):mm(a,n)&&(s=pm(a,n),r=Kg(r,om(),o.snap.getChild(s)));else{if(!o.children)throw ho("WriteRecord should have .snap or .children");if(mm(n,a))r=Gg(r,s=pm(n,a),o.children);else if(mm(a,n))if(dm(s=pm(a,n)))r=Gg(r,om(),o.children);else{var u=Uo(o.children,am(s));if(u){var c=u.getChild(um(s));r=Kg(r,om(),c)}}}}}return r}function uk(e,t,n,r,i){if(r||i){var o=Xg(e.visibleWrites,t);if(!i&&Zg(o))return n;if(i||null!=n||Yg(o,om())){return ek(sk(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(mm(e.path,t)||mm(t,e.path))}),t),n||$m.EMPTY_NODE)}return null}var a=Jg(e.visibleWrites,t);if(null!=a)return a;var s=Xg(e.visibleWrites,t);return Zg(s)?n:null!=n||Yg(s,om())?ek(s,n||$m.EMPTY_NODE):null}function ck(e,t,n,r){return uk(e.writeTree,e.treePath,t,n,r)}function lk(e,t){return function(e,t,n){var r=$m.EMPTY_NODE,i=Jg(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Hm,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=Xg(e.visibleWrites,t);return n.forEachChild(Hm,(function(e,t){var n=ek(Xg(o,new im(e)),t);r=r.updateImmediateChild(e,n)})),$g(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return $g(Xg(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function hk(e,t,n,r){return function(e,t,n,r,i){lo(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=fm(t,n);if(Yg(e.visibleWrites,o))return null;var a=Xg(e.visibleWrites,o);return Zg(a)?i.getChild(n):ek(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function fk(e,t){return function(e,t){return Jg(e.visibleWrites,t)}(e.writeTree,fm(e.treePath,t))}function dk(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=Xg(e.visibleWrites,t),c=Jg(u,om());if(null!=c)s=c;else{if(null==n)return[];s=ek(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function pk(e,t,n){return function(e,t,n,r){var i=fm(t,n),o=Jg(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ek(Xg(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function vk(e,t){return yk(fm(e.treePath,t),e.writeTree)}function yk(e,t){return{treePath:e,writeTree:t}}var mk=function(){function e(){ni(this,e),this.changeMap=new Map}return x(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;lo("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),lo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,lg(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,cg(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ug(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ho("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,lg(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),gk=new(function(){function e(){ni(this,e)}return x(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),kk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ni(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return x(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Lg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pk(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bg(this.viewCache_),i=dk(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function bk(e,t,n,r,i){var o,a,s=new mk;if(n.type===Eg.OVERWRITE){var u=n;u.source.fromUser?o=xk(e,t,u.path,u.snap,r,i,s):(lo(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!dm(u.path),o=wk(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===Eg.MERGE){var c=n;c.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=fm(n,r);Sk(t,am(c))&&(s=xk(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=fm(n,r);Sk(t,am(c))||(s=xk(e,s,c,u,i,o,a))})),s}(e,t,c.path,c.children,r,i,s):(lo(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=Ek(e,t,c.path,c.children,r,i,a,s))}else if(n.type===Eg.ACK_USER_WRITE){var l=n;o=l.revert?function(e,t,n,r,i,o){var a;if(null!=fk(r,n))return t;var s,u=new kk(r,t,i),c=t.eventCache.getNode();if(dm(n)||".priority"===am(n)){var l;if(t.serverCache.isFullyInitialized())l=ck(r,Bg(t));else{var h=t.serverCache.getNode();lo(h instanceof $m,"serverChildren would be complete if leaf node"),l=lk(r,h)}l=l,s=e.filter.updateFullNode(c,l,o)}else{var f=am(n),d=pk(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,um(n),u,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,$m.EMPTY_NODE,um(n),u,o):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=ck(r,Bg(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,a,o))}return a=t.serverCache.isFullyInitialized()||null!=fk(r,om()),jg(t,s,a,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=fk(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(dm(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return wk(e,t,n,u.getNode().getChild(n),i,o,s,a);if(dm(n)){var c=new Wg(null);return u.getNode().forEachChild(Im,(function(e,t){c=c.set(new im(e),t)})),Ek(e,t,n,c,i,o,s,a)}return t}var l=new Wg(null);return r.foreach((function(e,t){var r=fm(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Ek(e,t,n,l,i,o,s,a)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Eg.LISTEN_COMPLETE)throw ho("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=qg(t,o.getNode(),o.isFullyInitialized()||dm(n),o.isFiltered());return _k(e,a,n,r,gk,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Vg(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(sg(Vg(t)))}}(t,o,h),{viewCache:o,changes:h}}function _k(e,t,n,r,i,o){var a,s,u=t.eventCache;if(null!=fk(r,n))return t;if(dm(n))if(lo(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Bg(t),l=lk(r,c instanceof $m?c:$m.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=ck(r,Bg(t));a=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=am(n);if(".priority"===f){lo(1===sm(n),"Can't have a priority with additional path components");var d=u.getNode(),p=hk(r,n,d,s=t.serverCache.getNode());a=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=um(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=hk(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=pk(r,f,t.serverCache);a=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,o):u.getNode()}}return jg(t,a,u.isFullyInitialized()||dm(n),e.filter.filtersNodes())}function wk(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(dm(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=am(n);if(!c.isCompleteForPath(n)&&sm(n)>1)return t;var d=um(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,gk,null)}var v=qg(t,u,c.isFullyInitialized()||dm(n),l.filtersNodes());return _k(e,v,n,i,new kk(i,v,o),s)}function xk(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new kk(i,t,o);if(dm(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=jg(t,u,!0,e.filter.filtersNodes());else{var h=am(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=jg(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=um(n),p=c.getNode().getImmediateChild(h);if(dm(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===cm(d)&&v.getChild(hm(d)).isEmpty()?v:v.updateChild(d,r):$m.EMPTY_NODE}if(p.equals(f))s=t;else s=jg(t,e.filter.updateChild(c.getNode(),h,f,d,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Sk(e,t){return e.eventCache.isCompleteForChild(t)}function Tk(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ek(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=dm(n)?r:new Wg(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Tk(0,t.serverCache.getNode().getImmediateChild(n),r);c=wk(e,c,new im(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Tk(0,t.serverCache.getNode().getImmediateChild(n),r);c=wk(e,c,new im(n),h,i,o,a,s)}})),c}var Ck,Ik=function(){function e(t,n){ni(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,o=new hg(i.getIndex()),a=(r=i).loadsAllData()?new hg(r.getIndex()):r.hasLimit()?new dg(r):new fg(r);this.processor_=function(e){return{filter:e}}(a);var s=n.serverCache,u=n.eventCache,c=o.updateFullNode($m.EMPTY_NODE,s.getNode(),null),l=a.updateFullNode($m.EMPTY_NODE,u.getNode(),null),h=new Lg(c,s.isFullyInitialized(),o.filtersNodes()),f=new Lg(l,u.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ug(f,h),this.eventGenerator_=new Mg(this.query_)}return x(e,[{key:"query",get:function(){return this.query_}}]),e}();function Rk(e,t){var n=Bg(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!dm(t)&&!n.getImmediateChild(am(t)).isEmpty())?n.getChild(t):null}function Nk(e){return 0===e.eventRegistrations_.length}function Pk(e,t,n){var r=[];if(n){lo(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function Ak(e,t,n,r){t.type===Eg.MERGE&&null!==t.source.queryId&&(lo(Bg(e.viewCache_),"We should always have a full cache before handling merges"),lo(Vg(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=bk(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,lo(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),lo(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),lo(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Ok(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Ok(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Fg(e,i,"child_removed",t,r,n),Fg(e,i,"child_added",t,r,n),Fg(e,i,"child_moved",o,r,n),Fg(e,i,"child_changed",t,r,n),Fg(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Dk,Lk=x((function e(){ni(this,e),this.views=new Map}));function Mk(e,t,n,r){var i=t.source.queryId;if(null!==i){var o=e.views.get(i);return lo(null!=o,"SyncTree gave us an op for an invalid query."),Ak(o,t,n,r)}var a,s=[],u=Zi(e.views.values());try{for(u.s();!(a=u.n()).done;){var c=a.value;s=s.concat(Ak(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Fk(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=ck(n,i?r:null),u=!1;s?u=!0:r instanceof $m?(s=lk(n,r),u=!1):(s=$m.EMPTY_NODE,u=!1);var c=Ug(new Lg(s,u,!1),new Lg(r,i,!1));return new Ik(t,c)}return a}function Uk(e,t,n,r,i,o){var a=Fk(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Hm,(function(e,t){r.push(ug(e,t))})),n.isFullyInitialized()&&r.push(sg(n.getNode())),Ok(e,r,n.getNode(),t)}(a,n)}function jk(e,t,n,r){var i=t._queryIdentifier,o=[],a=[],s=Wk(e);if("default"===i){var u,c=Zi(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];a=a.concat(Pk(d,n,r)),Nk(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(a=a.concat(Pk(p,n,r)),Nk(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return s&&!Wk(e)&&o.push(new(lo(Ck,"Reference.ts has not been loaded"),Ck)(t._repo,t._path)),{removed:o,events:a}}function qk(e){var t,n=[],r=Zi(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function Vk(e,t){var n,r=null,i=Zi(e.views.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r||Rk(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}function Bk(e,t){if(t._queryParams.loadsAllData())return Hk(e);var n=t._queryIdentifier;return e.views.get(n)}function zk(e,t){return null!=Bk(e,t)}function Wk(e){return null!=Hk(e)}function Hk(e){var t,n=Zi(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Kk=1,Gk=x((function e(t){ni(this,e),this.listenProvider_=t,this.syncPointTree_=new Wg(null),this.pendingWriteTree_={visibleWrites:Hg.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Qk(e,t,n,r,i){return function(e,t,n,r,i){lo(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Kg(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?nb(e,new Og({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Yk(e,t,n,r){!function(e,t,n,r){lo(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Gg(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Wg.fromObject(n);return nb(e,new Dg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Jk(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=rk(e.pendingWriteTree_,t),i=ik(e.pendingWriteTree_,t);if(i){var o=new Wg(null);return null!=r.snap?o=o.set(om(),!0):Ty(r.children,(function(e){o=o.set(new im(e),!0)})),nb(e,new Pg(r.path,o,n))}return[]}function $k(e,t,n){return nb(e,new Og({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Xk(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||zk(o,t))){var s=jk(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Wk(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Wk(t))return[Hk(t)];var r=[];return t&&(r=qk(t)),Ty(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=ob(e,p);e.listenProvider_.startListening(hb(v),ab(e,v),y.hashFn,y.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(hb(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(sb(t));e.listenProvider_.stopListening(hb(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=sb(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function Zk(e,t,n){var r=t._path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=pm(e,r);i=i||Vk(t,n),o=o||Wk(t)}));var a,s=e.syncPointTree_.get(r);(s?(o=o||Wk(s),i=i||Vk(s,om())):(s=new Lk,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=$m.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Vk(t,om());n&&(i=i.updateImmediateChild(e,n))})));var u=zk(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=sb(t);lo(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=Kk++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=Uk(s,t,n,nk(e.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Bk(s,t);h=h.concat(function(e,t,n){var r=t._path,i=ab(e,t),o=ob(e,n),a=e.listenProvider_.startListening(hb(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)lo(!Wk(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!dm(e)&&t&&Wk(t))return[Hk(t).query];var r=[];return t&&(r=r.concat(qk(t).map((function(e){return e.query})))),Ty(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(hb(l),ab(e,l))}return a}(e,t,f))}return h}function eb(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Vk(n,pm(e,t));if(r)return r}));return uk(r,t,i,n,!0)}function tb(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=pm(e,n);r=r||Vk(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Vk(i,om()):(i=new Lk,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new Lg(r,!0,!1):null;return function(e){return Vg(e.viewCache_)}(Fk(i,t,nk(e.pendingWriteTree_,t._path),o?a.getNode():$m.EMPTY_NODE,o))}function nb(e,t){return rb(t,e.syncPointTree_,null,nk(e.pendingWriteTree_,om()))}function rb(e,t,n,r){if(dm(e.path))return ib(e,t,n,r);var i=t.get(om());null==n&&null!=i&&(n=Vk(i,om()));var o=[],a=am(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=vk(r,a);o=o.concat(rb(s,u,c,l))}return i&&(o=o.concat(Mk(i,e,r,n))),o}function ib(e,t,n,r){var i=t.get(om());null==n&&null!=i&&(n=Vk(i,om()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=vk(r,t),u=e.operationForChild(t);u&&(o=o.concat(ib(u,i,a,s)))})),i&&(o=o.concat(Mk(i,e,r,n))),o}function ob(e,t){var n=t.query,r=ab(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||$m.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=ub(e,n);if(r){var i=cb(r),o=i.path,a=i.queryId,s=pm(o,t);return lb(e,o,new Ag(Rg(a),s))}return[]}(e,n._path,r):function(e,t){return nb(e,new Ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Xk(e,n,null,i)}}}function ab(e,t){var n=sb(t);return e.queryToTagMap.get(n)}function sb(e){return e._path.toString()+"$"+e._queryIdentifier}function ub(e,t){return e.tagToQueryMap.get(t)}function cb(e){var t=e.indexOf("$");return lo(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new im(e.substr(0,t))}}function lb(e,t,n){var r=e.syncPointTree_.get(t);return lo(r,"Missing sync point for query tag that we're tracking"),Mk(r,n,nk(e.pendingWriteTree_,t),null)}function hb(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(lo(Dk,"Reference.ts has not been loaded"),Dk)(e._repo,e._path):e}var fb=function(){function e(t){ni(this,e),this.node_=t}return x(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),db=function(){function e(t,n){ni(this,e),this.syncTree_=t,this.path_=n}return x(e,[{key:"getImmediateChild",value:function(t){var n=fm(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return eb(this.syncTree_,this.path_)}}]),e}(),pb=function(e,t,n){return e&&"object"===typeof e?(lo(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?vb(e[".sv"],t,n):"object"===typeof e[".sv"]?yb(e[".sv"],t):void lo(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},vb=function(e,t,n){if("timestamp"===e)return n.timestamp;lo(!1,"Unexpected server value: "+e)},yb=function(e,t,n){e.hasOwnProperty("increment")||lo(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&lo(!1,"Unexpected increment value: "+r);var i=t.node();if(lo(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},mb=function(e,t,n,r){return kb(t,new db(n,e),r)},gb=function(e,t,n){return kb(e,new fb(t),n)};function kb(e,t,n){var r,i=e.getPriority().val(),o=pb(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=pb(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Vm(s,Zm(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Vm(o))),u.forEachChild(Hm,(function(e,i){var o=kb(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var bb=x((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};ni(this,e),this.name=t,this.parent=n,this.node=r}));function _b(e,t){for(var n=t instanceof im?t:new im(t),r=e,i=am(n);null!==i;){var o=Uo(r.node.children,i)||{children:{},childCount:0};r=new bb(i,r,o),i=am(n=um(n))}return r}function wb(e){return e.node.value}function xb(e,t){e.node.value=t,Ib(e)}function Sb(e){return e.node.childCount>0}function Tb(e,t){Ty(e.node.children,(function(n,r){t(new bb(n,e,r))}))}function Eb(e,t,n,r){n&&!r&&t(e),Tb(e,(function(e){Eb(e,t,!0,r)})),n&&r&&t(e)}function Cb(e){return new im(null===e.parent?e.name:Cb(e.parent)+"/"+e.name)}function Ib(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===wb(e)&&!Sb(e)}(n),i=Fo(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ib(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ib(e))}(e.parent,e.name,e)}var Rb=/[\[\].#$\/\u0000-\u001F\u007F]/,Nb=/[\[\].#$\u0000-\u001F\u007F]/,Pb=10485760,Ab=function(e){return"string"===typeof e&&0!==e.length&&!Rb.test(e)},Ob=function(e){return"string"===typeof e&&0!==e.length&&!Nb.test(e)},Db=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!my(e)||e&&"object"===typeof e&&Fo(e,".sv")},Lb=function(e,t,n,r){r&&void 0===t||Mb($o(e,"value"),t,n)},Mb=function e(t,n,r){var i=r instanceof im?new gm(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+bm(i));if("function"===typeof n)throw new Error(t+"contains a function "+bm(i)+" with contents = "+n.toString());if(my(n))throw new Error(t+"contains "+n.toString()+" "+bm(i));if("string"===typeof n&&n.length>Pb/3&&ea(n)>Pb)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+bm(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,a=!1;if(Ty(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Ab(n)))throw new Error(t+" contains an invalid key ("+n+") "+bm(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ea(t),km(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ea(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),o&&a)throw new Error(t+' contains ".value" child '+bm(i)+" in addition to actual children.")}},Fb=function(e,t,n,r){if(!r||void 0!==t){var i=$o(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];Ty(t,(function(e,t){var r=new im(e);if(Mb(i,t,fm(n,r)),".priority"===cm(r)&&!Db(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=lm(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ab(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(vm);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&mm(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Ub=function(e,t,n){if(!n||void 0!==t){if(my(t))throw new Error($o(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Db(t))throw new Error($o(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jb=function(e,t,n,r){if((!r||void 0!==n)&&!Ab(n))throw new Error($o(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qb=function(e,t,n,r){if((!r||void 0!==n)&&!Ob(n))throw new Error($o(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vb=function(e,t){if(".info"===am(t))throw new Error(e+" failed = Can't modify data under /.info/")},Bb=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ab(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ob(e)}(n))throw new Error($o(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zb=x((function e(){ni(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Wb(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||ym(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Hb(e,t,n){Wb(e,n),Gb(e,(function(e){return ym(e,t)}))}function Kb(e,t,n){Wb(e,n),Gb(e,(function(e){return mm(e,t)||mm(t,e)}))}function Gb(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Qb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Qb(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();cy&&fy("event: "+n.toString()),Py(r)}}}var Yb="repo_interrupt",Jb=function(){function e(t,n,r,i){ni(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wg(),this.transactionQueueTree_=new bb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return x(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function $b(e,t,n){if(e.stats_=Hy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new bg(e.repoInfo_,(function(t,n,r,i){e_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return t_(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Lo(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new xm(e.repoInfo_,t,(function(t,n,r,i){e_(e,t,n,r,i)}),(function(t){t_(e,t)}),(function(t){!function(e,t){Ty(t,(function(t,n){n_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Wy[n]||(Wy[n]=t()),Wy[n]}(e.repoInfo_,(function(){return new Ig(e.stats_,e.server_)})),e.infoData_=new _g,e.infoSyncTree_=new Gk({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=$k(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),n_(e,"connected",!1),e.serverSyncTree_=new Gk({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Kb(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Xb(e){var t=e.infoData_.getNode(new im(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Zb(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:Xb(e)})}function e_(e,t,n,r,i){e.dataUpdateCount++;var o=new im(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=qo(n,(function(e){return Zm(e)}));a=function(e,t,n,r){var i=ub(e,r);if(i){var o=cb(i),a=o.path,s=o.queryId,u=pm(a,t),c=Wg.fromObject(n);return lb(e,a,new Dg(Rg(s),u,c))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=Zm(n);a=function(e,t,n,r){var i=ub(e,r);if(null!=i){var o=cb(i),a=o.path,s=o.queryId,u=pm(a,t);return lb(e,a,new Og(Rg(s),u,n))}return[]}(e.serverSyncTree_,o,u,i)}else if(r){var c=qo(n,(function(e){return Zm(e)}));a=function(e,t,n){var r=Wg.fromObject(n);return nb(e,new Dg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{var l=Zm(n);a=$k(e.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=p_(e,o)),Kb(e.eventQueue_,h,a)}function t_(e,t){n_(e,"connected",t),!1===t&&function(e){c_(e,"onDisconnectEvents");var t=Zb(e),n=wg();Tg(e.onDisconnect_,om(),(function(r,i){var o=mb(r,i,e.serverSyncTree_,t);xg(n,r,o)}));var r=[];Tg(n,om(),(function(t,n){r=r.concat($k(e.serverSyncTree_,t,n));var i=k_(e,t);p_(e,i)})),e.onDisconnect_=wg(),Kb(e.eventQueue_,om(),r)}(e)}function n_(e,t,n){var r=new im("/.info/"+t),i=Zm(n);e.infoData_.updateSnapshot(r,i);var o=$k(e.infoSyncTree_,r,i);Kb(e.eventQueue_,r,o)}function r_(e){return e.nextWriteId_++}function i_(e,t,n,r,i){c_(e,"set",{path:t.toString(),value:n,priority:r});var o=Zb(e),a=Zm(n,r),s=eb(e.serverSyncTree_,t),u=gb(a,s,o),c=r_(e),l=Qk(e.serverSyncTree_,t,u,c,!0);Wb(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||yy("set at "+t+" failed: "+n);var a=Jk(e.serverSyncTree_,c,!o);Kb(e.eventQueue_,t,a),l_(e,i,n,r)}));var h=k_(e,t);p_(e,h),Kb(e.eventQueue_,h,[])}function o_(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Sg(e.onDisconnect_,t),l_(e,n,r,i)}))}function a_(e,t,n,r){var i=Zm(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&xg(e.onDisconnect_,t,i),l_(e,r,n,o)}))}function s_(e,t,n){var r;r=".info"===am(t._path)?Xk(e.infoSyncTree_,t,n):Xk(e.serverSyncTree_,t,n),Hb(e.eventQueue_,t._path,r)}function u_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Yb)}function c_(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];fy.apply(void 0,[t].concat(r))}function l_(e,t,n,r){t&&Py((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function h_(e,t,n){return eb(e.serverSyncTree_,t,n)||$m.EMPTY_NODE}function f_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||g_(e,t),wb(t)){var n=y_(e,t);lo(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&d_(e,Cb(t),n)}else Sb(t)&&Tb(t,(function(t){f_(e,t)}))}function d_(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=h_(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];lo(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=pm(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){c_(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(Jk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);g_(e,_b(e.transactionQueueTree_,t)),f_(e,e.transactionQueueTree_),Kb(e.eventQueue_,t,i);for(var u=0;u<o.length;u++)Py(o[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{yy("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}p_(e,t)}}),a)}function p_(e,t){var n=v_(e,t),r=Cb(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})),a=o.map((function(e){return e.currentWriteId})),s=function(o){var s,u=t[o],c=pm(n,u.path),l=!1,h=void 0;if(lo(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Jk(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Jk(e.serverSyncTree_,u.currentWriteId,!0));else{var f=h_(e,u.path,a);u.currentInputSnapshot=f;var d=t[o].update(f.val());if(void 0!==d){Mb("transaction failed: Data returned ",d,u.path);var p=Zm(d);"object"===typeof d&&null!=d&&Fo(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=Zb(e),m=gb(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=r_(e),a.splice(a.indexOf(v),1),i=(i=i.concat(Qk(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Jk(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Jk(e.serverSyncTree_,u.currentWriteId,!0))}Kb(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,s=t[o].unwatcher,setTimeout(s,Math.floor(0)),t[o].onComplete&&("nodata"===h?r.push((function(){return t[o].onComplete(null,!1,t[o].currentInputSnapshot)})):r.push((function(){return t[o].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);g_(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Py(r[c]);f_(e,e.transactionQueueTree_)}(e,y_(e,n),r),r}function v_(e,t){var n,r=e.transactionQueueTree_;for(n=am(t);null!==n&&void 0===wb(r);)r=_b(r,n),n=am(t=um(t));return r}function y_(e,t){var n=[];return m_(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function m_(e,t,n){var r=wb(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tb(t,(function(t){m_(e,t,n)}))}function g_(e,t){var n=wb(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,xb(t,n.length>0?n:void 0)}Tb(t,(function(t){g_(e,t)}))}function k_(e,t){var n=Cb(v_(e,t)),r=_b(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){b_(e,t)})),b_(e,r),Eb(r,(function(t){b_(e,t)})),n}function b_(e,t){var n=wb(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(lo(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(lo(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Jk(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?xb(t,void 0):n.length=o+1,Kb(e.eventQueue_,Cb(t),i);for(var s=0;s<r.length;s++)Py(r[s])}}var __=function(e,t){var n=w_(e),r=n.namespace;"firebase.com"===n.domain&&vy(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||vy("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new qy(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new im(n.pathString)}},w_=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Zi(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):yy("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(a){r.e(a)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},x_=function(){function e(t,n,r,i){ni(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return x(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Lo(this.snapshot.exportVal())}}]),e}(),S_=function(){function e(t,n,r){ni(this,e),this.eventRegistration=t,this.error=n,this.path=r}return x(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),T_=function(){function e(t,n){ni(this,e),this.snapshotCallback=t,this.cancelCallback=n}return x(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return lo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),E_=function(){function e(t,n){ni(this,e),this._repo=t,this._path=n}return x(e,[{key:"cancel",value:function(){var e=new bo;return o_(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Vb("OnDisconnect.remove",this._path);var e=new bo;return a_(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Vb("OnDisconnect.set",this._path),Lb("OnDisconnect.set",e,this._path,!1);var t=new bo;return a_(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Vb("OnDisconnect.setWithPriority",this._path),Lb("OnDisconnect.setWithPriority",e,this._path,!1),Ub("OnDisconnect.setWithPriority",t,!1);var n=new bo;return function(e,t,n,r,i){var o=Zm(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&xg(e.onDisconnect_,t,o),l_(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Vb("OnDisconnect.update",this._path),Fb("OnDisconnect.update",e,this._path,!1);var t=new bo;return function(e,t,n,r){if(jo(n))return fy("onDisconnect().update() called with empty data.  Don't do anything."),void l_(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&Ty(n,(function(n,r){var i=Zm(r);xg(e.onDisconnect_,fm(t,n),i)})),l_(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),C_=function(){function e(t,n,r,i){ni(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return x(e,[{key:"key",get:function(){return dm(this._path)?null:cm(this._path)}},{key:"ref",get:function(){return new P_(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=kg(this._queryParams),t=xy(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return kg(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ta(t))instanceof e))return!1;var n=this._repo===t._repo,r=ym(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function I_(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function R_(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Im){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==gy)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==ky)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Hm){if(null!=t&&!Db(t)||null!=n&&!Db(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(lo(e.getIndex()instanceof eg||e.getIndex()===ng,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function N_(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var P_=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,r,new pg,!1)}return x(n,[{key:"parent",get:function(){var e=hm(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(C_),A_=function(){function e(t,n,r){ni(this,e),this._node=t,this.ref=n,this._index=r}return x(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new im(t),r=L_(this.ref,t);return new e(this._node.getChild(n),r,Hm)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,L_(n.ref,r),Hm))}))}},{key:"hasChild",value:function(e){var t=new im(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function O_(e,t){return(e=ta(e))._checkNotDeleted("ref"),void 0!==t?L_(e._root,t):e._root}function D_(e,t){(e=ta(e))._checkNotDeleted("refFromURL");var n=__(t,e._repo.repoInfo_.nodeAdmin);Bb("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||vy("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),O_(e,n.path.toString())}function L_(e,t){var n,r,i,o;return null===am((e=ta(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qb(n,r,i,o)):qb("child","path",t,!1),new P_(e._repo,fm(e._path,t))}function M_(e,t){e=ta(e),Vb("push",e._path),Lb("push",t,e._path,!0);var n,r=Xb(e._repo),i=ig(r),o=L_(e,i),a=L_(e,i);return n=null!=t?U_(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function F_(e){return Vb("remove",e._path),U_(e,null)}function U_(e,t){e=ta(e),Vb("set",e._path),Lb("set",t,e._path,!1);var n=new bo;return i_(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function j_(e,t){e=ta(e),Vb("setPriority",e._path),Ub("setPriority",t,!1);var n=new bo;return i_(e._repo,fm(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function q_(e,t,n){if(Vb("setWithPriority",e._path),Lb("setWithPriority",t,e._path,!1),Ub("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new bo;return i_(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function V_(e,t){Fb("update",t,e._path,!1);var n=new bo;return function(e,t,n,r){c_(e,"update",{path:t.toString(),value:n});var i=!0,o=Zb(e),a={};if(Ty(n,(function(n,r){i=!1,a[n]=mb(fm(t,n),Zm(r),e.serverSyncTree_,o)})),i)fy("update() called with empty data.  Don't do anything."),l_(0,r,"ok",void 0);else{var s=r_(e),u=Yk(e.serverSyncTree_,t,a,s);Wb(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||yy("update at "+t+" failed: "+n);var a=Jk(e.serverSyncTree_,s,!o),u=a.length>0?p_(e,t):t;Kb(e.eventQueue_,u,a),l_(0,r,n,i)})),Ty(n,(function(n){var r=k_(e,fm(t,n));p_(e,r)})),Kb(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function B_(e){return function(e,t){var n=tb(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=Zm(n).withIndex(t._queryParams.getIndex()),i=$k(e.serverSyncTree_,t._path,r);return Hb(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return c_(e,"get for query "+Lo(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=ta(e))._repo,e).then((function(t){return new A_(t,new P_(e._repo,e._path),e._queryParams.getIndex())}))}var z_=function(){function e(t){ni(this,e),this.callbackContext=t}return x(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new x_("value",this,new A_(e.snapshotNode,new P_(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new S_(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),W_=function(){function e(t,n){ni(this,e),this.eventType=t,this.callbackContext=n}return x(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new S_(this,e,t):null}},{key:"createEvent",value:function(e,t){lo(null!=e.childName,"Child events should have a childName.");var n=L_(new P_(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new x_(e.type,this,new A_(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function H_(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){s_(e._repo,e,c),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new T_(n,o||void 0),c="value"===t?new z_(u):new W_(t,u);return function(e,t,n){var r;r=".info"===am(t._path)?Zk(e.infoSyncTree_,t,n):Zk(e.serverSyncTree_,t,n),Hb(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return s_(e._repo,e,c)}}function K_(e,t,n,r){return H_(e,"value",t,n,r)}function G_(e,t,n,r){return H_(e,"child_added",t,n,r)}function Q_(e,t,n,r){return H_(e,"child_changed",t,n,r)}function Y_(e,t,n,r){return H_(e,"child_moved",t,n,r)}function J_(e,t,n,r){return H_(e,"child_removed",t,n,r)}function $_(e,t,n){var r=null,i=n?new T_(n):null;"value"===t?r=new z_(i):t&&(r=new W_(t,i)),s_(e._repo,e,r)}var X_=x((function e(){ni(this,e)})),Z_=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this))._value=e,i._key=r,i}return x(n,[{key:"_apply",value:function(e){Lb("endAt",this._value,e._path,!0);var t=yg(e._queryParams,this._value,this._key);if(N_(t),R_(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C_(e._repo,e._path,t,e._orderByCalled)}}]),n}(X_);function ew(e,t){return jb("endAt","key",t,!0),new Z_(e,t)}var tw=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this))._value=e,i._key=r,i}return x(n,[{key:"_apply",value:function(e){Lb("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Im?("string"===typeof t&&(t=ag(t)),r=yg(e,t,n)):r=yg(e,t,null==n?gy:ag(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(N_(t),R_(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C_(e._repo,e._path,t,e._orderByCalled)}}]),n}(X_);function nw(e,t){return jb("endBefore","key",t,!0),new tw(e,t)}var rw=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this))._value=e,i._key=r,i}return x(n,[{key:"_apply",value:function(e){Lb("startAt",this._value,e._path,!0);var t=vg(e._queryParams,this._value,this._key);if(N_(t),R_(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new C_(e._repo,e._path,t,e._orderByCalled)}}]),n}(X_);function iw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return jb("startAt","key",t,!0),new rw(e,t)}var ow=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this))._value=e,i._key=r,i}return x(n,[{key:"_apply",value:function(e){Lb("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Im?("string"===typeof t&&(t=og(t)),r=vg(e,t,n)):r=vg(e,t,null==n?ky:og(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(N_(t),R_(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new C_(e._repo,e._path,t,e._orderByCalled)}}]),n}(X_);function aw(e,t){return jb("startAfter","key",t,!0),new ow(e,t)}var sw=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this))._limit=e,r}return x(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new C_(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(X_);function uw(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sw(e)}var cw=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this))._limit=e,r}return x(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new C_(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(X_);function lw(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new cw(e)}var hw=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this))._path=e,r}return x(n,[{key:"_apply",value:function(e){I_(e,"orderByChild");var t=new im(this._path);if(dm(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new eg(t),r=mg(e._queryParams,n);return R_(r),new C_(e._repo,e._path,r,!0)}}]),n}(X_);function fw(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qb("orderByChild","path",e,!1),new hw(e)}var dw=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"_apply",value:function(e){I_(e,"orderByKey");var t=mg(e._queryParams,Im);return R_(t),new C_(e._repo,e._path,t,!0)}}]),n}(X_);function pw(){return new dw}var vw=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"_apply",value:function(e){I_(e,"orderByPriority");var t=mg(e._queryParams,Hm);return R_(t),new C_(e._repo,e._path,t,!0)}}]),n}(X_);function yw(){return new vw}var mw=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"_apply",value:function(e){I_(e,"orderByValue");var t=mg(e._queryParams,ng);return R_(t),new C_(e._repo,e._path,t,!0)}}]),n}(X_);function gw(){return new mw}var kw=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this))._value=e,i._key=r,i}return x(n,[{key:"_apply",value:function(e){if(Lb("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Z_(this._value,this._key)._apply(new rw(this._value,this._key)._apply(e))}}]),n}(X_);function bw(e,t){return jb("equalTo","key",t,!0),new kw(e,t)}function _w(e){for(var t=ta(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];t=s._apply(t)}return t}!function(e){lo(!Ck,"__referenceConstructor has already been defined"),Ck=e}(P_),function(e){lo(!Dk,"__referenceConstructor has already been defined"),Dk=e}(P_);var ww={},xw=!1;function Sw(e,t,n,r){e.repoInfo_=new qy("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function Tw(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||vy("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fy("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var a,s=__(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://".concat(c,"?ns=").concat(u.namespace),u=(s=__(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new Ly(Ly.OWNER):new Dy(e.name,e.options,t);Bb("Invalid Firebase Database URL",s),dm(s.path)||vy("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=ww[t.name];i||(i={},ww[t.name]=i);var o=i[e.toURLString()];o&&vy("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Jb(e,xw,n,r),i[e.toURLString()]=o,o}(u,e,l,new Oy(e.name,n));return new Ew(h,e)}var Ew=function(){function e(t,n){ni(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return x(e,[{key:"_repo",get:function(){return this._instanceStarted||($b(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new P_(this._repo,om())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=ww[t];n&&n[e.key]===e||vy("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),u_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&vy("Cannot call "+e+" on a deleted database.")}}]),e}();function Cw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ta(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&vy("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vy('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ly(Ly.OWNER);else if(r.mockUserToken){var a="string"===typeof r.mockUserToken?r.mockUserToken:_o(r.mockUserToken,e.app.options.projectId);o=new Ly(a)}Sw(i,t,n,o)}function Iw(e){(e=ta(e))._checkNotDeleted("goOffline"),u_(e._repo)}function Rw(e){var t;(e=ta(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Yb)}function Nw(e,t){hy(e,t)}var Pw={".sv":"timestamp"};var Aw=function(){function e(t,n){ni(this,e),this.committed=t,this.snapshot=n}return x(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Ow(e,t,n){var r;if(e=ta(e),Vb("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new bo,a=K_(e,(function(){}));return function(e,t,n,r,i,o){c_(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:ay(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=h_(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Mb("transaction failed: Data returned ",u,a.path),a.status=0;var c,l=_b(e.transactionQueueTree_,t),h=wb(l)||[];h.push(a),xb(l,h),"object"===typeof u&&null!==u&&Fo(u,".priority")?(c=Uo(u,".priority"),lo(Db(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(eb(e.serverSyncTree_,t)||$m.EMPTY_NODE).getPriority().val();var f=Zb(e),d=Zm(u,c),p=gb(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=r_(e);var v=Qk(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);Kb(e.eventQueue_,t,v),f_(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new A_(r,new P_(e._repo,e._path),Hm),o.resolve(new Aw(n,i)))}),a,i),o.promise}xm.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},xm.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Zv(La),Ea(new na("database",(function(e,t){var n=t.instanceIdentifier;return Tw(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Va(Jv,$v,e),Va(Jv,$v,"esm2017")}();var Dw=new va("@firebase/database-compat"),Lw=function(e){var t="FIREBASE WARNING: "+e;Dw.warn(t)},Mw=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error($o(e,t)+"must be a boolean.")},Fw=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error($o(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Uw=function(){function e(t){ni(this,e),this._delegate=t}return x(e,[{key:"cancel",value:function(e){Jo("OnDisconnect.cancel",0,1,arguments.length),Xo("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Jo("OnDisconnect.remove",0,1,arguments.length),Xo("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Jo("OnDisconnect.set",1,2,arguments.length),Xo("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Jo("OnDisconnect.setWithPriority",2,3,arguments.length),Xo("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Jo("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Lw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xo("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),jw=function(){function e(t,n){ni(this,e),this.committed=t,this.snapshot=n}return x(e,[{key:"toJSON",value:function(){return Jo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),qw=function(){function e(t,n){ni(this,e),this._database=t,this._delegate=n}return x(e,[{key:"val",value:function(){return Jo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Jo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Jo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Jo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Jo("DataSnapshot.child",0,1,arguments.length),t=String(t),qb("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Jo("DataSnapshot.hasChild",1,1,arguments.length),qb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Jo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Jo("DataSnapshot.forEach",1,1,arguments.length),Xo("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Jo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Jo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Jo("DataSnapshot.ref",0,0,arguments.length),new Bw(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Vw=function(){function e(t,n){ni(this,e),this.database=t,this._delegate=n}return x(e,[{key:"on",value:function(t,n,r,i){var o,a=this;Jo("Query.on",2,4,arguments.length),Xo("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new qw(a.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return K_(this._delegate,u,c),n;case"child_added":return G_(this._delegate,u,c),n;case"child_removed":return J_(this._delegate,u,c),n;case"child_changed":return Q_(this._delegate,u,c),n;case"child_moved":return Y_(this._delegate,u,c),n;default:throw new Error($o("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Jo("Query.off",0,3,arguments.length),Fw("Query.off",e,!0),Xo("Query.off","callback",t,!0),Zo("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,$_(this._delegate,e,r)}else $_(this._delegate,e)}},{key:"get",value:function(){var e=this;return B_(this._delegate).then((function(t){return new qw(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var o=this;Jo("Query.once",1,4,arguments.length),Xo("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new bo,u=function(e,t){var r=new qw(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":K_(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":G_(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":J_(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":Q_(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Y_(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error($o("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Jo("Query.limitToFirst",1,1,arguments.length),new e(this.database,_w(this._delegate,uw(t)))}},{key:"limitToLast",value:function(t){return Jo("Query.limitToLast",1,1,arguments.length),new e(this.database,_w(this._delegate,lw(t)))}},{key:"orderByChild",value:function(t){return Jo("Query.orderByChild",1,1,arguments.length),new e(this.database,_w(this._delegate,fw(t)))}},{key:"orderByKey",value:function(){return Jo("Query.orderByKey",0,0,arguments.length),new e(this.database,_w(this._delegate,pw()))}},{key:"orderByPriority",value:function(){return Jo("Query.orderByPriority",0,0,arguments.length),new e(this.database,_w(this._delegate,yw()))}},{key:"orderByValue",value:function(){return Jo("Query.orderByValue",0,0,arguments.length),new e(this.database,_w(this._delegate,gw()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jo("Query.startAt",0,2,arguments.length),new e(this.database,_w(this._delegate,iw(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jo("Query.startAfter",0,2,arguments.length),new e(this.database,_w(this._delegate,aw(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jo("Query.endAt",0,2,arguments.length),new e(this.database,_w(this._delegate,ew(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jo("Query.endBefore",0,2,arguments.length),new e(this.database,_w(this._delegate,nw(t,n)))}},{key:"equalTo",value:function(t,n){return Jo("Query.equalTo",1,2,arguments.length),new e(this.database,_w(this._delegate,bw(t,n)))}},{key:"toString",value:function(){return Jo("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Jo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Jo("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Bw(this.database,new P_(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Xo(e,"cancel",r.cancel,!0),r.context=n,Zo(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error($o(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Bw=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,new C_(r._repo,r._path,new pg,!1))).database=e,i._delegate=r,i}return x(n,[{key:"getKey",value:function(){return Jo("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Jo("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,L_(this._delegate,e))}},{key:"getParent",value:function(){Jo("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Jo("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Jo("Reference.set",1,2,arguments.length),Xo("Reference.set","onComplete",t,!0);var n=U_(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Jo("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Lw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vb("Reference.update",this._delegate._path),Xo("Reference.update","onComplete",t,!0);var i=V_(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Jo("Reference.setWithPriority",2,3,arguments.length),Xo("Reference.setWithPriority","onComplete",n,!0);var r=q_(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Jo("Reference.remove",0,1,arguments.length),Xo("Reference.remove","onComplete",e,!0);var t=F_(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;Jo("Reference.transaction",1,3,arguments.length),Xo("Reference.transaction","transactionUpdate",e,!1),Xo("Reference.transaction","onComplete",t,!0),Mw("Reference.transaction","applyLocally",n,!0);var i=Ow(this._delegate,e,{applyLocally:n}).then((function(e){return new jw(e.committed,new qw(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Jo("Reference.setPriority",1,2,arguments.length),Xo("Reference.setPriority","onComplete",t,!0);var n=j_(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Jo("Reference.push",0,2,arguments.length),Xo("Reference.push","onComplete",t,!0);var i=M_(this._delegate,e),o=i.then((function(e){return new n(r.database,e)}));t&&o.then((function(){return t(null)}),(function(e){return t(e)}));var a=new n(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a}},{key:"onDisconnect",value:function(){return Vb("Reference.onDisconnect",this._delegate._path),new Uw(new E_(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Vw),zw=function(){function e(t,n){var r=this;ni(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return x(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cw(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Jo("database.ref",0,1,arguments.length),e instanceof Bw){var t=D_(this._delegate,e.toString());return new Bw(this,t)}var n=O_(this._delegate,e);return new Bw(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";Jo(t,1,1,arguments.length);var n=D_(this._delegate,e);return new Bw(this,n)}},{key:"goOffline",value:function(){return Jo("database.goOffline",0,0,arguments.length),Iw(this._delegate)}},{key:"goOnline",value:function(){return Jo("database.goOnline",0,0,arguments.length),Rw(this._delegate)}}]),e}();zw.ServerValue={TIMESTAMP:Pw,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Ww=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;Zv(r);var u=new ia("auth-internal",new sa("database-standalone"));return u.setComponent(new na("auth-internal",(function(){return i}),"PRIVATE")),{instance:new zw(Tw(t,u,void 0,n,s),t),namespace:o}}}),Hw=zw.ServerValue;!function(e){e.INTERNAL.registerComponent(new na("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new zw(i,r)}),"PUBLIC").setServiceProps({Reference:Bw,Query:Vw,Database:zw,DataSnapshot:qw,enableLogging:Nw,INTERNAL:Ww,ServerValue:Hw}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.5")}(Ja);var Kw,Gw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Qw={},Yw=Yw||{},Jw=Gw||self;function $w(){}function Xw(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zw(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ex="closure_uid_"+(1e9*Math.random()>>>0),tx=0;function nx(e,t,n){return e.call.apply(e.bind,arguments)}function rx(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ix(e,t,n){return(ix=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nx:rx).apply(null,arguments)}function ox(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ax(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function sx(){this.s=this.s,this.o=this.o}var ux={};sx.prototype.s=!1,sx.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ex)&&e[ex]||(e[ex]=++tx)}(this);delete ux[e]}},sx.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cx=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},lx=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function hx(e){return Array.prototype.concat.apply([],arguments)}function fx(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function dx(e){return/^[\s\xa0]*$/.test(e)}var px,vx=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yx(e,t){return-1!=e.indexOf(t)}function mx(e,t){return e<t?-1:e>t?1:0}e:{var gx=Jw.navigator;if(gx){var kx=gx.userAgent;if(kx){px=kx;break e}}px=""}function bx(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _x(e){var t={};for(var n in e)t[n]=e[n];return t}var wx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xx(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<wx.length;o++)n=wx[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sx(e){return Sx[" "](e),e}Sx[" "]=$w;var Tx,Ex=yx(px,"Opera"),Cx=yx(px,"Trident")||yx(px,"MSIE"),Ix=yx(px,"Edge"),Rx=Ix||Cx,Nx=yx(px,"Gecko")&&!(yx(px.toLowerCase(),"webkit")&&!yx(px,"Edge"))&&!(yx(px,"Trident")||yx(px,"MSIE"))&&!yx(px,"Edge"),Px=yx(px.toLowerCase(),"webkit")&&!yx(px,"Edge");function Ax(){var e=Jw.document;return e?e.documentMode:void 0}e:{var Ox="",Dx=function(){var e=px;return Nx?/rv:([^\);]+)(\)|;)/.exec(e):Ix?/Edge\/([\d\.]+)/.exec(e):Cx?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Px?/WebKit\/(\S+)/.exec(e):Ex?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Dx&&(Ox=Dx?Dx[1]:""),Cx){var Lx=Ax();if(null!=Lx&&Lx>parseFloat(Ox)){Tx=String(Lx);break e}}Tx=Ox}var Mx,Fx={};function Ux(){return function(e){var t=Fx;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=vx(String(Tx)).split("."),n=vx("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=mx(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||mx(0==o[2].length,0==a[2].length)||mx(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(Jw.document&&Cx){var jx=Ax();Mx=jx||(parseInt(Tx,10)||void 0)}else Mx=void 0;var qx=Mx,Vx=function(){if(!Jw.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jw.addEventListener("test",$w,t),Jw.removeEventListener("test",$w,t)}catch(n){}return e}();function Bx(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function zx(e,t){if(Bx.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Nx){e:{try{Sx(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Wx[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zx.Z.h.call(this)}}Bx.prototype.h=function(){this.defaultPrevented=!0},ax(zx,Bx);var Wx={2:"touch",3:"pen",4:"mouse"};zx.prototype.h=function(){zx.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hx="closure_listenable_"+(1e6*Math.random()|0),Kx=0;function Gx(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Kx,this.ca=this.fa=!1}function Qx(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Yx(e){this.src=e,this.g={},this.h=0}function Jx(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=cx(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Qx(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $x(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Yx.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=$x(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Gx(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Xx="closure_lm_"+(1e6*Math.random()|0),Zx={};function eS(e,t,n,r,i){if(r&&r.once)return nS(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)eS(e,t[o],n,r,i);return null}return n=cS(n),e&&e[Hx]?e.N(t,n,Zw(r)?!!r.capture:!!r,i):tS(e,t,n,!1,r,i)}function tS(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Zw(i)?!!i.capture:!!i,s=sS(e);if(s||(e[Xx]=s=new Yx(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=aS;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Vx||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oS(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function nS(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)nS(e,t[o],n,r,i);return null}return n=cS(n),e&&e[Hx]?e.O(t,n,Zw(r)?!!r.capture:!!r,i):tS(e,t,n,!0,r,i)}function rS(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)rS(e,t[o],n,r,i);else r=Zw(r)?!!r.capture:!!r,n=cS(n),e&&e[Hx]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$x(o=e.g[t],n,r,i))&&(Qx(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=sS(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$x(t,n,r,i)),(n=-1<e?t[e]:null)&&iS(n))}function iS(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Hx])Jx(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oS(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sS(t))?(Jx(n,e),0==n.h&&(n.src=null,t[Xx]=null)):Qx(e)}}}function oS(e){return e in Zx?Zx[e]:Zx[e]="on"+e}function aS(e,t){if(e.ca)e=!0;else{t=new zx(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&iS(e),e=n.call(r,t)}return e}function sS(e){return(e=e[Xx])instanceof Yx?e:null}var uS="__closure_events_fn_"+(1e9*Math.random()>>>0);function cS(e){return"function"===typeof e?e:(e[uS]||(e[uS]=function(t){return e.handleEvent(t)}),e[uS])}function lS(){sx.call(this),this.i=new Yx(this),this.P=this,this.I=null}function hS(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Bx(t,e);else if(t instanceof Bx)t.target=t.target||e;else{var i=t;xx(t=new Bx(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=fS(a,r,!0,t)&&i}if(i=fS(a=t.g=e,r,!0,t)&&i,i=fS(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=fS(a=t.g=n[o],r,!1,t)&&i}function fS(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Jx(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ax(lS,sx),lS.prototype[Hx]=!0,lS.prototype.removeEventListener=function(e,t,n,r){rS(this,e,t,n,r)},lS.prototype.M=function(){if(lS.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qx(n[r]);delete t.g[e],t.h--}}this.I=null},lS.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},lS.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var dS=Jw.JSON.stringify;function pS(){var e=wS,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var vS,yS=function(){function e(){ni(this,e),this.h=this.g=null}return x(e,[{key:"add",value:function(e,t){var n=mS.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),mS=new(function(){function e(t,n){ni(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return x(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new gS}),(function(e){return e.reset()})),gS=function(){function e(){ni(this,e),this.next=this.g=this.h=null}return x(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function kS(e){Jw.setTimeout((function(){throw e}),0)}function bS(e,t){vS||function(){var e=Jw.Promise.resolve(void 0);vS=function(){e.then(xS)}}(),_S||(vS(),_S=!0),wS.add(e,t)}var _S=!1,wS=new yS;function xS(){for(var e;e=pS();){try{e.h.call(e.g)}catch(n){kS(n)}var t=mS;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_S=!1}function SS(e,t){lS.call(this),this.h=e||1,this.g=t||Jw,this.j=ix(this.kb,this),this.l=Date.now()}function TS(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ES(e,t,n){if("function"===typeof e)n&&(e=ix(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ix(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jw.setTimeout(e,t||0)}function CS(e){e.g=ES((function(){e.g=null,e.i&&(e.i=!1,CS(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ax(SS,lS),(Kw=SS.prototype).da=!1,Kw.S=null,Kw.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hS(this,"tick"),this.da&&(TS(this),this.start()))}},Kw.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kw.M=function(){SS.Z.M.call(this),TS(this),delete this.g};var IS=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return x(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:CS(this)}},{key:"M",value:function(){Xa(to(n.prototype),"M",this).call(this),this.g&&(Jw.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sx);function RS(e){sx.call(this),this.h=e,this.g={}}ax(RS,sx);var NS=[];function PS(e,t,n,r){Array.isArray(n)||(n&&(NS[0]=n.toString()),n=NS);for(var i=0;i<n.length;i++){var o=eS(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function AS(e){bx(e.g,(function(e,t){this.g.hasOwnProperty(t)&&iS(e)}),e),e.g={}}function OS(){this.g=!0}function DS(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return dS(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}RS.prototype.M=function(){RS.Z.M.call(this),AS(this)},RS.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},OS.prototype.Aa=function(){this.g=!1},OS.prototype.info=function(){};var LS={},MS=null;function FS(){return MS=MS||new lS}function US(e){Bx.call(this,LS.Ma,e)}function jS(e){var t=FS();hS(t,new US(t,e))}function qS(e,t){Bx.call(this,LS.STAT_EVENT,e),this.stat=t}function VS(e){var t=FS();hS(t,new qS(t,e))}function BS(e,t){Bx.call(this,LS.Na,e),this.size=t}function zS(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jw.setTimeout((function(){e()}),t)}LS.Ma="serverreachability",ax(US,Bx),LS.STAT_EVENT="statevent",ax(qS,Bx),LS.Na="timingevent",ax(BS,Bx);var WS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},HS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function KS(){}function GS(e){return e.h||(e.h=e.i())}function QS(){}KS.prototype.h=null;var YS,JS={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $S(){Bx.call(this,"d")}function XS(){Bx.call(this,"c")}function ZS(){}function eT(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new RS(this),this.P=nT,e=Rx?125:void 0,this.W=new SS(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tT}function tT(){this.i=null,this.g="",this.h=!1}ax($S,Bx),ax(XS,Bx),ax(ZS,KS),ZS.prototype.g=function(){return new XMLHttpRequest},ZS.prototype.i=function(){return{}},YS=new ZS;var nT=45e3,rT={},iT={};function oT(e,t,n){e.K=1,e.v=IT(wT(t)),e.s=n,e.U=!0,aT(e,null)}function aT(e,t){e.F=Date.now(),lT(e),e.A=wT(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),VT(n.h,"t",r),e.C=0,n=e.l.H,e.h=new tT,e.g=zE(e.l,n?t:null,!e.s),0<e.O&&(e.L=new IS(ix(e.Ia,e,e.g),e.O)),PS(e.V,e.g,"readystatechange",e.gb),t=e.H?_x(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),jS(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function sT(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function uT(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=cT(e,n))==iT){4==t&&(e.o=4,VS(14),i=!1),DS(e.j,e.m,null,"[Incomplete Response]");break}if(r==rT){e.o=4,VS(15),DS(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}DS(e.j,e.m,r,null),vT(e,r)}sT(e)&&r!=iT&&r!=rT&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,VS(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),LE(t),t.L=!0,VS(11))):(DS(e.j,e.m,n,"[Invalid Chunked Response]"),pT(e),dT(e))}function cT(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?iT:(n=Number(t.substring(n,r)),isNaN(n)?rT:(r+=1)+n>t.length?iT:(t=t.substr(r,n),e.C=r+n,t))}function lT(e){e.Y=Date.now()+e.P,hT(e,e.P)}function hT(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=zS(ix(e.eb,e),t)}function fT(e){e.B&&(Jw.clearTimeout(e.B),e.B=null)}function dT(e){0==e.l.G||e.I||UE(e.l,e)}function pT(e){fT(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,TS(e.W),AS(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function vT(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||YT(n.i,e)))if(n.I=e.N,!e.J&&YT(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;FE(n),EE(n)}DE(n),VS(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=zS(ix(n.ab,n),6e3));if(1>=QT(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else qE(n,11)}else if((e.J||n.g==e)&&FE(n),!dx(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(yx(l,"spdy")||yx(l,"quic")||yx(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(JT(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,CT(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=BE(r,r.H?r.la:null,r.W),d.J){$T(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(fT(p),lT(p)),r.g=d}else OE(r);0<n.l.length&&RE(n)}else"stop"!=o[0]&&"close"!=o[0]||qE(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?qE(n,7):TE(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}jS(4)}catch(o){}}function yT(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Xw(e)||"string"===typeof e)lx(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Xw(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Xw(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function mT(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof mT)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function gT(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];kT(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)kT(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function kT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Kw=eT.prototype).setTimeout=function(e){this.P=e},Kw.gb=function(e){e=e.target;var t=this.L;t&&3==bE(e)?t.l():this.Ia(e)},Kw.Ia=function(e){try{if(e==this.g)e:{var t=bE(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Rx||this.g&&(this.h.h||this.g.ga()||_E(this.g)))){this.I||4!=t||7==n||jS(8==n||0>=r?3:2),fT(this);var i=this.g.ba();this.N=i;t:if(sT(this)){var o=_E(this.g);e="";var a=o.length,s=4==bE(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pT(this),dT(this);var u="";break t}this.h.i=new Jw.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dx(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,VS(12),pT(this),dT(this);break e}DS(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vT(this,i)}this.U?(uT(this,t,u),Rx&&this.i&&3==t&&(PS(this.V,this.W,"tick",this.fb),this.W.start())):(DS(this.j,this.m,u,null),vT(this,u)),4==t&&pT(this),this.i&&!this.I&&(4==t?UE(this.l,this):(this.i=!1,lT(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,VS(12)):(this.o=0,VS(13)),pT(this),dT(this)}}}catch(t){}},Kw.fb=function(){if(this.g){var e=bE(this.g),t=this.g.ga();this.C<t.length&&(fT(this),uT(this,e,t),this.i&&4!=e&&lT(this))}},Kw.cancel=function(){this.I=!0,pT(this)},Kw.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(jS(3),VS(17)),pT(this),this.o=2,dT(this)):hT(this,this.Y-e)},(Kw=mT.prototype).R=function(){gT(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Kw.T=function(){return gT(this),this.g.concat()},Kw.get=function(e,t){return kT(this.h,e)?this.h[e]:t},Kw.set=function(e,t){kT(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Kw.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var bT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _T(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof _T){this.g=void 0!==t?t:e.g,xT(this,e.j),this.s=e.s,ST(this,e.i),TT(this,e.m),this.l=e.l,t=e.h;var n=new FT;n.i=t.i,t.g&&(n.g=new mT(t.g),n.h=t.h),ET(this,n),this.o=e.o}else e&&(n=String(e).match(bT))?(this.g=!!t,xT(this,n[1]||"",!0),this.s=RT(n[2]||""),ST(this,n[3]||"",!0),TT(this,n[4]),this.l=RT(n[5]||"",!0),ET(this,n[6]||"",!0),this.o=RT(n[7]||"")):(this.g=!!t,this.h=new FT(null,this.g))}function wT(e){return new _T(e)}function xT(e,t,n){e.j=n?RT(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ST(e,t,n){e.i=n?RT(t,!0):t}function TT(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ET(e,t,n){t instanceof FT?(e.h=t,function(e,t){t&&!e.j&&(UT(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(jT(this,t),VT(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=NT(t,LT)),e.h=new FT(t,e.g))}function CT(e,t,n){e.h.set(t,n)}function IT(e){return CT(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function RT(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function NT(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,PT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function PT(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_T.prototype.toString=function(){var e=[],t=this.j;t&&e.push(NT(t,AT,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(NT(t,AT,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(NT(n,"/"==n.charAt(0)?DT:OT,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",NT(n,MT)),e.join("")};var AT=/[#\/\?@]/g,OT=/[#\?:]/g,DT=/[#\?]/g,LT=/[#\?@]/g,MT=/#/g;function FT(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function UT(e){e.g||(e.g=new mT,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function jT(e,t){UT(e),t=BT(e,t),kT(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,kT((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&gT(e)))}function qT(e,t){return UT(e),t=BT(e,t),kT(e.g.h,t)}function VT(e,t,n){jT(e,t),0<n.length&&(e.i=null,e.g.set(BT(e,t),fx(n)),e.h+=n.length)}function BT(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kw=FT.prototype).add=function(e,t){UT(this),this.i=null,e=BT(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kw.forEach=function(e,t){UT(this),this.g.forEach((function(n,r){lx(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Kw.T=function(){UT(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Kw.R=function(e){UT(this);var t=[];if("string"===typeof e)qT(this,e)&&(t=hx(t,this.g.get(BT(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=hx(t,e[n])}return t},Kw.set=function(e,t){return UT(this),this.i=null,qT(this,e=BT(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kw.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Kw.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var zT=x((function e(t,n){ni(this,e),this.h=t,this.g=n}));function WT(e){this.l=e||KT,Jw.PerformanceNavigationTiming?e=0<(e=Jw.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jw.g&&Jw.g.Ea&&Jw.g.Ea()&&Jw.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HT,KT=10;function GT(e){return!!e.h||!!e.g&&e.g.size>=e.j}function QT(e){return e.h?1:e.g?e.g.size:0}function YT(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function JT(e,t){e.g?e.g.add(t):e.h=t}function $T(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function XT(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Zi(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return fx(e.i)}function ZT(){}function eE(){this.g=new ZT}function tE(e,t,n){var r=n||"";try{yT(e,(function(e,n){var i=e;Zw(e)&&(i=dS(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nE(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function rE(e){this.l=e.$b||null,this.j=e.ib||!1}function iE(e,t){lS.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=oE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}WT.prototype.cancel=function(){if(this.i=XT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Zi(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ZT.prototype.stringify=function(e){return Jw.JSON.stringify(e,void 0)},ZT.prototype.parse=function(e){return Jw.JSON.parse(e,void 0)},ax(rE,KS),rE.prototype.g=function(){return new iE(this.l,this.j)},rE.prototype.i=(HT={},function(){return HT}),ax(iE,lS);var oE=0;function aE(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function sE(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uE(e)}function uE(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kw=iE.prototype).open=function(e,t){if(this.readyState!=oE)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uE(this)},Kw.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Jw).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Kw.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sE(this)),this.readyState=oE},Kw.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uE(this)),this.g&&(this.readyState=3,uE(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Jw.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aE(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Kw.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?sE(this):uE(this),3==this.readyState&&aE(this)}},Kw.Ua=function(e){this.g&&(this.response=this.responseText=e,sE(this))},Kw.Ta=function(e){this.g&&(this.response=e,sE(this))},Kw.ha=function(){this.g&&sE(this)},Kw.setRequestHeader=function(e,t){this.v.append(e,t)},Kw.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kw.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(iE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var cE=Jw.JSON.parse;function lE(e){lS.call(this),this.headers=new mT,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hE,this.K=this.L=!1}ax(lE,lS);var hE="",fE=/^https?$/i,dE=["POST","PUT"];function pE(e){return"content-type"==e.toLowerCase()}function vE(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yE(e),gE(e)}function yE(e){e.D||(e.D=!0,hS(e,"complete"),hS(e,"error"))}function mE(e){if(e.h&&"undefined"!=typeof Yw&&(!e.C[1]||4!=bE(e)||2!=e.ba()))if(e.v&&4==bE(e))ES(e.Fa,0,e);else if(hS(e,"readystatechange"),4==bE(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(bT)[1]||null;if(!o&&Jw.self&&Jw.self.location){var a=Jw.self.location.protocol;o=a.substr(0,a.length-1)}i=!fE.test(o?o.toLowerCase():"")}t=i}if(t)hS(e,"complete"),hS(e,"success");else{e.m=6;try{var s=2<bE(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",yE(e)}}finally{gE(e)}}}function gE(e,t){if(e.g){kE(e);var n=e.g,r=e.C[0]?$w:null;e.g=null,e.C=null,t||hS(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function kE(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Jw.clearTimeout(e.A),e.A=null)}function bE(e){return e.g?e.g.readyState:0}function _E(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case hE:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function wE(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return bx(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):CT(e,t,n))}function xE(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function SE(e){this.za=0,this.l=[],this.h=new OS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xE("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xE("baseRetryDelayMs",5e3,e),this.$a=xE("retryDelaySeedMs",1e4,e),this.Ya=xE("forwardChannelMaxRetries",2,e),this.ra=xE("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new WT(e&&e.concurrentRequestLimit),this.Ca=new eE,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function TE(e){if(CE(e),3==e.G){var t=e.V++,n=wT(e.F);CT(n,"SID",e.J),CT(n,"RID",t),CT(n,"TYPE","terminate"),PE(e,n),(t=new eT(e,e.h,t,void 0)).K=2,t.v=IT(wT(n)),n=!1,Jw.navigator&&Jw.navigator.sendBeacon&&(n=Jw.navigator.sendBeacon(t.v.toString(),"")),!n&&Jw.Image&&((new Image).src=t.v,n=!0),n||(t.g=zE(t.l,null),t.g.ea(t.v)),t.F=Date.now(),lT(t)}VE(e)}function EE(e){e.g&&(LE(e),e.g.cancel(),e.g=null)}function CE(e){EE(e),e.u&&(Jw.clearTimeout(e.u),e.u=null),FE(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jw.clearTimeout(e.m),e.m=null)}function IE(e,t){e.l.push(new zT(e.Za++,t)),3==e.G&&RE(e)}function RE(e){GT(e.i)||e.m||(e.m=!0,bS(e.Ha,e),e.C=0)}function NE(e,t){var n;n=t?t.m:e.V++;var r=wT(e.F);CT(r,"SID",e.J),CT(r,"RID",n),CT(r,"AID",e.U),PE(e,r),e.o&&e.s&&wE(r,e.o,e.s),n=new eT(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=AE(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),JT(e.i,n),oT(n,r,t)}function PE(e,t){e.j&&yT({},(function(e,n){CT(t,n,e)}))}function AE(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ix(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{tE(l,a,"req"+c+"_")}catch(bC){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function OE(e){e.g||e.u||(e.Y=1,bS(e.Ga,e),e.A=0)}function DE(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=zS(ix(e.Ga,e),jE(e,e.A)),e.A++,!0)}function LE(e){null!=e.B&&(Jw.clearTimeout(e.B),e.B=null)}function ME(e){e.g=new eT(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=wT(e.oa);CT(t,"RID","rpc"),CT(t,"SID",e.J),CT(t,"CI",e.N?"0":"1"),CT(t,"AID",e.U),PE(e,t),CT(t,"TYPE","xmlhttp"),e.o&&e.s&&wE(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=IT(wT(t)),n.s=null,n.U=!0,aT(n,e)}function FE(e){null!=e.v&&(Jw.clearTimeout(e.v),e.v=null)}function UE(e,t){var n=null;if(e.g==t){FE(e),LE(e),e.g=null;var r=2}else{if(!YT(e.i,t))return;n=t.D,$T(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;hS(r=FS(),new BS(r,n,t,i)),RE(e)}else OE(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(QT(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=zS(ix(e.Ha,e,t),jE(e,e.C)),e.C++,!0))}(e,t)||2==r&&DE(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qE(e,5);break;case 4:qE(e,10);break;case 3:qE(e,6);break;default:qE(e,2)}}function jE(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function qE(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ix(e.jb,e);n||(n=new _T("//www.google.com/images/cleardot.gif"),Jw.location&&"http"==Jw.location.protocol||xT(n,"https"),IT(n)),function(e,t){var n=new OS;if(Jw.Image){var r=new Image;r.onload=ox(nE,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ox(nE,n,r,"TestLoadImage: error",!1,t),r.onabort=ox(nE,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ox(nE,n,r,"TestLoadImage: timeout",!1,t),Jw.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else VS(2);e.G=0,e.j&&e.j.va(t),VE(e),CE(e)}function VE(e){e.G=0,e.I=-1,e.j&&(0==XT(e.i).length&&0==e.l.length||(e.i.i.length=0,fx(e.l),e.l.length=0),e.j.ua())}function BE(e,t,n){var r=function(e){return e instanceof _T?wT(e):new _T(e,void 0)}(n);if(""!=r.i)t&&ST(r,t+"."+r.i),TT(r,r.m);else{var i=Jw.location;r=function(e,t,n,r){var i=new _T(null,void 0);return e&&xT(i,e),t&&ST(i,t),n&&TT(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&bx(e.aa,(function(e,t){CT(r,t,e)})),t=e.D,n=e.sa,t&&n&&CT(r,t,n),CT(r,"VER",e.ma),PE(e,r),r}function zE(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new lE(new rE({ib:!0})):new lE(e.qa)).L=e.H,t}function WE(){}function HE(){if(Cx&&!(10<=Number(qx)))throw Error("Environmental error: no available transport.")}function KE(e,t){lS.call(this),this.g=new SE(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!dx(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dx(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new YE(this)}function GE(e){$S.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function QE(){XS.call(this),this.status=1}function YE(e){this.g=e}(Kw=lE.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():YS.g(),this.C=this.u?GS(this.u):GS(YS),this.g.onreadystatechange=ix(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void vE(this,o)}e=n||"";var i=new mT(this.headers);r&&yT(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=pE,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Jw.FormData&&e instanceof Jw.FormData,!(0<=cx(dE,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kE(this),0<this.B&&((this.K=function(e){return Cx&&Ux()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ix(this.pa,this)):this.A=ES(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){vE(this,o)}},Kw.pa=function(){"undefined"!=typeof Yw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hS(this,"timeout"),this.abort(8))},Kw.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hS(this,"complete"),hS(this,"abort"),gE(this))},Kw.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gE(this,!0)),lE.Z.M.call(this)},Kw.Fa=function(){this.s||(this.F||this.v||this.l?mE(this):this.cb())},Kw.cb=function(){mE(this)},Kw.ba=function(){try{return 2<bE(this)?this.g.status:-1}catch(HT){return-1}},Kw.ga=function(){try{return this.g?this.g.responseText:""}catch(HT){return""}},Kw.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),cE(t)}},Kw.Da=function(){return this.m},Kw.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Kw=SE.prototype).ma=8,Kw.G=1,Kw.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Kw.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new eT(this,this.h,e,void 0),n=this.s;if(this.P&&(n?xx(n=_x(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=AE(this,t,r),CT(i=wT(this.F),"RID",e),CT(i,"CVER",22),this.D&&CT(i,"X-HTTP-Session-Id",this.D),PE(this,i),this.o&&n&&wE(i,this.o,n),JT(this.i,t),this.Ra&&CT(i,"TYPE","init"),this.ja?(CT(i,"$req",r),CT(i,"SID","null"),t.$=!0,oT(t,i,null)):oT(t,i,r),this.G=2}}else 3==this.G&&(e?NE(this,e):0==this.l.length||GT(this.i)||NE(this))},Kw.Ga=function(){if(this.u=null,ME(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=zS(ix(this.bb,this),e)}},Kw.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,VS(10),EE(this),ME(this))},Kw.ab=function(){null!=this.v&&(this.v=null,EE(this),DE(this),VS(19))},Kw.jb=function(e){e?(this.h.info("Successfully pinged google.com"),VS(2)):(this.h.info("Failed to ping google.com"),VS(1))},(Kw=WE.prototype).xa=function(){},Kw.wa=function(){},Kw.va=function(){},Kw.ua=function(){},Kw.Oa=function(){},HE.prototype.g=function(e,t){return new KE(e,t)},ax(KE,lS),KE.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),bS(ix(e.hb,e,t))),VS(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=BE(e,null,e.W),RE(e)},KE.prototype.close=function(){TE(this.g)},KE.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,IE(this.g,t)}else this.v?((t={}).__data__=dS(e),IE(this.g,t)):IE(this.g,e)},KE.prototype.M=function(){this.g.j=null,delete this.j,TE(this.g),delete this.g,KE.Z.M.call(this)},ax(GE,$S),ax(QE,XS),ax(YE,WE),YE.prototype.xa=function(){hS(this.g,"a")},YE.prototype.wa=function(e){hS(this.g,new GE(e))},YE.prototype.va=function(e){hS(this.g,new QE(e))},YE.prototype.ua=function(){hS(this.g,"b")},HE.prototype.createWebChannel=HE.prototype.g,KE.prototype.send=KE.prototype.u,KE.prototype.open=KE.prototype.m,KE.prototype.close=KE.prototype.close,WS.NO_ERROR=0,WS.TIMEOUT=8,WS.HTTP_ERROR=6,HS.COMPLETE="complete",QS.EventType=JS,JS.OPEN="a",JS.CLOSE="b",JS.ERROR="c",JS.MESSAGE="d",lS.prototype.listen=lS.prototype.N,lE.prototype.listenOnce=lE.prototype.O,lE.prototype.getLastError=lE.prototype.La,lE.prototype.getLastErrorCode=lE.prototype.Da,lE.prototype.getStatus=lE.prototype.ba,lE.prototype.getResponseJson=lE.prototype.Qa,lE.prototype.getResponseText=lE.prototype.ga,lE.prototype.send=lE.prototype.ea;var JE=Qw.createWebChannelTransport=function(){return new HE},$E=Qw.getStatEventTarget=function(){return FS()},XE=Qw.ErrorCode=WS,ZE=Qw.EventType=HS,eC=Qw.Event=LS,tC=Qw.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},nC=Qw.FetchXmlHttpFactory=rE,rC=Qw.WebChannel=QS,iC=Qw.XhrIo=lE,oC="@firebase/firestore",aC=function(){function e(t){ni(this,e),this.uid=t}return x(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();aC.UNAUTHENTICATED=new aC(null),aC.GOOGLE_CREDENTIALS=new aC("google-credentials-uid"),aC.FIRST_PARTY=new aC("first-party-uid"),aC.MOCK_USER=new aC("mock-user");var sC="9.6.5",uC=new va("@firebase/firestore");function cC(){return uC.logLevel}function lC(e){if(uC.logLevel<=aa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dC);uC.debug.apply(uC,["Firestore (".concat(sC,"): ").concat(e)].concat(_t(i)))}}function hC(e){if(uC.logLevel<=aa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dC);uC.error.apply(uC,["Firestore (".concat(sC,"): ").concat(e)].concat(_t(i)))}}function fC(e){if(uC.logLevel<=aa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(dC);uC.warn.apply(uC,["Firestore (".concat(sC,"): ").concat(e)].concat(_t(i)))}}function dC(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function pC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(sC,") INTERNAL ASSERTION FAILED: ")+e;throw hC(t),new Error(t)}function vC(e,t){e||pC()}function yC(e,t){return e}var mC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gC=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return x(n)}(No),kC=x((function e(){var t=this;ni(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),bC=x((function e(t,n){ni(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),_C=function(){function e(){ni(this,e)}return x(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(aC.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),wC=function(){function e(t){ni(this,e),this.token=t,this.changeListener=null}return x(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),xC=function(){function e(t){ni(this,e),this.t=t,this.currentUser=aC.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return x(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new kC;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new kC,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=a;e.enqueueRetryable(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){lC("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(lC("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new kC)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(lC("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(vC("string"==typeof n.accessToken),new bC(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return vC(null===e||"string"==typeof e),new aC(e)}}]),e}(),SC=x((function e(t,n,r){ni(this,e),this.type="FirstParty",this.user=aC.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),TC=function(){function e(t,n,r){ni(this,e),this.h=t,this.l=n,this.m=r}return x(e,[{key:"getToken",value:function(){return Promise.resolve(new SC(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(aC.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),EC=x((function e(t){ni(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),CC=function(){function e(t){ni(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return x(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&lC("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){lC("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):lC("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(vC("string"==typeof e.token),new EC(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),IC=function(){function e(t,n){var r=this;ni(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return x(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function RC(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}IC.I=-1;var NC=function(){function e(){ni(this,e)}return x(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=RC(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function PC(e,t){return e<t?-1:e>t?1:0}function AC(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function OC(e){return e+"\0"}var DC=function(){function e(t,n){if(ni(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new gC(mC.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gC(mC.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new gC(mC.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gC(mC.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return x(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?PC(this.nanoseconds,e.nanoseconds):PC(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),LC=function(){function e(t){ni(this,e),this.timestamp=t}return x(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new DC(0,0))}}]),e}();function MC(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function FC(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function UC(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var jC=function(){function e(t,n,r){ni(this,e),void 0===n?n=0:n>t.length&&pC(),void 0===r?r=t.length-n:r>t.length-n&&pC(),this.segments=t,this.offset=n,this.len=r}return x(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),qC=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];if(s.indexOf("//")>=0)throw new gC(mC.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,_t(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jC),VC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,BC=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return VC.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new gC(mC.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new gC(mC.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gC(mC.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new gC(mC.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jC),zC=function(){function e(t){ni(this,e),this.fields=t,t.sort(BC.comparator)}return x(e,[{key:"covers",value:function(e){var t,n=Zi(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return AC(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var WC=function(e){function t(e){ni(this,t),this.binaryString=e}return x(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return PC(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();WC.EMPTY_BYTE_STRING=new WC("");var HC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function KC(e){if(vC(!!e),"string"==typeof e){var t=0,n=HC.exec(e);if(vC(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:GC(e.seconds),nanos:GC(e.nanos)}}function GC(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function QC(e){return"string"==typeof e?WC.fromBase64String(e):WC.fromUint8Array(e)}function YC(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function JC(e){var t=e.mapValue.fields.__previous_value__;return YC(t)?JC(t):t}function $C(e){var t=KC(e.mapValue.fields.__local_write_time__.timestampValue);return new DC(t.seconds,t.nanos)}function XC(e){return null==e}function ZC(e){return 0===e&&1/e==-1/0}function eI(e){return"number"==typeof e&&Number.isInteger(e)&&!ZC(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var tI=function(){function e(t){ni(this,e),this.path=t}return x(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===qC.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(qC.fromString(t))}},{key:"fromName",value:function(t){return new e(qC.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return qC.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new qC(t.slice()))}}]),e}();function nI(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?YC(e)?4:10:pC()}function rI(e,t){if(e===t)return!0;var n=nI(e);if(n!==nI(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $C(e).isEqual($C(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=KC(e.timestampValue),r=KC(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return QC(e.bytesValue).isEqual(QC(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return GC(e.geoPointValue.latitude)===GC(t.geoPointValue.latitude)&&GC(e.geoPointValue.longitude)===GC(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return GC(e.integerValue)===GC(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=GC(e.doubleValue),r=GC(t.doubleValue);return n===r?ZC(n)===ZC(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return AC(e.arrayValue.values||[],t.arrayValue.values||[],rI);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(MC(n)!==MC(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rI(n[i],r[i])))return!1;return!0}(e,t);default:return pC()}}function iI(e,t){return void 0!==(e.values||[]).find((function(e){return rI(e,t)}))}function oI(e,t){if(e===t)return 0;var n=nI(e),r=nI(t);if(n!==r)return PC(n,r);switch(n){case 0:return 0;case 1:return PC(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=GC(e.integerValue||e.doubleValue),r=GC(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return aI(e.timestampValue,t.timestampValue);case 4:return aI($C(e),$C(t));case 5:return PC(e.stringValue,t.stringValue);case 6:return function(e,t){var n=QC(e),r=QC(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=PC(n[i],r[i]);if(0!==o)return o}return PC(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=PC(GC(e.latitude),GC(t.latitude));return 0!==n?n:PC(GC(e.longitude),GC(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=oI(n[i],r[i]);if(o)return o}return PC(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=PC(r[a],o[a]);if(0!==s)return s;var u=oI(n[r[a]],i[o[a]]);if(0!==u)return u}return PC(r.length,o.length)}(e.mapValue,t.mapValue);default:throw pC()}}function aI(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return PC(e,t);var n=KC(e),r=KC(t),i=PC(n.seconds,r.seconds);return 0!==i?i:PC(n.nanos,r.nanos)}function sI(e){return uI(e)}function uI(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=KC(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?QC(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,tI.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Zi(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=uI(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Zi(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(uI(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):pC();var t,n}function cI(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function lI(e){return!!e&&"integerValue"in e}function hI(e){return!!e&&"arrayValue"in e}function fI(e){return!!e&&"nullValue"in e}function dI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pI(e){return!!e&&"mapValue"in e}function vI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return FC(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=vI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vI(e.arrayValue.values[r]);return n}return Object.assign({},e)}var yI=function(){function e(t){ni(this,e),this.value=t}return x(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!pI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vI(t)}},{key:"setAll",value:function(e){var t=this,n=BC.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=vI(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());pI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return rI(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];pI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){FC(t,(function(t,n){return e[t]=n}));var r,i=Zi(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(vI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mI(e){var t=[];return FC(e.fields,(function(e,n){var r=new BC([e]);if(pI(n)){var i=mI(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=Zi(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;t.push(r.child(s))}}catch(u){a.e(u)}finally{a.f()}}}else t.push(r)})),new zC(t)}var gI=function(){function e(t,n,r,i,o){ni(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return x(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=yI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=yI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,LC.min(),yI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yI.empty(),2)}}]),e}(),kI=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ni(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.R=null}));function bI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new kI(e,t,n,r,i,o,a)}function _I(e){var t=yC(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+sI(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),XC(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=DI(t.startAt)),t.endAt&&(n+="|ub:",n+=DI(t.endAt)),t.R=n}return t.R}function wI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!MI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!rI(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!UI(e.startAt,t.startAt)&&UI(e.endAt,t.endAt)}function xI(e){return tI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var SI=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(oI(t,this.value)):null!==t&&nI(this.value)===nI(t)&&this.v(oI(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pC()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new TI(e,t,r):"array-contains"===t?new RI(e,r):"in"===t?new NI(e,r):"not-in"===t?new PI(e,r):"array-contains-any"===t?new AI(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new EI(e,n):new CI(e,n)}}]),n}(function(){return x((function e(){ni(this,e)}))}());var TI=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this,e,r,i)).key=tI.fromName(i.referenceValue),o}return x(n,[{key:"matches",value:function(e){var t=tI.comparator(e.key,this.key);return this.v(t)}}]),n}(SI),EI=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,"in",r)).keys=II("in",r),i}return x(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(SI),CI=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,"not-in",r)).keys=II("not-in",r),i}return x(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(SI);function II(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return tI.fromName(e.referenceValue)}))}var RI=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"array-contains",r)}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return hI(t)&&iI(t.arrayValue,this.value)}}]),n}(SI),NI=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"in",r)}return x(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&iI(this.value.arrayValue,t)}}]),n}(SI),PI=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"not-in",r)}return x(n,[{key:"matches",value:function(e){if(iI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!iI(this.value.arrayValue,t)}}]),n}(SI),AI=function(e){eo(n,e);var t=io(n);function n(e,r){return ni(this,n),t.call(this,e,"array-contains-any",r)}return x(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!hI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return iI(t.value.arrayValue,e)}))}}]),n}(SI),OI=x((function e(t,n){ni(this,e),this.position=t,this.before=n}));function DI(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return sI(e)})).join(","))}var LI=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ni(this,e),this.field=t,this.dir=n}));function MI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function FI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?tI.comparator(tI.fromName(a.referenceValue),n.key):oI(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function UI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!rI(e.position[n],t.position[n]))return!1;return!0}var jI=x((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ni(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt}));function qI(e,t,n,r,i,o,a,s){return new jI(e,t,n,r,i,o,a,s)}function VI(e){return new jI(e)}function BI(e){return!XC(e.limit)&&"F"===e.limitType}function zI(e){return!XC(e.limit)&&"L"===e.limitType}function WI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function HI(e){var t,n=Zi(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function KI(e){return null!==e.collectionGroup}function GI(e){var t=yC(e);if(null===t.S){t.S=[];var n=HI(t),r=WI(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new LI(n)),t.S.push(new LI(BC.keyField(),"asc"));else{var i,o=!1,a=Zi(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var s=i.value;t.S.push(s),s.field.isKeyField()&&(o=!0)}}catch(c){a.e(c)}finally{a.f()}if(!o){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new LI(BC.keyField(),u))}}}return t.S}function QI(e){var t=yC(e);if(!t.D)if("F"===t.limitType)t.D=bI(t.path,t.collectionGroup,GI(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Zi(GI(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a="desc"===o.dir?"asc":"desc";r.push(new LI(o.field,a))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new OI(t.endAt.position,!t.endAt.before):null,u=t.startAt?new OI(t.startAt.position,!t.startAt.before):null;t.D=bI(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.D}function YI(e,t,n){return new jI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function JI(e,t){return wI(QI(e),QI(t))&&e.limitType===t.limitType}function $I(e){return"".concat(_I(QI(e)),"|lt:").concat(e.limitType)}function XI(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(sI(t.value));var t})).join(", "),"]")),XC(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+DI(e.startAt)),e.endAt&&(t+=", endAt: "+DI(e.endAt)),"Target(".concat(t,")")}(QI(e)),"; limitType=").concat(e.limitType,")")}function ZI(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tI.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Zi(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Zi(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!FI(e.startAt,GI(e),t))&&(!e.endAt||!FI(e.endAt,GI(e),t))}(e,t)}function eR(e){return function(t,n){var r,i=!1,o=Zi(GI(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=tR(a,t,n);if(0!==s)return s;i=i||a.field.isKeyField()}}catch(u){o.e(u)}finally{o.f()}return 0}}function tR(e,t,n){var r=e.field.isKeyField()?tI.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?oI(r,i):pC()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pC()}}function nR(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ZC(t)?"-0":t}}function rR(e){return{integerValue:""+e}}function iR(e,t){return eI(t)?rR(t):nR(e,t)}var oR=x((function e(){ni(this,e),this._=void 0}));function aR(e,t,n){return e instanceof cR?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lR?hR(e,t):e instanceof fR?dR(e,t):function(e,t){var n=uR(e,t),r=vR(n)+vR(e.N);return lI(n)&&lI(e.N)?rR(r):nR(e.k,r)}(e,t)}function sR(e,t,n){return e instanceof lR?hR(e,t):e instanceof fR?dR(e,t):n}function uR(e,t){return e instanceof pR?lI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var cR=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n)}(oR),lR=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).elements=e,r}return x(n)}(oR);function hR(e,t){var n,r=yR(t),i=Zi(e.elements);try{var o=function(){var e=n.value;r.some((function(t){return rI(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var fR=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).elements=e,r}return x(n)}(oR);function dR(e,t){var n,r=yR(t),i=Zi(e.elements);try{var o=function(){var e=n.value;r=r.filter((function(t){return!rI(t,e)}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var pR=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).k=e,i.N=r,i}return x(n)}(oR);function vR(e){return GC(e.integerValue||e.doubleValue)}function yR(e){return hI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var mR=x((function e(t,n){ni(this,e),this.field=t,this.transform=n}));var gR=x((function e(t,n){ni(this,e),this.version=t,this.transformResults=n})),kR=function(){function e(t,n){ni(this,e),this.updateTime=t,this.exists=n}return x(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function bR(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var _R=x((function e(){ni(this,e)}));function wR(e,t,n){e instanceof CR?function(e,t,n){var r=e.value.clone(),i=NR(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof IR?function(e,t,n){if(bR(e.precondition,t)){var r=NR(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(RR(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xR(e,t,n){e instanceof CR?function(e,t,n){if(bR(e.precondition,t)){var r=e.value.clone(),i=PR(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ER(t),r).setHasLocalMutations()}}(e,t,n):e instanceof IR?function(e,t,n){if(bR(e.precondition,t)){var r=PR(e.fieldTransforms,n,t),i=t.data;i.setAll(RR(e)),i.setAll(r),t.convertToFoundDocument(ER(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){bR(e.precondition,t)&&t.convertToNoDocument(LC.min())}(e,t)}function SR(e,t){var n,r=null,i=Zi(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),s=uR(o.transform,a||null);null!=s&&(null==r&&(r=yI.empty()),r.set(o.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function TR(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&AC(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lR&&t instanceof lR||e instanceof fR&&t instanceof fR?AC(e.elements,t.elements,rI):e instanceof pR&&t instanceof pR?rI(e.N,t.N):e instanceof cR&&t instanceof cR}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ER(e){return e.isFoundDocument()?e.version:LC.min()}var CR=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ni(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return x(n)}(_R),IR=function(e){eo(n,e);var t=io(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ni(this,n),(a=t.call(this)).key=e,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=s,a.type=1,a}return x(n)}(_R);function RR(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function NR(e,t,n){var r=new Map;vC(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,sR(a,s,n[i]))}return r}function PR(e,t,n){var r,i=new Map,o=Zi(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.transform,u=n.data.field(a.field);i.set(a.field,aR(s,u,t))}}catch(c){o.e(c)}finally{o.f()}return i}var AR,OR,DR=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return x(n)}(_R),LR=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return x(n)}(_R),MR=x((function e(t){ni(this,e),this.count=t}));function FR(e){switch(e){default:return pC();case mC.CANCELLED:case mC.UNKNOWN:case mC.DEADLINE_EXCEEDED:case mC.RESOURCE_EXHAUSTED:case mC.INTERNAL:case mC.UNAVAILABLE:case mC.UNAUTHENTICATED:return!1;case mC.INVALID_ARGUMENT:case mC.NOT_FOUND:case mC.ALREADY_EXISTS:case mC.PERMISSION_DENIED:case mC.FAILED_PRECONDITION:case mC.ABORTED:case mC.OUT_OF_RANGE:case mC.UNIMPLEMENTED:case mC.DATA_LOSS:return!0}}function UR(e){if(void 0===e)return hC("GRPC error has no .code"),mC.UNKNOWN;switch(e){case AR.OK:return mC.OK;case AR.CANCELLED:return mC.CANCELLED;case AR.UNKNOWN:return mC.UNKNOWN;case AR.DEADLINE_EXCEEDED:return mC.DEADLINE_EXCEEDED;case AR.RESOURCE_EXHAUSTED:return mC.RESOURCE_EXHAUSTED;case AR.INTERNAL:return mC.INTERNAL;case AR.UNAVAILABLE:return mC.UNAVAILABLE;case AR.UNAUTHENTICATED:return mC.UNAUTHENTICATED;case AR.INVALID_ARGUMENT:return mC.INVALID_ARGUMENT;case AR.NOT_FOUND:return mC.NOT_FOUND;case AR.ALREADY_EXISTS:return mC.ALREADY_EXISTS;case AR.PERMISSION_DENIED:return mC.PERMISSION_DENIED;case AR.FAILED_PRECONDITION:return mC.FAILED_PRECONDITION;case AR.ABORTED:return mC.ABORTED;case AR.OUT_OF_RANGE:return mC.OUT_OF_RANGE;case AR.UNIMPLEMENTED:return mC.UNIMPLEMENTED;case AR.DATA_LOSS:return mC.DATA_LOSS;default:return pC()}}(OR=AR||(AR={}))[OR.OK=0]="OK",OR[OR.CANCELLED=1]="CANCELLED",OR[OR.UNKNOWN=2]="UNKNOWN",OR[OR.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",OR[OR.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",OR[OR.NOT_FOUND=5]="NOT_FOUND",OR[OR.ALREADY_EXISTS=6]="ALREADY_EXISTS",OR[OR.PERMISSION_DENIED=7]="PERMISSION_DENIED",OR[OR.UNAUTHENTICATED=16]="UNAUTHENTICATED",OR[OR.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",OR[OR.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",OR[OR.ABORTED=10]="ABORTED",OR[OR.OUT_OF_RANGE=11]="OUT_OF_RANGE",OR[OR.UNIMPLEMENTED=12]="UNIMPLEMENTED",OR[OR.INTERNAL=13]="INTERNAL",OR[OR.UNAVAILABLE=14]="UNAVAILABLE",OR[OR.DATA_LOSS=15]="DATA_LOSS";var jR=function(){function e(t,n){ni(this,e),this.comparator=t,this.root=n||VR.EMPTY}return x(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,VR.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,VR.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qR(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qR(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qR(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qR(this.root,e,this.comparator,!0)}}]),e}(),qR=function(){function e(t,n,r,i){ni(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return x(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),VR=function(){function e(t,n,r,i,o){ni(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return x(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw pC();if(this.right.isRed())throw pC();var e=this.left.check();if(e!==this.right.check())throw pC();return e+(this.isRed()?0:1)}}]),e}();VR.EMPTY=null,VR.RED=!0,VR.BLACK=!1,VR.EMPTY=new(function(){function e(){ni(this,e),this.size=0}return x(e,[{key:"key",get:function(){throw pC()}},{key:"value",get:function(){throw pC()}},{key:"color",get:function(){throw pC()}},{key:"left",get:function(){throw pC()}},{key:"right",get:function(){throw pC()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new VR(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var BR=function(){function e(t){ni(this,e),this.comparator=t,this.data=new jR(this.comparator)}return x(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new zR(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new zR(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),zR=function(){function e(t){ni(this,e),this.iter=t}return x(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),WR=new jR(tI.comparator);function HR(){return WR}var KR=new jR(tI.comparator);function GR(){return KR}var QR=new jR(tI.comparator);function YR(){return QR}var JR=new BR(tI.comparator);function $R(){for(var e=JR,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var XR=new BR(PC);function ZR(){return XR}var eN=function(){function e(t,n,r,i,o){ni(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return x(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,tN.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(LC.min(),r,ZR(),HR(),$R())}}]),e}(),tN=function(){function e(t,n,r,i,o){ni(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return x(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(WC.EMPTY_BYTE_STRING,n,$R(),$R(),$R())}}]),e}(),nN=x((function e(t,n,r,i){ni(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.O=i})),rN=x((function e(t,n){ni(this,e),this.targetId=t,this.M=n})),iN=x((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WC.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ni(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),oN=function(){function e(){ni(this,e),this.F=0,this.L=uN(),this.B=WC.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return x(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.F}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=$R(),t=$R(),n=$R();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pC()}})),new tN(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=uN()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.F+=1}},{key:"Z",value:function(){this.F-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),aN=function(){function e(t){ni(this,e),this.et=t,this.nt=new Map,this.st=HR(),this.it=sN(),this.rt=new BR(PC)}return x(e,[{key:"ot",value:function(e){var t,n=Zi(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.O&&e.O.isFoundDocument()?this.ct(r,e.O):this.at(r,e.key,e.O)}}catch(s){n.e(s)}finally{n.f()}var i,o=Zi(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.at(a,e.key,e.O)}}catch(s){o.e(s)}finally{o.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:pC()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.M.count,r=this.wt(t);if(r){var i=r.target;if(xI(i))if(0===n){var o=new tI(i.path);this.at(t,o,gI.newNoDocument(o,LC.min()))}else vC(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var o=t.wt(i);if(o){if(r.current&&xI(o.target)){var a=new tI(o.target.path);null!==t.st.get(a)||t.yt(i,a)||t.at(i,a,gI.newNoDocument(a,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=$R();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new eN(e,n,this.rt,this.st,r);return this.st=HR(),this.it=sN(),this.rt=new BR(PC),i}},{key:"ct",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new oN,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new BR(PC),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||lC("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new oN),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function sN(){return new jR(tI.comparator)}function uN(){return new jR(tI.comparator)}var cN={asc:"ASCENDING",desc:"DESCENDING"},lN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hN=x((function e(t,n){ni(this,e),this.databaseId=t,this.C=n}));function fN(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function dN(e,t){return e.C?t.toBase64():t.toUint8Array()}function pN(e,t){return fN(e,t.toTimestamp())}function vN(e){return vC(!!e),LC.fromTimestamp(function(e){var t=KC(e);return new DC(t.seconds,t.nanos)}(e))}function yN(e,t){return function(e){return new qC(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function mN(e){var t=qC.fromString(e);return vC(BN(t)),t}function gN(e,t){return yN(e.databaseId,t.path)}function kN(e,t){var n=mN(t);if(n.get(1)!==e.databaseId.projectId)throw new gC(mC.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gC(mC.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tI(xN(n))}function bN(e,t){return yN(e.databaseId,t)}function _N(e){var t=mN(e);return 4===t.length?qC.emptyPath():xN(t)}function wN(e){return new qC(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xN(e){return vC(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function SN(e,t,n){return{name:gN(e,t),fields:n.value.mapValue.fields}}function TN(e,t,n){var r=kN(e,t.name),i=vN(t.updateTime),o=new yI({mapValue:{fields:t.fields}}),a=gI.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function EN(e,t){return"found"in t?function(e,t){vC(!!t.found),t.found.name,t.found.updateTime;var n=kN(e,t.found.name),r=vN(t.found.updateTime),i=new yI({mapValue:{fields:t.found.fields}});return gI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){vC(!!t.missing),vC(!!t.readTime);var n=kN(e,t.missing),r=vN(t.readTime);return gI.newNoDocument(n,r)}(e,t):pC()}function CN(e,t){var n;if(t instanceof CR)n={update:SN(e,t.key,t.value)};else if(t instanceof DR)n={delete:gN(e,t.key)};else if(t instanceof IR)n={update:SN(e,t.key,t.data),updateMask:VN(t.fieldMask)};else{if(!(t instanceof LR))return pC();n={verify:gN(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof cR)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lR)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fR)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pR)return{fieldPath:t.field.canonicalString(),increment:n.N};throw pC()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pN(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pC()}(e,t.precondition)),n}function IN(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?kR.updateTime(vN(e.updateTime)):void 0!==e.exists?kR.exists(e.exists):kR.none()}(t.currentDocument):kR.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)vC("REQUEST_TIME"===t.setToServerValue),n=new cR;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new lR(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new fR(i)}else"increment"in t?n=new pR(e,t.increment):pC();var o=BC.fromServerFormat(t.fieldPath);return new mR(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=kN(e,t.update.name),o=new yI({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new zC(t.map((function(e){return BC.fromServerFormat(e)})))}(t.updateMask);return new IR(i,o,a,n,r)}return new CR(i,o,n,r)}if(t.delete){var s=kN(e,t.delete);return new DR(s,n)}if(t.verify){var u=kN(e,t.verify);return new LR(u,n)}return pC()}function RN(e,t){return{documents:[bN(e,t.path)]}}function NN(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=bN(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=bN(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(dI(e.value))return{unaryFilter:{field:FN(e.field),op:"IS_NAN"}};if(fI(e.value))return{unaryFilter:{field:FN(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dI(e.value))return{unaryFilter:{field:FN(e.field),op:"IS_NOT_NAN"}};if(fI(e.value))return{unaryFilter:{field:FN(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:FN(e.field),op:MN(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:FN(e.field),direction:LN(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.C||XC(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=ON(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ON(t.endAt)),n}function PN(e){var t=_N(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vC(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=AN(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new LI(UN(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return XC(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=DN(n.startAt));var l=null;return n.endAt&&(l=DN(n.endAt)),qI(t,i,s,a,u,"F",c,l)}function AN(e){return e?void 0!==e.unaryFilter?[qN(e)]:void 0!==e.fieldFilter?[jN(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return AN(e)})).reduce((function(e,t){return e.concat(t)})):pC():[]}function ON(e){return{before:e.before,values:e.position}}function DN(e){var t=!!e.before,n=e.values||[];return new OI(n,t)}function LN(e){return cN[e]}function MN(e){return lN[e]}function FN(e){return{fieldPath:e.canonicalString()}}function UN(e){return BC.fromServerFormat(e.fieldPath)}function jN(e){return SI.create(UN(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pC()}}(e.fieldFilter.op),e.fieldFilter.value)}function qN(e){switch(e.unaryFilter.op){case"IS_NAN":var t=UN(e.unaryFilter.field);return SI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=UN(e.unaryFilter.field);return SI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=UN(e.unaryFilter.field);return SI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=UN(e.unaryFilter.field);return SI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pC()}}function VN(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function BN(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function zN(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=HN(t)),t=WN(e.get(n),t);return HN(t)}function WN(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function HN(e){return e+"\x01\x01"}function KN(e){var t=e.length;if(vC(t>=2),2===t)return vC("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),qC.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&pC(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:pC()}o=a+2}return new qC(r)}var GN=x((function e(t,n){ni(this,e),this.seconds=t,this.nanoseconds=n})),QN=x((function e(t,n,r){ni(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));QN.store="owner",QN.key="owner";var YN=x((function e(t,n,r){ni(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));YN.store="mutationQueues",YN.keyPath="userId";var JN=x((function e(t,n,r,i,o){ni(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o}));JN.store="mutations",JN.keyPath="batchId",JN.userMutationsIndex="userMutationsIndex",JN.userMutationsKeyPath=["userId","batchId"];var $N=function(){function e(){ni(this,e)}return x(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,zN(t)]}},{key:"key",value:function(e,t,n){return[e,zN(t),n]}}]),e}();$N.store="documentMutations",$N.PLACEHOLDER=new $N;var XN=x((function e(t,n){ni(this,e),this.path=t,this.readTime=n})),ZN=x((function e(t,n){ni(this,e),this.path=t,this.version=n})),eP=x((function e(t,n,r,i,o,a){ni(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=a}));eP.store="remoteDocuments",eP.readTimeIndex="readTimeIndex",eP.readTimeIndexPath="readTime",eP.collectionReadTimeIndex="collectionReadTimeIndex",eP.collectionReadTimeIndexPath=["parentPath","readTime"];var tP=x((function e(t){ni(this,e),this.byteSize=t}));tP.store="remoteDocumentGlobal",tP.key="remoteDocumentGlobalKey";var nP=x((function e(t,n,r,i,o,a,s){ni(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=a,this.query=s}));nP.store="targets",nP.keyPath="targetId",nP.queryTargetsIndexName="queryTargetsIndex",nP.queryTargetsKeyPath=["canonicalId","targetId"];var rP=x((function e(t,n,r){ni(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));rP.store="targetDocuments",rP.keyPath=["targetId","path"],rP.documentTargetsIndex="documentTargetsIndex",rP.documentTargetsKeyPath=["path","targetId"];var iP=x((function e(t,n,r,i){ni(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));iP.key="targetGlobalKey",iP.store="targetGlobal";var oP=x((function e(t,n){ni(this,e),this.collectionId=t,this.parent=n}));oP.store="collectionParents",oP.keyPath=["collectionId","parent"];var aP=x((function e(t,n,r,i){ni(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));aP.store="clientMetadata",aP.keyPath="clientId";var sP=x((function e(t,n,r){ni(this,e),this.bundleId=t,this.createTime=n,this.version=r}));sP.store="bundles",sP.keyPath="bundleId";var uP=x((function e(t,n,r){ni(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));uP.store="namedQueries",uP.keyPath="name";var cP=[YN.store,JN.store,$N.store,eP.store,nP.store,QN.store,iP.store,rP.store].concat([aP.store]).concat([tP.store]).concat([oP.store]).concat([sP.store,uP.store]),lP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hP=function(){function e(){ni(this,e),this.onCommittedListeners=[]}return x(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),fP=function(){function e(t){var n=this;ni(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return x(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&pC(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Zi(t);try{var o=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),dP=function(){function e(t,n){var r=this;ni(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new kC,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new yP(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=_P(e.target.error);r.It.reject(new yP(t,n))}}return x(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(lC("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new gP(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new yP(n,t)}}}]),e}(),pP=function(){function e(t,n,r){ni(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.bt(wo())&&hC("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return x(e,[{key:"Ct",value:function(){var e=o(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return lC("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new yP(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new gC(mC.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new gC(mC.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new yP(t,n))},i.onupgradeneeded=function(e){lC("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){lC("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=o(f().mark((function e(t,n,r,i){var o,a,s,u,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,a=0;case 2:return++a,e.prev=3,e.delegateYield(f().mark((function e(){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=dP.open(c.db,t,o?"readonly":"readwrite",r),a=i(n).catch((function(e){return n.abort(e),fP.reject(e)})).toPromise(),a.catch((function(){})),e.next=7,n.At;case 7:return e.t0=a,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&a<3,lC("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return lC("SimpleDb","Removing database:",e),kP(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Pt",value:function(){if(!Ro())return!1;if(e.vt())return!0;var t=wo(),n=e.bt(t),r=0<n&&n<10,i=e.Vt(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"bt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),vP=function(){function e(t){ni(this,e),this.$t=t,this.Ot=!1,this.Mt=null}return x(e,[{key:"isDone",get:function(){return this.Ot}},{key:"Ft",get:function(){return this.Mt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ot=!0}},{key:"Lt",value:function(e){this.Mt=e}},{key:"delete",value:function(){return kP(this.$t.delete())}}]),e}(),yP=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,mC.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return x(n)}(gC);function mP(e){return"IndexedDbTransactionError"===e.name}var gP=function(){function e(t){ni(this,e),this.store=t}return x(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(lC("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(lC("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),kP(n)}},{key:"add",value:function(e){return lC("SimpleDb","ADD",this.store.name,e,e),kP(this.store.add(e))}},{key:"get",value:function(e){var t=this;return kP(this.store.get(e)).next((function(n){return void 0===n&&(n=null),lC("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return lC("SimpleDb","DELETE",this.store.name,e),kP(this.store.delete(e))}},{key:"count",value:function(){return lC("SimpleDb","COUNT",this.store.name),kP(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){lC("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new fP((function(n,r){t.onerror=function(e){var t=_P(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new fP((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new vP(i),a=t(i.primaryKey,i.value,o);if(a instanceof fP){var s=a.catch((function(e){return o.done(),fP.reject(e)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return fP.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function kP(e){return new fP((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_P(e.target.error);n(t)}}))}var bP=!1;function _P(e){var t=pP.bt(wo());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new gC("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return bP||(bP=!0,setTimeout((function(){throw r}),0)),r}}return e}var wP=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return x(n)}(hP);function xP(e,t){var n=yC(e);return pP.Dt(n.Wt,t)}var SP=function(){function e(t,n,r,i){ni(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return x(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&wR(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Zi(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&xR(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,o=Zi(this.mutations);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.key.isEqual(e.key)&&xR(a,e,this.localWriteTime)}}catch(s){o.e(s)}finally{o.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(LC.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),$R())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&AC(this.mutations,e.mutations,(function(e,t){return TR(e,t)}))&&AC(this.baseMutations,e.baseMutations,(function(e,t){return TR(e,t)}))}}]),e}(),TP=function(){function e(t,n,r,i){ni(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return x(e,null,[{key:"from",value:function(t,n,r){vC(t.mutations.length===r.length);for(var i=YR(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),EP=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LC.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:LC.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:WC.EMPTY_BYTE_STRING;ni(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s}return x(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),CP=x((function e(t){ni(this,e),this.Gt=t}));function IP(e,t){if(t.document)return TN(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=tI.fromSegments(t.noDocument.path),r=OP(t.noDocument.readTime),i=gI.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=tI.fromSegments(t.unknownDocument.path),a=OP(t.unknownDocument.version);return gI.newUnknownDocument(o,a)}return pC()}function RP(e,t,n){var r=NP(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:gN(e,t.key),fields:t.data.value.mapValue.fields,updateTime:fN(e,t.version.toTimestamp())}}(e.Gt,t),a=t.hasCommittedMutations;return new eP(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=AP(t.version),c=t.hasCommittedMutations;return new eP(null,new XN(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),h=AP(t.version);return new eP(new ZN(l,h),null,null,!0,r,i)}return pC()}function NP(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function PP(e){var t=new DC(e[0],e[1]);return LC.fromTimestamp(t)}function AP(e){var t=e.toTimestamp();return new GN(t.seconds,t.nanoseconds)}function OP(e){var t=new DC(e.seconds,e.nanoseconds);return LC.fromTimestamp(t)}function DP(e,t){for(var n=(t.baseMutations||[]).map((function(t){return IN(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return IN(e.Gt,t)})),s=DC.fromMillis(t.localWriteTimeMs);return new SP(t.batchId,s,n,a)}function LP(e){var t,n,r=OP(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?OP(e.lastLimboFreeSnapshotVersion):LC.min();return void 0!==e.query.documents?(vC(1===(n=e.query).documents.length),t=QI(VI(_N(n.documents[0])))):t=function(e){return QI(PN(e))}(e.query),new EP(t,e.targetId,0,e.lastListenSequenceNumber,r,i,WC.fromBase64String(e.resumeToken))}function MP(e,t){var n,r=AP(t.snapshotVersion),i=AP(t.lastLimboFreeSnapshotVersion);n=xI(t.target)?RN(e.Gt,t.target):NN(e.Gt,t.target);var o=t.resumeToken.toBase64();return new nP(t.targetId,_I(t.target),r,o,t.sequenceNumber,i,n)}function FP(e){var t=PN({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?YI(t,t.limit,"L"):t}var UP=function(){function e(){ni(this,e)}return x(e,[{key:"getBundleMetadata",value:function(e,t){return jP(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:OP(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jP(e).put({bundleId:(n=t).id,createTime:AP(vN(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return qP(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:FP(t.bundledQuery),readTime:OP(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return qP(e).put(function(e){return{name:e.name,readTime:AP(vN(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jP(e){return xP(e,sP.store)}function qP(e){return xP(e,uP.store)}var VP=function(){function e(){ni(this,e),this.zt=new BP}return x(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),fP.resolve()}},{key:"getCollectionParents",value:function(e,t){return fP.resolve(this.zt.getEntries(t))}}]),e}(),BP=function(){function e(){ni(this,e),this.index={}}return x(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new BR(qC.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new BR(qC.comparator)).toArray()}}]),e}(),zP=function(){function e(){ni(this,e),this.Ht=new BP}return x(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var o={collectionId:r,parent:zN(i)};return WP(e).put(o)}return fP.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[OC(t),""],!1,!0);return WP(e).Bt(r).next((function(e){var r,i=Zi(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.collectionId!==t)break;n.push(KN(o.parent))}}catch(a){i.e(a)}finally{i.f()}return n}))}}]),e}();function WP(e){return xP(e,oP.store)}var HP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KP=function(){function e(t,n,r){ni(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return x(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function GP(e,t,n){var r=e.store(JN.store),i=e.store($N.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.jt({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){vC(1===s)})));var c,l=[],h=Zi(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=$N.key(t,f.key.path,n.batchId);o.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return fP.waitFor(o).next((function(){return l}))}function QP(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw pC();t=e.noDocument}return JSON.stringify(t).length}KP.DEFAULT_COLLECTION_PERCENTILE=10,KP.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,KP.DEFAULT=new KP(41943040,KP.DEFAULT_COLLECTION_PERCENTILE,KP.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),KP.DISABLED=new KP(-1,0,0);var YP=function(){function e(t,n,r,i){ni(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return x(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $P(e).jt({index:JN.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,o=XP(e),a=$P(e);return a.add({}).next((function(s){vC("number"==typeof s);var u,c=new SP(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return CN(e.Gt,t)})),i=n.mutations.map((function(t){return CN(e.Gt,t)}));return new JN(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),h=[],f=new BR((function(e,t){return PC(e.canonicalString(),t.canonicalString())})),d=Zi(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=$N.key(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(a.put(l)),h.push(o.put(v,$N.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[s]=c.keys()})),fP.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return $P(e).get(t).next((function(e){return e?(vC(e.userId===n.userId),DP(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?fP.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $P(e).jt({index:JN.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(vC(t.batchId>=r),o=DP(n.k,t)),i.done()})).next((function(){return o}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $P(e).jt({index:JN.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $P(e).Bt(JN.userMutationsIndex,n).next((function(e){return e.map((function(e){return DP(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=$N.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return XP(e).jt({range:i},(function(r,i,a){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=KN(c);if(u===n.userId&&t.path.isEqual(f))return $P(e).get(h).next((function(e){if(!e)throw pC();vC(e.userId===n.userId),o.push(DP(n.k,e))}));a.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new BR(PC),i=[];return t.forEach((function(t){var o=$N.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=XP(e).jt({range:a},(function(e,i,o){var a=l(e,3),s=a[0],u=a[1],c=a[2],h=KN(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):o.done()}));i.push(s)})),fP.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=$N.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new BR(PC);return XP(e).jt({range:a},(function(e,t,o){var a=l(e,3),u=a[0],c=a[1],h=a[2],f=KN(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):o.done()})).next((function(){return n.te(e,s)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($P(e).get(t).next((function(e){if(null===e)throw pC();vC(e.userId===n.userId),r.push(DP(n.k,e))})))})),fP.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return GP(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),fP.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return fP.resolve();var r=IDBKeyRange.lowerBound($N.prefixForUser(t.userId)),i=[];return XP(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var o=KN(e[1]);i.push(o)}else r.done()})).next((function(){vC(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return JP(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return ZP(e).get(this.userId).next((function(e){return e||new YN(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return vC(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function JP(e,t,n){var r=$N.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return XP(e).jt({range:o,Kt:!0},(function(e,n,r){var o=l(e,3),s=o[0],u=o[1];o[2];s===t&&u===i&&(a=!0),r.done()})).next((function(){return a}))}function $P(e){return xP(e,JN.store)}function XP(e){return xP(e,$N.store)}function ZP(e){return xP(e,YN.store)}var eA=function(){function e(t){ni(this,e),this.se=t}return x(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),tA=function(){function e(t,n){ni(this,e),this.referenceDelegate=t,this.k=n}return x(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new eA(n.highestTargetId);return n.highestTargetId=r.next(),t.ce(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return LC.fromTimestamp(new DC(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ce(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ce(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return nA(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return vC(t.targetCount>0),t.targetCount-=1,n.ce(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return nA(e).jt((function(a,s){var u=LP(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return fP.waitFor(o)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return nA(e).jt((function(e,n){var r=LP(n);t(r)}))}},{key:"oe",value:function(e){return rA(e).get(iP.key).next((function(e){return vC(null!==e),e}))}},{key:"ce",value:function(e,t){return rA(e).put(iP.key,t)}},{key:"ae",value:function(e,t){return nA(e).put(MP(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=_I(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return nA(e).jt({range:r,index:nP.queryTargetsIndexName},(function(e,n,r){var o=LP(n);wI(t,o.target)&&(i=o,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],o=iA(e);return t.forEach((function(t){var a=zN(t.path);i.push(o.put(new rP(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),fP.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=iA(e);return fP.forEach(t,(function(t){var o=zN(t.path);return fP.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=iA(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=iA(e),i=$R();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=KN(e[1]),o=new tI(r);i=i.add(o)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=zN(t.path),r=IDBKeyRange.bound([n],[OC(n)],!1,!0),i=0;return iA(e).jt({index:rP.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=l(e,2),o=r[0];r[1];0!==o&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return nA(e).get(t).next((function(e){return e?LP(e):null}))}}]),e}();function nA(e){return xP(e,nP.store)}function rA(e){return xP(e,iP.store)}function iA(e){return xP(e,rP.store)}function oA(e){return aA.apply(this,arguments)}function aA(){return aA=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===mC.FAILED_PRECONDITION&&t.message===lP){e.next=2;break}throw t;case 2:lC("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),aA.apply(this,arguments)}function sA(e,t){var n=l(e,2),r=n[0],i=n[1],o=l(t,2),a=o[0],s=o[1],u=PC(r,a);return 0===u?PC(i,s):u}var uA=function(){function e(t){ni(this,e),this.he=t,this.buffer=new BR(sA),this.le=0}return x(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();sA(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),cA=function(){function e(t,n){ni(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return x(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;lC("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!mP(n.t0)){n.next=12;break}lC("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,oA(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),lA=function(){function e(t,n){ni(this,e),this.ge=t,this.params=n}return x(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return fP.resolve(IC.I);var r=new uA(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(lC("LruGarbageCollector","Garbage collection skipped; disabled"),fP.resolve(HP)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(lC("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),HP):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(lC("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),cC()<=aa.DEBUG&&lC("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),fP.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),hA=function(){function e(t,n){ni(this,e),this.db=t,this.garbageCollector=function(e,t){return new lA(e,t)}(this,n)}return x(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return fA(e,n)}},{key:"removeReference",value:function(e,t,n){return fA(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fA(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return ZP(e).Qt((function(r){return JP(e,r,t).next((function(e){return e&&(n=!0),fP.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Ie(e,(function(a,s){if(s<=t){var u=n.Ae(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),iA(e).delete([0,zN(a.path)])}))}));i.push(u)}})).next((function(){return fP.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fA(e,t)}},{key:"Ie",value:function(e,t){var n,r=iA(e),i=IC.I;return r.jt({index:rP.documentTargetsIndex},(function(e,r){var o=l(e,2),a=o[0],s=(o[1],r.path),u=r.sequenceNumber;0===a?(i!==IC.I&&t(new tI(KN(n)),i),i=u,n=s):i=IC.I})).next((function(){i!==IC.I&&t(new tI(KN(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fA(e,t){return iA(e).put(function(e,t){return new rP(0,zN(e.path),t)}(t,e.currentSequenceNumber))}var dA=function(){function e(t,n){ni(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return x(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Zi(n);try{for(i.s();!(r=i.n()).done;){var o=l(r.value,2),a=o[0],s=o[1];if(this.equalsFn(a,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){FC(this.inner,(function(t,n){var r,i=Zi(n);try{for(i.s();!(r=i.n()).done;){var o=l(r.value,2),a=o[0],s=o[1];e(a,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return UC(this.inner)}}]),e}(),pA=function(){function e(){ni(this,e),this.changes=new dA((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return x(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:LC.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:gI.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?fP.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),vA=function(){function e(t,n){ni(this,e),this.k=t,this.Jt=n}return x(e,[{key:"addEntry",value:function(e,t,n){return gA(e).put(kA(t),n)}},{key:"removeEntry",value:function(e,t){var n=gA(e),r=kA(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return gA(e).get(kA(t)).next((function(e){return n.be(t,e)}))}},{key:"Pe",value:function(e,t){var n=this;return gA(e).get(kA(t)).next((function(e){return{document:n.be(t,e),size:QP(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=HR();return this.ve(e,t,(function(e,t){var i=n.be(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=HR(),i=new jR(tI.comparator);return this.ve(e,t,(function(e,t){var o=n.be(e,t);r=r.insert(e,o),i=i.insert(e,QP(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return fP.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return gA(e).jt({range:r},(function(e,t,r){for(var a=tI.fromSegments(e);o&&tI.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Lt(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=HR(),o=t.path.length+1,a={};if(n.isEqual(LC.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=NP(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=eP.collectionReadTimeIndex}return gA(e).jt(a,(function(e,n,a){if(e.length===o){var s=IP(r.k,n);t.path.isPrefixOf(s.key.path)?ZI(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new yA(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return mA(e).get(tP.key).next((function(e){return vC(!!e),e}))}},{key:"Re",value:function(e,t){return mA(e).put(tP.key,t)}},{key:"be",value:function(e,t){if(t){var n=IP(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(LC.min()))return n}return gI.newInvalidDocument(e)}}]),e}(),yA=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new dA((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return x(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new BR((function(e,t){return PC(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ce.get(o);if(a.document.isValidDocument()){var u=RP(t.De.k,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=QP(u);r+=c-s,n.push(t.De.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=RP(t.De.k,gI.newNoDocument(o,LC.min()),t.getReadTime(o));n.push(t.De.addEntry(e,o,l))}else n.push(t.De.removeEntry(e,o))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),fP.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.Pe(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(pA);function mA(e){return xP(e,tP.store)}function gA(e){return xP(e,eP.store)}function kA(e){return e.path.toArray()}var bA=function(){function e(t){ni(this,e),this.k=t}return x(e,[{key:"Nt",value:function(e,t,n,r){var i=this;vC(n<r&&n>=0&&r<=11);var o=new dP("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(QN.store)}(e),function(e){e.createObjectStore(YN.store,{keyPath:YN.keyPath}),e.createObjectStore(JN.store,{keyPath:JN.keyPath,autoIncrement:!0}).createIndex(JN.userMutationsIndex,JN.userMutationsKeyPath,{unique:!0}),e.createObjectStore($N.store)}(e),_A(e),function(e){e.createObjectStore(eP.store)}(e));var a=fP.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(rP.store),e.deleteObjectStore(nP.store),e.deleteObjectStore(iP.store)}(e),_A(e)),a=a.next((function(){return function(e){var t=e.store(iP.store),n=new iP(0,0,LC.min().toTimestamp(),0);return t.put(iP.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(JN.store).Bt().next((function(n){e.deleteObjectStore(JN.store),e.createObjectStore(JN.store,{keyPath:JN.keyPath,autoIncrement:!0}).createIndex(JN.userMutationsIndex,JN.userMutationsKeyPath,{unique:!0});var r=t.store(JN.store),i=n.map((function(e){return r.put(e)}));return fP.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(aP.store,{keyPath:aP.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Ne(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(tP.store)}(e),i.ke(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.$e(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(eP.store);t.createIndex(eP.readTimeIndex,eP.readTimeIndexPath,{unique:!1}),t.createIndex(eP.collectionReadTimeIndex,eP.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Oe(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(sP.store,{keyPath:sP.keyPath})}(e),function(e){e.createObjectStore(uP.store,{keyPath:uP.keyPath})}(e)}))),a}},{key:"ke",value:function(e){var t=0;return e.store(eP.store).jt((function(e,n){t+=QP(n)})).next((function(){var n=new tP(t);return e.store(tP.store).put(tP.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(YN.store),r=e.store(JN.store);return n.Bt().next((function(n){return fP.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(JN.userMutationsIndex,i).next((function(r){return fP.forEach(r,(function(r){vC(r.userId===n.userId);var i=DP(t.k,r);return GP(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(rP.store),n=e.store(eP.store);return e.store(iP.store).get(iP.key).next((function(e){var r=[];return n.jt((function(n,i){var o=new qC(n),a=function(e){return[0,zN(e)]}(o);r.push(t.get(a).next((function(n){return n?fP.resolve():function(n){return t.put(new rP(0,zN(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return fP.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(oP.store,{keyPath:oP.keyPath});var n=t.store(oP.store),r=new BP,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:zN(i)})}};return t.store(eP.store).jt({Kt:!0},(function(e,t){var n=new qC(e);return i(n.popLast())})).next((function(){return t.store($N.store).jt({Kt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),o=(n[2],KN(r));return i(o.popLast())}))}))}},{key:"Oe",value:function(e){var t=this,n=e.store(nP.store);return n.jt((function(e,r){var i=LP(r),o=MP(t.k,i);return n.put(o)}))}}]),e}();function _A(e){e.createObjectStore(rP.store,{keyPath:rP.keyPath}).createIndex(rP.documentTargetsIndex,rP.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(nP.store,{keyPath:nP.keyPath}).createIndex(nP.queryTargetsIndexName,nP.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(iP.store)}var wA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xA=function(){function e(t,n,r,i,o,a,s,u,c,l){if(ni(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Me=o,this.window=a,this.document=s,this.Fe=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.Pt())throw new gC(mC.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hA(this,i),this.Ge=n+"main",this.k=new CP(u),this.ze=new pP(this.Ge,11,new bA(this.k)),this.He=new tA(this.referenceDelegate,this.k),this.Jt=new zP,this.Je=function(e,t){return new vA(e,t)}(this.k,this.Jt),this.Ye=new UP,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&hC("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return x(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gC(mC.FAILED_PRECONDITION,wA);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new IC(t,e.Fe)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=o(f().mark((function n(r){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=o(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return TA(t).put(new aP(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Me.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.cn(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(mP(t))return lC("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return lC("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Me.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return SA(e).get(QN.key).next((function(e){return fP.resolve(t.un(e))}))}},{key:"hn",value:function(e){return TA(e).delete(this.clientId)}},{key:"ln",value:function(){var e=o(f().mark((function e(){var t,n,r,i,o=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=xP(e,aP.store);return t.Bt().next((function(e){var n=o.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return fP.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=Zi(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?fP.resolve(!0):SA(e).get(QN.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new gC(mC.FAILED_PRECONDITION,wA);return!1}}return!(!t.networkEnabled||!t.inForeground)||TA(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&lC("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=o(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[QN.store,aP.store],(function(e){var n=new wP(e,IC.I);return t.cn(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return TA(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return YP.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;lC("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,o,cP,(function(o){return i=new wP(o,r.Be?r.Be.next():IC.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw hC("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Me.enqueueRetryable((function(){return r.We(!1)})),new gC(mC.FAILED_PRECONDITION,lP);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return SA(e).get(QN.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new gC(mC.FAILED_PRECONDITION,wA)}))}},{key:"an",value:function(e){var t=new QN(this.clientId,this.allowTabSynchronization,Date.now());return SA(e).put(QN.key,t)}},{key:"cn",value:function(e){var t=this,n=SA(e);return n.get(QN.key).next((function(e){return t.un(e)?(lC("IndexedDbPersistence","Releasing primary lease."),n.delete(QN.key)):fP.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(hC("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Me.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!So()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Me.enterRestrictedMode(!0),t.Me.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return lC("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return hC("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(ax){hC("Failed to set zombie client id.",ax)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(ax){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Pt",value:function(){return pP.Pt()}}]),e}();function SA(e){return xP(e,QN.store)}function TA(e){return xP(e,aP.store)}function EA(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var CA=x((function e(t,n){ni(this,e),this.progress=t,this.In=n})),IA=function(){function e(t,n,r){ni(this,e),this.Je=t,this.An=n,this.Jt=r}return x(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.bn(e,t,r)}))}},{key:"bn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=Zi(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Pn",value:function(e,t){e.forEach((function(e,n){var r,i=Zi(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(o){i.e(o)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Pn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return tI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):KI(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new tI(t)).next((function(e){var t=GR();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,o=GR();return this.Jt.getCollectionParents(e,i).next((function(a){return fP.forEach(a,(function(a){var s=function(e,t){return new jI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.Cn(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"Cn",value:function(e,t,n){var r,i,o=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Nn(e,i,r).next((function(e){r=e;var t,n=Zi(i);try{for(n.s();!(t=n.n()).done;){var o,a=t.value,s=Zi(a.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=u.key,l=r.get(c);null==l&&(l=gI.newInvalidDocument(c),r=r.insert(c,l)),xR(u,l,a.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(h){s.e(h)}finally{s.f()}}}catch(h){n.e(h)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){ZI(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=$R(),o=Zi(t);try{for(o.s();!(r=o.n()).done;){var a,s=Zi(r.value.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value;u instanceof IR&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){o.e(l)}finally{o.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),RA=function(){function e(t,n,r,i){ni(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return x(e,null,[{key:"$n",value:function(t,n){var r,i=$R(),o=$R(),a=Zi(n.docChanges);try{for(a.s();!(r=a.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}}}catch(u){a.e(u)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),NA=function(){function e(){ni(this,e)}return x(e,[{key:"On",value:function(e){this.Mn=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(LC.min())?this.Fn(e,t):this.Mn.vn(e,r).next((function(o){var a=i.Ln(t,o);return(BI(t)||zI(t))&&i.Bn(t.limitType,a,r,n)?i.Fn(e,t):(cC()<=aa.DEBUG&&lC("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),XI(t)),i.Mn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new BR(eR(e));return t.forEach((function(t,r){ZI(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return cC()<=aa.DEBUG&&lC("QueryEngine","Using full collection scan to execute query:",XI(t)),this.Mn.getDocumentsMatchingQuery(e,t,LC.min())}}]),e}(),PA=function(){function e(t,n,r,i){ni(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new jR(PC),this.Kn=new dA((function(e){return _I(e)}),wI),this.jn=LC.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new IA(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}return x(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function AA(e,t,n,r){return new PA(e,t,n,r)}function OA(e,t){return DA.apply(this,arguments)}function DA(){return DA=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),i=r.An,o=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(a){return t=a,i=r.persistence.getMutationQueue(n),o=new IA(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],a=[],s=$R(),u=Zi(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,h=Zi(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=Zi(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;a.push(v.batchId);var y,m=Zi(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return o.vn(e,s).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:a}}))}))}));case 4:return a=e.sent,e.abrupt("return",(r.An=i,r.Wn=o,r.Un.On(r.Wn),a));case 6:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function LA(e,t){var n=yC(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=fP.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);vC(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function MA(e){var t=yC(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function FA(e,t){var n=yC(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var a=[];t.targetChanges.forEach((function(o,s){var u=i.get(s);if(u){a.push(n.He.removeMatchingKeys(e,o.removedDocuments,s).next((function(){return n.He.addMatchingKeys(e,o.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(WC.EMPTY_BYTE_STRING,LC.min()).withLastLimboFreeSnapshotVersion(LC.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,o)&&a.push(n.He.updateTargetData(e,c))}}));var s=HR();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(UA(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(LC.min())){var u=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return fP.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Wn.Vn(e,s)})).next((function(){return s}))})).then((function(e){return n.qn=i,e}))}function UA(e,t,n,r,i){var o=$R();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=HR();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(LC.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):lC("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function jA(e,t){var n=yC(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function qA(e,t){var n=yC(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,fP.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new EP(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function VA(e,t,n){return BA.apply(this,arguments)}function BA(){return BA=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yC(t),o=i.qn.get(n),a=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),mP(e.t1)){e.next=12;break}throw e.t1;case 12:lC("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),BA.apply(this,arguments)}function zA(e,t,n){var r=yC(e),i=LC.min(),o=$R();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=yC(e),i=r.Kn.get(n);return void 0!==i?fP.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,QI(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:LC.min(),n?o:$R())})).next((function(e){return{documents:e,zn:o}}))}))}function WA(e,t){var n=yC(e),r=yC(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function HA(e){var t=yC(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=yC(e),i=HR(),o=NP(n),a=gA(t),s=IDBKeyRange.lowerBound(o,!0);return a.jt({index:eP.readTimeIndex,range:s},(function(e,t){var n=IP(r.k,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{In:i,readTime:PP(o)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function KA(e){return GA.apply(this,arguments)}function GA(){return GA=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yC(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=gA(e),n=LC.min();return t.jt({index:eP.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=PP(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function QA(e,t,n,r){return YA.apply(this,arguments)}function YA(){return YA=o(f().mark((function e(t,n,r,i){var o,a,s,u,c,l,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=yC(t),a=$R(),s=HR(),u=YR(),c=Zi(r);try{for(c.s();!(l=c.n()).done;)h=l.value,d=n.Hn(h.metadata.name),h.document&&(a=a.add(d)),s=s.insert(d,n.Jn(h)),u=u.insert(d,n.Yn(h.metadata.readTime))}catch(f){c.e(f)}finally{c.f()}return p=o.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,qA(o,function(e){return QI(VI(qC.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return UA(e,p,s,LC.min(),u).next((function(t){return p.apply(e),t})).next((function(t){return o.He.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return o.He.addMatchingKeys(e,a,v.targetId)})).next((function(){return o.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function JA(e,t){return $A.apply(this,arguments)}function $A(){return $A=o(f().mark((function e(t,n){var r,i,o,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:$R(),e.next=3,qA(t,QI(FP(n.bundledQuery)));case 3:return i=e.sent,o=yC(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=vN(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ye.saveNamedQuery(e,n);var a=i.withResumeToken(WC.EMPTY_BYTE_STRING,t);return o.qn=o.qn.insert(a.targetId,a),o.He.updateTargetData(e,a).next((function(){return o.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$A.apply(this,arguments)}var XA=function(){function e(t){ni(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return x(e,[{key:"getBundleMetadata",value:function(e,t){return fP.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:vN(n.createTime)}),fP.resolve()}},{key:"getNamedQuery",value:function(e,t){return fP.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:FP(e.bundledQuery),readTime:vN(e.readTime)}}(t)),fP.resolve()}}]),e}(),ZA=function(){function e(){ni(this,e),this.ts=new BR(eO.es),this.ns=new BR(eO.ss)}return x(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new eO(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new eO(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new tI(new qC([])),r=new eO(n,e),i=new eO(n,e+1),o=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),o.push(e.key)})),o}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new tI(new qC([])),n=new eO(t,e),r=new eO(t,e+1),i=$R();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new eO(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),eO=function(){function e(t,n){ni(this,e),this.key=t,this.fs=n}return x(e,null,[{key:"es",value:function(e,t){return tI.comparator(e.key,t.key)||PC(e.fs,t.fs)}},{key:"ss",value:function(e,t){return PC(e.fs,t.fs)||tI.comparator(e.key,t.key)}}]),e}(),tO=function(){function e(t,n){ni(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new BR(eO.es)}return x(e,[{key:"checkEmpty",value:function(e){return fP.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var o=new SP(i,t,n,r);this.An.push(o);var a,s=Zi(r);try{for(s.s();!(a=s.n()).done;){var u=a.value;this.ws=this.ws.add(new eO(u.key,i)),this.Jt.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return fP.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return fP.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return fP.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return fP.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return fP.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new eO(t,0),i=new eO(t,Number.POSITIVE_INFINITY),o=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);o.push(t)})),fP.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new BR(PC);return t.forEach((function(e){var t=new eO(e,0),i=new eO(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),fP.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;tI.isDocumentKey(i)||(i=i.child(""));var o=new eO(new tI(i),0),a=new BR(PC);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.fs)),!0)}),o),fP.resolve(this.ys(a))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;vC(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return fP.forEach(t.mutations,(function(i){var o=new eO(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new eO(t,0),r=this.ws.firstAfterOrEqual(n);return fP.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,fP.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),nO=function(){function e(t,n){ni(this,e),this.Jt=t,this.Ts=n,this.docs=new jR(tI.comparator),this.size=0}return x(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a,readTime:n}),this.size+=a-o,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return fP.resolve(n?n.document.mutableCopy():gI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=HR();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gI.newInvalidDocument(e))})),fP.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=HR(),i=new tI(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||ZI(t,c)&&(r=r.insert(c.key,c.mutableCopy()))}return fP.resolve(r)}},{key:"Es",value:function(e,t){return fP.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new rO(this)}},{key:"getSize",value:function(e){return fP.resolve(this.size)}}]),e}(),rO=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).De=e,r}return x(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),fP.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(pA),iO=function(){function e(t){ni(this,e),this.persistence=t,this.Is=new dA((function(e){return _I(e)}),wI),this.lastRemoteSnapshotVersion=LC.min(),this.highestTargetId=0,this.As=0,this.Rs=new ZA,this.targetCount=0,this.bs=eA.ie()}return x(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),fP.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return fP.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return fP.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),fP.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),fP.resolve()}},{key:"ae",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new eA(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,fP.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),fP.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,fP.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.Is.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Is.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),fP.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return fP.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return fP.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),fP.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),fP.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),fP.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return fP.resolve(n)}},{key:"containsKey",value:function(e,t){return fP.resolve(this.Rs.containsKey(t))}}]),e}(),oO=function(){function e(t,n){var r=this;ni(this,e),this.Ps={},this.Be=new IC(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new iO(this),this.Jt=new VP,this.Je=function(e,t){return new nO(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new CP(n),this.Ye=new XA(this.k)}return x(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.Ps[e.toKey()];return t||(t=new tO(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;lC("MemoryPersistence","Starting transaction:",e);var i=new aO(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return fP.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aO=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return x(n)}(hP),sO=function(){function e(t){ni(this,e),this.persistence=t,this.Cs=new ZA,this.Ns=null}return x(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw pC()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),fP.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),fP.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),fP.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fP.forEach(this.xs,(function(r){var i=tI.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return fP.or([function(){return fP.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function uO(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cO(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lO(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hO=function(){function e(t,n,r,i){ni(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return x(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&((a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new gC(o.error.code,o.error.message))),a?new e(t,n,o.state,i):(hC("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fO=function(){function e(t,n,r){ni(this,e),this.targetId=t,this.state=n,this.error=r}return x(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gC(i.error.code,i.error.message))),o?new e(t,i.state,r):(hC("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dO=function(){function e(t,n){ni(this,e),this.clientId=t,this.activeTargetIds=n}return x(e,null,[{key:"Os",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ZR(),a=0;i&&a<r.activeTargetIds.length;++a)i=eI(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(hC("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pO=function(){function e(t,n){ni(this,e),this.clientId=t,this.onlineState=n}return x(e,null,[{key:"Os",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(hC("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vO=function(){function e(){ni(this,e),this.activeTargetIds=ZR()}return x(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Ms",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yO=function(){function e(t,n,r,i,o){ni(this,e),this.window=t,this.Me=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new jR(PC),this.started=!1,this.js=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Qs=uO(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new vO),this.Gs=new RegExp("^firestore_clients_".concat(a,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(a,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(a,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return x(e,[{key:"start",value:function(){var e=o(f().mark((function e(){var t,n,r,i,o,a,s,u,c,l,h,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=Zi(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(uO(this.persistenceKey,i)))&&(a=dO.Os(i,o))&&(this.Ks=this.Ks.insert(a.clientId,a));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(s=this.storage.getItem(this.Js))&&(u=this.Zs(s))&&this.ti(u),c=Zi(this.js);try{for(c.s();!(l=c.n()).done;)h=l.value,this.qs(h)}catch(f){c.e(f)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lO(this.persistenceKey,e));if(n){var r=fO.Os(e,n);r&&(t=r.state)}}return this.ii.Fs(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lO(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ci()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return lC("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){lC("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){lC("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(lC("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void hC("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable(o(f().mark((function e(){var r,i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(o));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(a=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(a));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(s));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}u=function(e){var t=IC.I;if(null!=e)try{var n=JSON.parse(e);vC("number"==typeof n),t=n}catch(e){hC("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==IC.I&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Ms())}},{key:"ni",value:function(e,t,n){var r=new hO(this.currentUser,e,t,n),i=cO(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ms())}},{key:"si",value:function(e){var t=cO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=lO(this.persistenceKey,e),i=new fO(e,t,n);this.setItem(r,i.Ms())}},{key:"ci",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ai",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ai(e);return dO.Os(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hO.Os(new aC(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return fO.Os(r,t)}},{key:"Zs",value:function(e){return pO.Os(e)}},{key:"fi",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:lC("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),o=this.ei(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.yi(a,s).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=ZR();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Pt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),mO=function(){function e(){ni(this,e),this.pi=new vO,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return x(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new vO,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),gO=function(){function e(){ni(this,e)}return x(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kO=function(){function e(){var t=this;ni(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.bi()},this.Pi=[],this.vi()}return x(e,[{key:"Ei",value:function(e){this.Pi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){lC("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Zi(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"bi",value:function(){lC("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Zi(this.Pi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Pt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_O=function(){function e(t){ni(this,e),this.Vi=t.Vi,this.Si=t.Si}return x(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Oi",value:function(e){this.ki(e)}},{key:"Mi",value:function(e){this.xi(e)}}]),e}(),wO=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return x(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,o){var a=new iC;a.listenOnce(ZE.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case XE.NO_ERROR:var t=a.getResponseJson();lC("Connection","XHR received:",JSON.stringify(t)),i(t);break;case XE.TIMEOUT:lC("Connection",'RPC "'+e+'" timed out'),o(new gC(mC.DEADLINE_EXCEEDED,"Request time out"));break;case XE.HTTP_ERROR:var n=a.getStatus();if(lC("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(mC).indexOf(t)>=0?t:mC.UNKNOWN}(r.status);o(new gC(s,r.message))}else o(new gC(mC.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new gC(mC.UNAVAILABLE,"Connection failed."));break;default:pC()}}finally{lC("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=JE(),o=$E(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new nC({})),this.qi(a.initMessageHeaders,t,n),xo()||Eo()||wo().indexOf("Electron/")>=0||Co()||wo().indexOf("MSAppHost/")>=0||To()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");lC("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,h=new _O({Vi:function(e){l?lC("Connection","Not sending because WebChannel is closed:",e):(c||(lC("Connection","Opening WebChannel transport."),u.open(),c=!0),lC("Connection","WebChannel sending:",e),u.send(e))},Si:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,rC.EventType.OPEN,(function(){l||lC("Connection","WebChannel transport opened.")})),f(u,rC.EventType.CLOSE,(function(){l||(l=!0,lC("Connection","WebChannel transport closed"),h.Oi())})),f(u,rC.EventType.ERROR,(function(e){l||(l=!0,fC("Connection","WebChannel transport errored:",e),h.Oi(new gC(mC.UNAVAILABLE,"The operation could not be completed")))})),f(u,rC.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];vC(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){lC("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=AR[e];if(void 0!==t)return UR(t)}(o),s=i.message;void 0===a&&(a=mC.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Oi(new gC(a,s)),u.close()}else lC("Connection","WebChannel received:",n),h.Mi(n)}})),f(o,eC.STAT_EVENT,(function(e){e.stat===tC.PROXY?lC("Connection","Detected buffering proxy"):e.stat===tC.NOPROXY&&lC("Connection","Detected no buffering proxy")})),setTimeout((function(){h.$i()}),0),h}}]),n}(function(){function e(t){ni(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return x(e,[{key:"Bi",value:function(e,t,n,r,i){var o=this.Ui(e,t);lC("RestConnection","Sending: ",o,n);var a={};return this.qi(a,r,i),this.Ki(e,o,a,n).then((function(e){return lC("RestConnection","Received: ",e),e}),(function(t){throw fC("RestConnection","".concat(e," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sC,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=bO[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function xO(){return"undefined"!=typeof window?window:null}function SO(){return"undefined"!=typeof document?document:null}function TO(e){return new hN(e,!0)}var EO=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ni(this,e),this.Me=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=o,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return x(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&lC("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),CO=function(){function e(t,n,r,i,o,a,s,u){ni(this,e),this.Me=t,this.nr=r,this.sr=i,this.ir=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new EO(t,n)}return x(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"pr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"close",value:function(){var e=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===mC.RESOURCE_EXHAUSTED?(hC(n.toString()),hC("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===mC.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],o=r[1];e.rr===n&&e.Ir(i,o)}),(function(n){t((function(){var t=new gC(mC.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.ar=n.Me.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return lC("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Me.enqueueAndForget((function(){return t.rr===e?n():(lC("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),IO=function(e){eo(n,e);var t=io(n);function n(e,r,i,o,a,s){var u;return ni(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).k=a,u}return x(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pC()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.C?(vC(void 0===t||"string"==typeof t),WC.fromBase64String(t||"")):(vC(void 0===t||t instanceof Uint8Array),WC.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){var t=void 0===e.code?mC.UNKNOWN:UR(e.code);return new gC(t,e.message||"")}(a);n=new iN(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=kN(e,u.document.name),l=vN(u.document.updateTime),h=new yI({mapValue:{fields:u.document.fields}}),f=gI.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new nN(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=kN(e,v.document),m=v.readTime?vN(v.readTime):LC.min(),g=gI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new nN([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=kN(e,b.document),w=b.removedTargetIds||[];n=new nN([],w,_,null)}else{if(!("filter"in t))return pC();t.filter;var x=t.filter;x.targetId;var S=x.count||0,T=new MR(S),E=x.targetId;n=new rN(E,T)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return LC.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?LC.min():t.readTime?vN(t.readTime):LC.min()}(e);return this.listener.br(t,n)}},{key:"Pr",value:function(e){var t={};t.database=wN(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=xI(r)?{documents:RN(e,r)}:{query:NN(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=dN(e,t.resumeToken):t.snapshotVersion.compareTo(LC.min())>0&&(n.readTime=fN(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pC()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=wN(this.k),t.removeTarget=e,this.gr(t)}}]),n}(CO),RO=function(e){eo(n,e);var t=io(n);function n(e,r,i,o,a,s){var u;return ni(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).k=a,u.Vr=!1,u}return x(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,Xa(to(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(vC(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(vC(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?vN(e.updateTime):vN(t);return n.isEqual(LC.min())&&(n=vN(t)),new gR(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=vN(e.commitTime);return this.listener.Cr(n,t)}return vC(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=wN(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return CN(t.k,e)}))};this.gr(n)}}]),n}(CO),NO=function(e){eo(n,e);var t=io(n);function n(e,r,i,o){var a;return ni(this,n),(a=t.call(this)).authCredentials=e,a.appCheckCredentials=r,a.ir=i,a.k=o,a.$r=!1,a}return x(n,[{key:"Or",value:function(){if(this.$r)throw new gC(mC.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=l(i,2),a=o[0],s=o[1];return r.ir.Bi(e,t,n,a,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===mC.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gC(mC.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=l(i,2),a=o[0],s=o[1];return r.ir.ji(e,t,n,a,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===mC.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new gC(mC.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return x((function e(){ni(this,e)}))}()),PO=function(){function e(t,n){ni(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}return x(e,[{key:"Br",value:function(){var e=this;0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Fr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(hC(t),this.Lr=!1):lC("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}]),e}(),AO=x((function e(t,n,r,i,a){var s=this;ni(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zO(s),!e.t0){e.next=5;break}return lC("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yC(t)).Gr.add(4),e.next=4,LO(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,OO(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new PO(r,i)}));function OO(e){return DO.apply(this,arguments)}function DO(){return DO=o(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zO(t)){e.next=18;break}n=Zi(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),DO.apply(this,arguments)}function LO(e){return MO.apply(this,arguments)}function MO(){return MO=o(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Zi(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),MO.apply(this,arguments)}function FO(e,t){var n=yC(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),BO(n)?VO(n):gD(n).lr()&&jO(n,t))}function UO(e,t){var n=yC(e),r=gD(n);n.Wr.delete(t),r.lr()&&qO(n,t),0===n.Wr.size&&(r.lr()?r._r():zO(n)&&n.Jr.set("Unknown"))}function jO(e,t){e.Yr.X(t.targetId),gD(e).Pr(t)}function qO(e,t){e.Yr.X(t),gD(e).vr(t)}function VO(e){e.Yr=new aN({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),gD(e).start(),e.Jr.Br()}function BO(e){return zO(e)&&!gD(e).hr()&&e.Wr.size>0}function zO(e){return 0===yC(e).Gr.size}function WO(e){e.Yr=void 0}function HO(e){return KO.apply(this,arguments)}function KO(){return KO=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){jO(t,e)}));case 1:case"end":return e.stop()}}),e)}))),KO.apply(this,arguments)}function GO(e,t){return QO.apply(this,arguments)}function QO(){return QO=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WO(t),BO(t)?(t.Jr.Kr(n),VO(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),QO.apply(this,arguments)}function YO(e,t,n){return JO.apply(this,arguments)}function JO(){return JO=o(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof iN&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Zi(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(a=o.value,e.t0=t.Wr.has(a),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(a,r);case 10:t.Wr.delete(a),t.Yr.removeTarget(a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),lC("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$O(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof nN?t.Yr.ot(n):n instanceof rN?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(LC.min())){e.next=29;break}return e.prev=14,e.next=17,MA(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(WC.EMPTY_BYTE_STRING,n.snapshotVersion)),qO(e,t);var r=new EP(n.target,t,1,n.sequenceNumber);jO(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),lC("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$O(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),JO.apply(this,arguments)}function $O(e,t,n){return XO.apply(this,arguments)}function XO(){return XO=o(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mP(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,LO(t);case 5:t.Jr.set("Offline"),r||(r=function(){return MA(t.localStore)}),t.asyncQueue.enqueueRetryable(o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lC("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,OO(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),XO.apply(this,arguments)}function ZO(e,t){return t().catch((function(n){return $O(e,n,t)}))}function eD(e){return tD.apply(this,arguments)}function tD(){return tD=o(f().mark((function e(t){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yC(t),r=kD(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!nD(n)){e.next=19;break}return e.prev=3,e.next=6,jA(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=o.batchId,rD(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$O(n,e.t0);case 17:e.next=2;break;case 19:iD(n)&&oD(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),tD.apply(this,arguments)}function nD(e){return zO(e)&&e.Qr.length<10}function rD(e,t){e.Qr.push(t);var n=kD(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function iD(e){return zO(e)&&!kD(e).hr()&&e.Qr.length>0}function oD(e){kD(e).start()}function aD(e){return sD.apply(this,arguments)}function sD(){return sD=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kD(t).kr();case 1:case"end":return e.stop()}}),e)}))),sD.apply(this,arguments)}function uD(e){return cD.apply(this,arguments)}function cD(){return cD=o(f().mark((function e(t){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kD(t),r=Zi(t.Qr);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Dr(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),cD.apply(this,arguments)}function lD(e,t,n){return hD.apply(this,arguments)}function hD(){return hD=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),o=TP.from(i,n,r),e.next=3,ZO(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,eD(t);case 5:case"end":return e.stop()}}),e)}))),hD.apply(this,arguments)}function fD(e,t){return dD.apply(this,arguments)}function dD(){return dD=o(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&kD(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!FR(i=n.code)||i===mC.ABORTED){e.next=7;break}return r=t.Qr.shift(),kD(t).wr(),e.next=5,ZO(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,eD(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:iD(t)&&oD(t);case 5:case"end":return e.stop()}}),e)}))),dD.apply(this,arguments)}function pD(e,t){return vD.apply(this,arguments)}function vD(){return vD=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yC(t)).asyncQueue.verifyOperationInProgress(),lC("RemoteStore","RemoteStore received new credentials"),i=zO(r),r.Gr.add(3),e.next=6,LO(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,OO(r);case 12:case"end":return e.stop()}}),e)}))),vD.apply(this,arguments)}function yD(e,t){return mD.apply(this,arguments)}function mD(){return mD=o(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yC(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,OO(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,LO(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),mD.apply(this,arguments)}function gD(e){return e.Xr||(e.Xr=function(e,t,n){var r=yC(e);return r.Or(),new IO(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:HO.bind(null,e),Ni:GO.bind(null,e),br:YO.bind(null,e)}),e.zr.push(function(){var t=o(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),BO(e)?VO(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:WO(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function kD(e){return e.Zr||(e.Zr=function(e,t,n){var r=yC(e);return r.Or(),new RO(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:aD.bind(null,e),Ni:fD.bind(null,e),Nr:uD.bind(null,e),Cr:lD.bind(null,e)}),e.zr.push(function(){var t=o(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,eD(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(lC("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var bD=function(){function e(t,n,r,i,o){ni(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kC,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return x(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gC(mC.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function _D(e,t){if(hC("AsyncQueue","".concat(t,": ").concat(e)),mP(e))return new gC(mC.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var wD=function(){function e(t){ni(this,e),this.comparator=t?function(e,n){return t(e,n)||tI.comparator(e.key,n.key)}:function(e,t){return tI.comparator(e.key,t.key)},this.keyedMap=GR(),this.sortedSet=new jR(this.comparator)}return x(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xD=function(){function e(){ni(this,e),this.eo=new jR(tI.comparator)}return x(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):pC():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),SD=function(){function e(t,n,r,i,o,a,s,u){ni(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u}return x(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&JI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,wD.emptySet(n),o,r,i,!0,!1)}}]),e}(),TD=x((function e(){ni(this,e),this.so=void 0,this.listeners=[]})),ED=x((function e(){ni(this,e),this.queries=new dA((function(e){return $I(e)}),JI),this.onlineState="Unknown",this.io=new Set}));function CD(e,t){return ID.apply(this,arguments)}function ID(){return ID=o(f().mark((function e(t,n){var r,i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yC(t),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new TD),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:a.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=_D(e.t0,"Initialization of query '".concat(XI(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,a),a.listeners.push(n),n.ro(r.onlineState),a.so&&n.oo(a.so)&&OD(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ID.apply(this,arguments)}function RD(e,t){return ND.apply(this,arguments)}function ND(){return ND=o(f().mark((function e(t,n){var r,i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yC(t),i=n.query,o=!1,(a=r.queries.get(i))&&(s=a.listeners.indexOf(n))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ND.apply(this,arguments)}function PD(e,t){var n,r=yC(e),i=!1,o=Zi(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.query,u=r.queries.get(s);if(u){var c,l=Zi(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(a)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.so=a}}}catch(h){o.e(h)}finally{o.f()}i&&OD(r)}function AD(e,t,n){var r=yC(e),i=r.queries.get(t);if(i){var o,a=Zi(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(s){a.e(s)}finally{a.f()}}r.queries.delete(t)}function OD(e){e.io.forEach((function(e){e.next()}))}var DD=function(){function e(t,n,r){ni(this,e),this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return x(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Zi(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new SD(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.ao?this.ho(e)&&(this.co.next(e),o=!0):this.lo(e,this.onlineState)&&(this.fo(e),o=!0),this.uo=e,o}},{key:"onError",value:function(e){this.co.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=SD.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}]),e}(),LD=function(){function e(t,n){ni(this,e),this.payload=t,this.byteLength=n}return x(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),MD=function(){function e(t){ni(this,e),this.k=t}return x(e,[{key:"Hn",value:function(e){return kN(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?TN(this.k,e.document,!1):gI.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return vN(e)}}]),e}(),FD=function(){function e(t,n,r){ni(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=UD(t)}return x(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new MD(this.k),i=Zi(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.metadata.queries){var a,s=r.Hn(o.metadata.name),u=Zi(o.metadata.queries);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=(n.get(c)||$R()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=o(f().mark((function e(){var t,n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QA(this.localStore,new MD(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=Zi(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,JA(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new CA(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function UD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var jD=x((function e(t){ni(this,e),this.key=t})),qD=x((function e(t){ni(this,e),this.key=t})),VD=function(){function e(t,n){ni(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=$R(),this.mutatedKeys=$R(),this.Ao=eR(t),this.Ro=new wD(this.Ao)}return x(e,[{key:"bo",get:function(){return this.To}},{key:"Po",value:function(e,t){var n=this,r=t?t.vo:new xD,i=t?t.Ro:this.Ro,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=BI(this.query)&&i.size===this.query.limit?i.last():null,c=zI(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=ZI(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Vo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ao(h,u)>0||c&&n.Ao(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),BI(this.query)||zI(this.query))for(;a.size>this.query.limit;){var l=BI(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Ro:a,vo:r,Bn:s,mutatedKeys:o}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var o=e.vo.no();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pC()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var a=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==o.length||u?{snapshot:new SD(this.query,e.Ro,i,o,e.mutatedKeys,0===s,u,!1),Co:a}:{Co:a}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new xD,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=$R(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new qD(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new jD(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=$R();var t=this.Po(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return SD.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),BD=x((function e(t,n,r){ni(this,e),this.query=t,this.targetId=n,this.view=r})),zD=x((function e(t){ni(this,e),this.key=t,this.$o=!1})),WD=function(){function e(t,n,r,i,o,a){ni(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Oo={},this.Mo=new dA((function(e){return $I(e)}),JI),this.Fo=new Map,this.Lo=new Set,this.Bo=new jR(tI.comparator),this.Uo=new Map,this.qo=new ZA,this.Ko={},this.jo=new Map,this.Qo=eA.re(),this.onlineState="Unknown",this.Wo=void 0}return x(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function HD(e,t){return KD.apply(this,arguments)}function KD(){return KD=o(f().mark((function e(t,n){var r,i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=UL(t),!(a=r.Mo.get(n))){e.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.xo(),e.next=15;break;case 6:return e.next=8,qA(r.localStore,QI(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,GD(r,n,i,"current"===u);case 13:o=e.sent,r.isPrimaryClient&&FO(r.remoteStore,s);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),KD.apply(this,arguments)}function GD(e,t,n,r){return QD.apply(this,arguments)}function QD(){return QD=o(f().mark((function e(t,n,r,i){var a,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=o(f().mark((function e(t,n,r,i){var o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.Po(r),e.t0=o.Bn,!e.t0){e.next=6;break}return e.next=5,zA(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Po(t,o)}));case 5:o=e.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,a),e.abrupt("return",(pL(t,n.targetId,s.Co),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zA(t.localStore,n,!0);case 3:return a=e.sent,s=new VD(n,a.zn),u=s.Po(a.documents),c=tN.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=s.applyChanges(u,t.isPrimaryClient,c),pL(t,r,l.Co),h=new BD(n,r,s),e.abrupt("return",(t.Mo.set(n,h),t.Fo.has(r)?t.Fo.get(r).push(n):t.Fo.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),QD.apply(this,arguments)}function YD(e,t){return JD.apply(this,arguments)}function JD(){return JD=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yC(t),i=r.Mo.get(n),!((o=r.Fo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Fo.set(i.targetId,o.filter((function(e){return!JI(e,n)}))),void r.Mo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,VA(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),UO(r.remoteStore,i.targetId),fL(r,i.targetId)})).catch(oA);case 9:e.next=14;break;case 11:return fL(r,i.targetId),e.next=14,VA(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),JD.apply(this,arguments)}function $D(e,t,n){return XD.apply(this,arguments)}function XD(){return XD=o(f().mark((function e(t,n,r){var i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jL(t),e.prev=1,e.next=4,function(e,t){var n,r=yC(e),i=DC.now(),o=t.reduce((function(e,t){return e.add(t.key)}),$R());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,o).next((function(o){n=o;var a,s=[],u=Zi(t);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=SR(c,n.get(c.key));null!=l&&s.push(new IR(c.key,l,mI(l.value.mapValue),kR.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.An.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new jR(PC)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,mL(i,o.changes);case 9:return e.next=11,eD(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a=_D(e.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),XD.apply(this,arguments)}function ZD(e,t){return eL.apply(this,arguments)}function eL(){return eL=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),e.prev=1,e.next=4,FA(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(vC(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?vC(n.$o):e.removedDocuments.size>0&&(vC(n.$o),n.$o=!1))})),e.next=8,mL(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,oA(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),eL.apply(this,arguments)}function tL(e,t,n){var r=yC(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Mo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=yC(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,o=Zi(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.ro(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}})),r&&OD(n)}(r.eventManager,t),i.length&&r.Oo.br(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function nL(e,t,n){return rL.apply(this,arguments)}function rL(){return rL=o(f().mark((function e(t,n,r){var i,o,a,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yC(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.Uo.get(n),!(a=o&&o.key)){e.next=14;break}return s=(s=new jR(tI.comparator)).insert(a,gI.newNoDocument(a,LC.min())),u=$R().add(a),c=new eN(LC.min(),new Map,new BR(PC),s,u),e.next=9,ZD(i,c);case 9:i.Bo=i.Bo.remove(a),i.Uo.delete(n),yL(i),e.next=16;break;case 14:return e.next=16,VA(i.localStore,n,!1).then((function(){return fL(i,n,r)})).catch(oA);case 16:case"end":return e.stop()}}),e)}))),rL.apply(this,arguments)}function iL(e,t){return oL.apply(this,arguments)}function oL(){return oL=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),i=n.batch.batchId,e.prev=1,e.next=4,LA(r.localStore,n);case 4:return o=e.sent,hL(r,i,null),lL(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,mL(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,oA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),oL.apply(this,arguments)}function aL(e,t,n){return sL.apply(this,arguments)}function sL(){return sL=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yC(t),e.prev=1,e.next=4,function(e,t){var n=yC(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return vC(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,hL(i,n,r),lL(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,mL(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,oA(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),sL.apply(this,arguments)}function uL(e,t){return cL.apply(this,arguments)}function cL(){return cL=o(f().mark((function e(t,n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zO((r=yC(t)).remoteStore)||lC("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yC(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.jo.get(i)||[]).push(n),r.jo.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),a=_D(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(a);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),cL.apply(this,arguments)}function lL(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function hL(e,t,n){var r=yC(e),i=r.Ko[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function fL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Zi(e.Fo.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.Mo.delete(o),n&&e.Oo.zo(o,n)}}catch(a){i.e(a)}finally{i.f()}e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||dL(e,t)}))}function dL(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(UO(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),yL(e))}function pL(e,t,n){var r,i=Zi(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof jD?(e.qo.addReference(o.key,t),vL(e,o)):o instanceof qD?(lC("SyncEngine","Document no longer in limbo: "+o.key),e.qo.removeReference(o.key,t),e.qo.containsKey(o.key)||dL(e,o.key)):pC()}}catch(a){i.e(a)}finally{i.f()}}function vL(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(lC("SyncEngine","New document in limbo: "+n),e.Lo.add(r),yL(e))}function yL(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new tI(qC.fromString(t)),r=e.Qo.next();e.Uo.set(r,new zD(n)),e.Bo=e.Bo.insert(n,r),FO(e.remoteStore,new EP(QI(VI(n.path)),r,2,IC.I))}}function mL(e,t,n){return gL.apply(this,arguments)}function gL(){return gL=o(f().mark((function e(t,n,r){var i,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yC(t),a=[],s=[],u=[],e.t0=i.Mo.isEmpty(),e.t0){e.next=9;break}return i.Mo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=RA.$n(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Oo.br(a),e.next=9,function(){var e=o(f().mark((function e(t,n){var r,i,o,a,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return fP.forEach(n,(function(t){return fP.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return fP.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),mP(e.t0)){e.next=10;break}throw e.t0;case 10:lC("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Zi(n);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.targetId,a.fromCache||(u=r.qn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),gL.apply(this,arguments)}function kL(e,t){return bL.apply(this,arguments)}function bL(){return bL=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yC(t)).currentUser.isEqual(n)){e.next=11;break}return lC("SyncEngine","User change. New user:",n.toKey()),e.next=5,OA(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new gC(mC.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,mL(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),bL.apply(this,arguments)}function _L(e,t){var n=yC(e),r=n.Uo.get(t);if(r&&r.$o)return $R().add(r.key);var i=$R(),o=n.Fo.get(t);if(!o)return i;var a,s=Zi(o);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=n.Mo.get(u);i=i.unionWith(c.view.bo)}}catch(l){s.e(l)}finally{s.f()}return i}function wL(e,t){return xL.apply(this,arguments)}function xL(){return xL=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),e.next=3,zA(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&pL(r,n.targetId,o.Co),o));case 6:case"end":return e.stop()}}),e)}))),xL.apply(this,arguments)}function SL(e){return TL.apply(this,arguments)}function TL(){return TL=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yC(t),e.abrupt("return",HA(n.localStore).then((function(e){return mL(n,e)})));case 2:case"end":return e.stop()}}),e)}))),TL.apply(this,arguments)}function EL(e,t,n,r){return CL.apply(this,arguments)}function CL(){return CL=o(f().mark((function e(t,n,r,i){var o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=yC(t),e.next=3,function(e,t){var n=yC(e),r=yC(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):fP.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(a=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,eD(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hL(o,n,i||null),lL(o,n),function(e,t){yC(yC(e).An).ee(t)}(o.localStore,n)):pC();case 11:return e.next=13,mL(o,a);case 13:e.next=16;break;case 15:lC("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),CL.apply(this,arguments)}function IL(e,t){return RL.apply(this,arguments)}function RL(){return RL=o(f().mark((function e(t,n){var r,i,o,a,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(UL(r=yC(t)),jL(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,NL(r,i.toArray());case 5:return o=e.sent,r.Wo=!0,e.next=9,yD(r.remoteStore,!0);case 9:a=Zi(o);try{for(a.s();!(s=a.n()).done;)u=s.value,FO(r.remoteStore,u)}catch(h){a.e(h)}finally{a.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Fo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return fL(r,t),VA(r.localStore,t,!0)})),UO(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,NL(r,c);case 21:return function(e){var t=yC(e);t.Uo.forEach((function(e,n){UO(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new jR(tI.comparator)}(r),r.Wo=!1,e.next=25,yD(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),RL.apply(this,arguments)}function NL(e,t,n){return PL.apply(this,arguments)}function PL(){return PL=o(f().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,d,p,v,y,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=yC(t),o=[],a=[],s=Zi(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.Fo.get(c))||0===h.length){e.next=34;break}return e.next=11,qA(i.localStore,QI(h[0]));case 11:l=e.sent,d=Zi(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.Mo.get(v),e.next=20,wL(i,y);case 20:(m=e.sent).snapshot&&a.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,WA(i.localStore,c);case 36:return g=e.sent,e.next=39,qA(i.localStore,g);case 39:return l=e.sent,e.next=42,GD(i,AL(g),c,!1);case 42:o.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Oo.br(a),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),PL.apply(this,arguments)}function AL(e){return qI(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function OL(e){var t=yC(e);return yC(yC(t.localStore).persistence).Tn()}function DL(e,t,n,r){return LL.apply(this,arguments)}function LL(){return LL=o(f().mark((function e(t,n,r,i){var o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=yC(t)).Wo){e.next=5;break}lC("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!o.Fo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,HA(o.localStore);case 11:return a=e.sent,s=eN.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,mL(o,a,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,VA(o.localStore,n,!0);case 18:return fL(o,n,i),e.abrupt("break",21);case 20:pC();case 21:case"end":return e.stop()}}),e)}))),LL.apply(this,arguments)}function ML(e,t,n){return FL.apply(this,arguments)}function FL(){return FL=o(f().mark((function e(t,n,r){var i,o,a,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=UL(t)).Wo){e.next=45;break}o=Zi(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=21;break}if(s=a.value,!i.Fo.has(s)){e.next=10;break}return lC("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,WA(i.localStore,s);case 12:return u=e.sent,e.next=15,qA(i.localStore,u);case 15:return c=e.sent,e.next=18,GD(i,AL(u),c.targetId,!1);case 18:FO(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:l=Zi(r),e.prev=30,d=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.Fo.has(t),!e.t0){e.next=5;break}return e.next=5,VA(i.localStore,t,!1).then((function(){UO(i.remoteStore,t),fL(i,t)})).catch(oA);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),FL.apply(this,arguments)}function UL(e){var t=yC(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_L.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nL.bind(null,t),t.Oo.br=PD.bind(null,t.eventManager),t.Oo.zo=AD.bind(null,t.eventManager),t}function jL(e){var t=yC(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aL.bind(null,t),t}function qL(e,t,n){var r=yC(e);(function(){var e=o(f().mark((function e(t,n,r){var i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yC(e),r=vN(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(UD(i)),o=new FD(i,t.localStore,n.k),e.next=14,n.Ho();case 14:a=e.sent;case 15:if(!a){e.next=25;break}return e.next=18,o.yo(a);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Ho();case 22:a=e.sent;case 23:e.next=15;break;case 25:return e.next=27,o.complete();case 27:return u=e.sent,e.next=30,mL(t,u.In,void 0);case 30:return e.next=32,function(e,t){var n=yC(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),fC("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var VL=function(){function e(){ni(this,e),this.synchronizeTabs=!1}return x(e,[{key:"initialize",value:function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=TO(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return AA(this.persistence,new NA,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new oO(sO.ks,this.k)}},{key:"Jo",value:function(e){return new mO}},{key:"terminate",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BL=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).tc=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return x(n,[{key:"initialize",value:function(){var e=o(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(to(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,KA(this.localStore);case 4:return e.next=6,this.tc.initialize(this,t);case 6:return e.next=8,jL(this.tc.syncEngine);case 8:return e.next=10,eD(this.tc.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return AA(this.persistence,new NA,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new cA(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=EA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?KP.withCacheSize(this.cacheSizeBytes):KP.DEFAULT;return new xA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xO(),SO(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new mO}}]),n}(VL),zL=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,r,!1)).tc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return x(n,[{key:"initialize",value:function(){var e=o(f().mark((function e(t){var r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(to(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.tc.syncEngine,e.t0=this.sharedClientState instanceof yO,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:EL.bind(null,r),gi:DL.bind(null,r),yi:ML.bind(null,r),Tn:OL.bind(null,r),_i:SL.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IL(i.tc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=xO();if(!yO.Pt(t))throw new gC(mC.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=EA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yO(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BL),WL=function(){function e(){ni(this,e)}return x(e,[{key:"initialize",value:function(){var e=o(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return tL(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=kL.bind(null,this.syncEngine),e.next=12,yD(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ED}},{key:"createDatastore",value:function(e){var t,n=TO(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new wO(t));return function(e,t,n,r){return new NO(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return tL(a.syncEngine,e,0)},o=kO.Pt()?new kO:new gO,new AO(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,o,a){var s=new WD(e,t,n,r,i,o);return a&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yC(t),lC("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,LO(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function HL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return o(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KL=function(){function e(t){ni(this,e),this.observer=t,this.muted=!1}return x(e,[{key:"next",value:function(e){this.observer.next&&this.ec(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"nc",value:function(){this.muted=!0}},{key:"ec",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GL=function(){function e(t,n){var r=this;ni(this,e),this.sc=t,this.k=n,this.metadata=new kC,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return x(e,[{key:"close",value:function(){return this.sc.cancel()}},{key:"getMetadata",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rc",value:function(){var e=o(f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ic.decode(t),r=Number(n),isNaN(r)&&this.cc("length string (".concat(n,") is not valid number")),e.next=9,this.ac(r);case 9:return i=e.sent,e.abrupt("return",new LD(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oc",value:function(){var e=o(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.uc()<0)){e.next=7;break}return e.next=3,this.hc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.uc())<0&&this.cc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ac",value:function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.hc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.cc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ic.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cc",value:function(e){throw this.sc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"hc",value:function(){var e=o(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),QL=function(){function e(t){ni(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return x(e,[{key:"lookup",value:function(){var e=o(f().mark((function e(t){var n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new gC(mC.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=o(f().mark((function e(t,n){var r,i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),i=wN(r.k)+"/documents",o={documents:n.map((function(e){return gN(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,o);case 5:return a=e.sent,s=new Map,a.forEach((function(e){var t=EN(r.k,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());vC(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new DR(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=o(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=tI.fromPath(t);n.mutations.push(new LR(r,n.precondition(r)))})),e.next=7,function(){var e=o(f().mark((function e(t,n){var r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yC(t),i=wN(r.k)+"/documents",o={writes:n.map((function(e){return CN(r.k,e)}))},e.next=3,r.Bi("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pC();t=LC.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gC(mC.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kR.updateTime(t):kR.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(LC.min()))throw new gC(mC.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kR.updateTime(t)}return kR.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),YL=function(){function e(t,n,r,i){ni(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new EO(this.asyncQueue,"transaction_retry")}return x(e,[{key:"run",value:function(){this.lc-=1,this.fc()}},{key:"fc",value:function(){var e=this;this.ur.Zi(o(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new QL(e.datastore),(r=e.dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wc(t)}))}))})).catch((function(t){e.wc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"dc",value:function(e){try{var t=this.updateFunction(e);return!XC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wc",value:function(e){var t=this;this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((function(){return t.fc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!FR(t)}return!1}}]),e}(),JL=function(){function e(t,n,r,i){var a=this;ni(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=aC.UNAUTHENTICATED,this.clientId=NC.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lC("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return lC("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return x(e,[{key:"getConfiguration",value:function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gC(mC.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new kC;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(o(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=_D(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $L(e,t){return XL.apply(this,arguments)}function XL(){return XL=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),lC("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,OA(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),XL.apply(this,arguments)}function ZL(e,t){return eM.apply(this,arguments)}function eM(){return eM=o(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tM(t);case 3:return r=e.sent,lC("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return pD(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return pD(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eM.apply(this,arguments)}function tM(e){return nM.apply(this,arguments)}function nM(){return nM=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return lC("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$L(t,new VL);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),nM.apply(this,arguments)}function rM(e){return iM.apply(this,arguments)}function iM(){return iM=o(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return lC("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ZL(t,new WL);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),iM.apply(this,arguments)}function oM(e){return tM(e).then((function(e){return e.persistence}))}function aM(e){return tM(e).then((function(e){return e.localStore}))}function sM(e){return rM(e).then((function(e){return e.remoteStore}))}function uM(e){return rM(e).then((function(e){return e.syncEngine}))}function cM(e){return lM.apply(this,arguments)}function lM(){return lM=o(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rM(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=HD.bind(null,n.syncEngine),r.onUnlisten=YD.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lM.apply(this,arguments)}function hM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new KL({next:function(o){t.enqueueAndForget((function(){return RD(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new gC(mC.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new gC(mC.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new DD(VI(n.path),o,{includeMetadataChanges:!0,wo:!0});return CD(e,a)},i.next=3,cM(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function fM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new KL({next:function(n){t.enqueueAndForget((function(){return RD(e,a)})),n.fromCache&&"server"===r.source?i.reject(new gC(mC.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new DD(n,o,{includeMetadataChanges:!0,wo:!0});return CD(e,a)},i.next=3,cM(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dM=x((function e(t,n,r,i,o,a,s,u){ni(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.useFetchStreams=u})),pM=function(){function e(t,n){ni(this,e),this.projectId=t,this.database=n||"(default)"}return x(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),vM=new Map;function yM(e,t,n){if(!n)throw new gC(mC.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function mM(e,t,n,r){if(!0===t&&!0===r)throw new gC(mC.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function gM(e){if(!tI.isDocumentKey(e))throw new gC(mC.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kM(e){if(tI.isDocumentKey(e))throw new gC(mC.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bM(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":pC()}function _M(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gC(mC.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=bM(e);throw new gC(mC.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function wM(e,t){if(t<=0)throw new gC(mC.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var xM=function(){function e(t){var n;if(ni(this,e),void 0===t.host){if(void 0!==t.ssl)throw new gC(mC.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new gC(mC.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return x(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),SM=function(){function e(t,n,r){ni(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xM({}),this._settingsFrozen=!1,t instanceof pM?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gC(mC.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pM(e.options.projectId)}(t))}return x(e,[{key:"app",get:function(){if(!this._app)throw new gC(mC.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gC(mC.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xM(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _C;switch(e.type){case"gapi":var t=e.client;return vC(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new TC(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new gC(mC.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=vM.get(e);t&&(lC("ComponentProvider","Removing Datastore"),vM.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function TM(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=_M(e,SM))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&fC("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,s;if("string"==typeof i.mockUserToken)a=i.mockUserToken,s=aC.MOCK_USER;else{a=_o(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new gC(mC.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new aC(u)}e._authCredentials=new wC(new bC(a,s))}}var EM=function(){function e(t,n,r){ni(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return x(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new IM(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),CM=function(){function e(t,n,r){ni(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return x(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),IM=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this,e,r,VI(i)))._path=i,o.type="collection",o}return x(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new EM(this.firestore,null,new tI(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(CM);function RM(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ta(e),yM("collection","path",t),e instanceof SM){var o=qC.fromString.apply(qC,[t].concat(r));return kM(o),new IM(e,null,o)}if(!(e instanceof EM||e instanceof IM))throw new gC(mC.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(qC.fromString.apply(qC,[t].concat(r)));return kM(a),new IM(e.firestore,null,a)}function NM(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ta(e),1===arguments.length&&(t=NC.A()),yM("doc","path",t),e instanceof SM){var o=qC.fromString.apply(qC,[t].concat(r));return gM(o),new EM(e,null,new tI(o))}if(!(e instanceof EM||e instanceof IM))throw new gC(mC.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(qC.fromString.apply(qC,[t].concat(r)));return gM(a),new EM(e.firestore,e instanceof IM?e.converter:null,new tI(a))}function PM(e,t){return e=ta(e),t=ta(t),(e instanceof EM||e instanceof IM)&&(t instanceof EM||t instanceof IM)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function AM(e,t){return e=ta(e),t=ta(t),e instanceof CM&&t instanceof CM&&e.firestore===t.firestore&&JI(e._query,t._query)&&e.converter===t.converter}var OM=function(){function e(){var t=this;ni(this,e),this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new EO(this,"async_queue_retry"),this.bc=function(){var e=SO();e&&lC("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=SO();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.bc)}return x(e,[{key:"isShuttingDown",get:function(){return this.yc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pc(),this.vc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;var t=SO();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pc(),this.yc)return new Promise((function(){}));var n=new kC;return this.vc((function(){return t.yc&&t.Ac?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))}},{key:"Vc",value:function(){var e=o(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.gc.length){e.next=14;break}return e.prev=1,e.next=4,this.gc[0]();case 4:this.gc.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),mP(e.t0)){e.next=12;break}throw e.t0;case 12:lC("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.gc.length>0&&this.ur.Zi((function(){return t.Vc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(e){var t=this,n=this.mc.then((function(){return t.Ic=!0,e().catch((function(e){t.Ec=e,t.Ic=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hC("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ic=!1,e}))}));return this.mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);var i=bD.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i}},{key:"Pc",value:function(){this.Ec&&pC()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Dc",value:function(){var e=o(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mc,e.next=3,t;case 3:if(t!==this.mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(e){var t,n=Zi(this.Tc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Nc",value:function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Zi(t.Tc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.Dc()}))}},{key:"kc",value:function(e){this.Rc.push(e)}},{key:"Sc",value:function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}]),e}();function DM(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Zi(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"==typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e)}var LM=function(){function e(){ni(this,e),this._progressObserver={},this._taskCompletionResolver=new kC,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return x(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),MM=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this,e,r,i)).type="firestore",o._queue=new OM,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return x(n,[{key:"_terminate",value:function(){return this._firestoreClient||UM(this),this._firestoreClient.terminate()}}]),n}(SM);function FM(e){return e._firestoreClient||UM(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function UM(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new dM(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new JL(e._authCredentials,e._appCheckCredentials,e._queue,r)}function jM(e,t,n){var r=new kC;return e.asyncQueue.enqueue(o(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$L(e,n);case 3:return i.next=5,ZL(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===mC.FAILED_PRECONDITION||e.code===mC.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function qM(e){return function(e){return e.asyncQueue.enqueue(o(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oM(e);case 2:return n=t.sent,t.next=5,sM(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yC(e);return t.Gr.delete(0),OO(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(FM(e=_M(e,MM)))}function VM(e){return function(e){return e.asyncQueue.enqueue(o(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oM(e);case 2:return n=t.sent,t.next=5,sM(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yC(t)).Gr.add(0),e.next=4,LO(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(FM(e=_M(e,MM)))}function BM(e,t){var n=FM(e=_M(e,MM)),r=new LM;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GL(e,t)}(function(e,t){if(e instanceof Uint8Array)return HL(e,t);if(e instanceof ArrayBuffer)return HL(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,TO(t));e.asyncQueue.enqueueAndForget(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qL,t.next=3,uM(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function zM(e,t){return function(e,t){return e.asyncQueue.enqueue(o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yC(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,aM(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(FM(e=_M(e,MM)),t).then((function(t){return t?new CM(e,null,t.query):null}))}function WM(e){if(e._initialized||e._terminated)throw new gC(mC.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HM=function(){function e(){ni(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new gC(mC.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new BC(n)}return x(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var KM=function(){function e(t){ni(this,e),this._byteString=t}return x(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(WC.fromBase64String(t))}catch(t){throw new gC(mC.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(WC.fromUint8Array(t))}}]),e}(),GM=x((function e(t){ni(this,e),this._methodName=t})),QM=function(){function e(t,n){if(ni(this,e),!isFinite(t)||t<-90||t>90)throw new gC(mC.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new gC(mC.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return x(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return PC(this._lat,e._lat)||PC(this._long,e._long)}}]),e}(),YM=/^__.*__$/,JM=function(){function e(t,n,r){ni(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return x(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new IR(e,this.data,this.fieldMask,t,this.fieldTransforms):new CR(e,this.data,t,this.fieldTransforms)}}]),e}(),$M=function(){function e(t,n,r){ni(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return x(e,[{key:"toMutation",value:function(e,t){return new IR(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function XM(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pC()}}var ZM=function(){function e(t,n,r,i,o,a){ni(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===o&&this.xc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return x(e,[{key:"path",get:function(){return this.settings.path}},{key:"$c",get:function(){return this.settings.$c}},{key:"Oc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Mc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.Lc(e),r}},{key:"Bc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.xc(),r}},{key:"Uc",value:function(e){return this.Oc({path:void 0,Fc:!0})}},{key:"qc",value:function(e){return kF(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}},{key:"Lc",value:function(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(XM(this.$c)&&YM.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}]),e}(),eF=function(){function e(t,n,r){ni(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||TO(t)}return x(e,[{key:"Qc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ZM({$c:e,methodName:t,jc:n,path:BC.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function tF(e){var t=e._freezeSettings(),n=TO(e._databaseId);return new eF(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nF(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.Qc(o.merge||o.mergeFields?2:0,t,n,i);vF("Data must be an object, but it was:",a,r);var s,u,c=dF(r,a);if(o.merge)s=new zC(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){var l,h=[],f=Zi(o.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=yF(t,d,n);if(!a.contains(p))throw new gC(mC.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));bF(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new zC(h),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new JM(new yI(c),s,u)}var rF=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.$c)throw 1===e.$c?e.qc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(GM);function iF(e,t,n){return new ZM({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var oF=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"_toFieldTransform",value:function(e){return new mR(e.path,new cR)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(GM),aF=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e)).Wc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=iF(this,e,!0),n=this.Wc.map((function(e){return fF(e,t)})),r=new lR(n);return new mR(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GM),sF=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e)).Wc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=iF(this,e,!0),n=this.Wc.map((function(e){return fF(e,t)})),r=new fR(n);return new mR(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GM),uF=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e)).Gc=r,i}return x(n,[{key:"_toFieldTransform",value:function(e){var t=new pR(e.k,iR(e.k,this.Gc));return new mR(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(GM);function cF(e,t,n,r){var i=e.Qc(1,t,n);vF("Data must be an object, but it was:",i,r);var o=[],a=yI.empty();FC(r,(function(e,r){var s=gF(t,e,n);r=ta(r);var u=i.Bc(s);if(r instanceof rF)o.push(s);else{var c=fF(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new zC(o);return new $M(a,s,i.fieldTransforms)}function lF(e,t,n,r,i,o){var a=e.Qc(1,t,n),s=[yF(t,r,n)],u=[i];if(o.length%2!=0)throw new gC(mC.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)s.push(yF(t,o[c])),u.push(o[c+1]);for(var l=[],h=yI.empty(),f=s.length-1;f>=0;--f)if(!bF(l,s[f])){var d=s[f],p=u[f];p=ta(p);var v=a.Bc(d);if(p instanceof rF)l.push(d);else{var y=fF(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new zC(l);return new $M(h,m,a.fieldTransforms)}function hF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fF(n,e.Qc(r?4:3,t))}function fF(e,t){if(pF(e=ta(e)))return vF("Unsupported field value:",t,e),dF(e,t);if(e instanceof GM)return function(e,t){if(!XM(t.$c))throw t.qc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=Zi(e);try{for(o.s();!(n=o.n()).done;){var a=fF(n.value,t.Uc(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(s){o.e(s)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ta(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return iR(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=DC.fromDate(e);return{timestampValue:fN(t.k,n)}}if(e instanceof DC){var r=new DC(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fN(t.k,r)}}if(e instanceof QM)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof KM)return{bytesValue:dN(t.k,e._byteString)};if(e instanceof EM){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.qc("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:yN(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc("Unsupported field value: ".concat(bM(e)))}(e,t)}function dF(e,t){var n={};return UC(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):FC(e,(function(e,r){var i=fF(r,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function pF(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof DC||e instanceof QM||e instanceof KM||e instanceof EM||e instanceof GM)}function vF(e,t,n){if(!pF(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=bM(n);throw"an object"===r?t.qc(e+" a custom object"):t.qc(e+" "+r)}}function yF(e,t,n){if((t=ta(t))instanceof HM)return t._internalPath;if("string"==typeof t)return gF(e,t);throw kF("Field path arguments must be of type string or ",e,!1,void 0,n)}var mF=new RegExp("[~\\*/\\[\\]]");function gF(e,t,n){if(t.search(mF)>=0)throw kF("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return oo(HM,_t(t.split(".")))._internalPath}catch(r){throw kF("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function kF(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field ".concat(r)),a&&(u+=" in document ".concat(i)),u+=")"),new gC(mC.INVALID_ARGUMENT,s+e+u)}function bF(e,t){return e.some((function(e){return e.isEqual(t)}))}var _F=function(){function e(t,n,r,i,o){ni(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return x(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new EM(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new wF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(xF("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),wF=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(){return Xa(to(n.prototype),"data",this).call(this)}}]),n}(_F);function xF(e,t){return"string"==typeof t?gF(e,t):t instanceof HM?t._internalPath:t._delegate._internalPath}var SF=function(){function e(t,n){ni(this,e),this.hasPendingWrites=t,this.fromCache=n}return x(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),TF=function(e){eo(n,e);var t=io(n);function n(e,r,i,o,a,s){var u;return ni(this,n),(u=t.call(this,e,r,i,o,s))._firestore=e,u._firestoreImpl=e,u.metadata=a,u}return x(n,[{key:"exists",value:function(){return Xa(to(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new EF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(xF("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(_F),EF=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xa(to(n.prototype),"data",this).call(this,e)}}]),n}(TF),CF=function(){function e(t,n,r,i){ni(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new SF(i.hasPendingWrites,i.fromCache),this.query=r}return x(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new EF(n._firestore,n._userDataWriter,r.key,r,new SF(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gC(mC.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new EF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new SF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new EF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new SF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:IF(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function IF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pC()}}function RF(e,t){return e instanceof TF&&t instanceof TF?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof CF&&t instanceof CF&&e._firestore===t._firestore&&AM(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function NF(e){if(zI(e)&&0===e.explicitOrderBy.length)throw new gC(mC.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var PF=x((function e(){ni(this,e)}));function AF(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=a._apply(e)}return e}var OF=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).zc=e,o.Hc=r,o.Jc=i,o.type="where",o}return x(n,[{key:"_apply",value:function(e){var t=tF(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new gC(mC.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){WF(a,o);var u,c=[],l=Zi(a);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(zF(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=zF(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||WF(a,o),s=hF(n,"where",a,"in"===o||"not-in"===o);var f=SI.create(i,o,s);return function(e,t){if(t.V()){var n=HI(e);if(null!==n&&!n.isEqual(t.field))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=WI(e);null!==r&&HF(e,t.field,r)}var i=function(e,t){var n,r=Zi(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new gC(mC.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gC(mC.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new CM(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new jI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(PF);var DF=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this)).zc=e,i.Yc=r,i.type="orderBy",i}return x(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new gC(mC.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gC(mC.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new LI(t,n);return function(e,t){if(null===WI(e)){var n=HI(e);null!==n&&HF(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new CM(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new jI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(PF);var LF=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).type=e,o.Xc=r,o.Zc=i,o}return x(n,[{key:"_apply",value:function(e){return new CM(e.firestore,e.converter,YI(e._query,this.Xc,this.Zc))}}]),n}(PF);var MF=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).type=e,o.ta=r,o.ea=i,o}return x(n,[{key:"_apply",value:function(e){var t=BF(e,this.type,this.ta,this.ea);return new CM(e.firestore,e.converter,function(e,t){return new jI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(PF);function FF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MF("startAt",t,!0)}function UF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MF("startAfter",t,!1)}var jF=function(e){eo(n,e);var t=io(n);function n(e,r,i){var o;return ni(this,n),(o=t.call(this)).type=e,o.ta=r,o.ea=i,o}return x(n,[{key:"_apply",value:function(e){var t=BF(e,this.type,this.ta,this.ea);return new CM(e.firestore,e.converter,function(e,t){return new jI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(PF);function qF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jF("endBefore",t,!0)}function VF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jF("endAt",t,!1)}function BF(e,t,n,r){if(n[0]=ta(n[0]),n[0]instanceof _F)return function(e,t,n,r,i){if(!r)throw new gC(mC.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var o,a=[],s=Zi(GI(e));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.field.isKeyField())a.push(cI(t,r.key));else{var c=r.data.field(u.field);if(YC(c))throw new gC(mC.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new gC(mC.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}a.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new OI(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=tF(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new gC(mC.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new gC(mC.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!KI(e)&&-1!==c.indexOf("/"))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(qC.fromString(c));if(!tI.isDocumentKey(l))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new tI(l);s.push(cI(t,h))}else{var f=hF(n,r,c);s.push(f)}}return new OI(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function zF(e,t,n){if("string"==typeof(n=ta(n))){if(""===n)throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KI(t)&&-1!==n.indexOf("/"))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(qC.fromString(n));if(!tI.isDocumentKey(r))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return cI(e,new tI(r))}if(n instanceof EM)return cI(e,n._key);throw new gC(mC.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bM(n),"."))}function WF(e,t){if(!Array.isArray(e)||0===e.length)throw new gC(mC.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new gC(mC.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function HF(e,t,n){if(!n.isEqual(t))throw new gC(mC.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var KF=function(){function e(){ni(this,e)}return x(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nI(e)){case 0:return null;case 1:return e.booleanValue;case 2:return GC(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(QC(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pC()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return FC(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new QM(GC(e.latitude),GC(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=JC(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($C(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=KC(e);return new DC(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=qC.fromString(e);vC(BN(n));var r=new pM(n.get(1),n.get(3)),i=new tI(n.popFirst(5));return r.isEqual(t)||hC("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function GF(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var QF=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new KM(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new EM(this.firestore,null,t)}}]),n}(KF),YF=function(){function e(t,n){ni(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tF(t)}return x(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=JF(e,this._firestore),i=GF(r.converter,t,n),o=nF(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,kR.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=JF(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return r="string"==typeof(t=ta(t))||t instanceof HM?lF(this._dataReader,"WriteBatch.update",i._key,t,n,a):cF(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,kR.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=JF(e,this._firestore);return this._mutations=this._mutations.concat(new DR(t._key,kR.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new gC(mC.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function JF(e,t){if((e=ta(e)).firestore!==t)throw new gC(mC.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var $F=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new KM(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new EM(this.firestore,null,t)}}]),n}(KF);function XF(e){e=_M(e,EM);var t=_M(e.firestore,MM),n=FM(t),r=new $F(t);return function(e,t){var n=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=o(f().mark((function e(t,n,r){var i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yC(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new gC(mC.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=_D(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new TF(t,r,e._key,n,new SF(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function ZF(e){e=_M(e,CM);var t=_M(e.firestore,MM),n=FM(t),r=new $F(t);return function(e,t){var n=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=o(f().mark((function e(t,n,r){var i,o,a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zA(t,n,!0);case 3:i=e.sent,o=new VD(n,i.zn),a=o.Po(i.documents),s=o.applyChanges(a,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=_D(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new CF(t,r,e,n)}))}function eU(e,t,n){e=_M(e,EM);var r=_M(e.firestore,MM),i=GF(e.converter,t,n);return iU(r,[nF(tF(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kR.none())])}function tU(e,t,n){e=_M(e,EM);for(var r=_M(e.firestore,MM),i=tF(r),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return iU(r,[("string"==typeof(t=ta(t))||t instanceof HM?lF(i,"updateDoc",e._key,t,n,a):cF(i,"updateDoc",e._key,t)).toMutation(e._key,kR.exists(!0))])}function nU(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s;e=ta(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||DM(n[c])||(u=n[c],c++);var l,h,d,p={includeMetadataChanges:u.includeMetadataChanges};if(DM(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[c+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof EM)h=_M(e.firestore,MM),d=VI(e._key.path),l={next:function(t){n[c]&&n[c](oU(h,e,t))},error:n[c+1],complete:n[c+2]};else{var y=_M(e,CM);h=_M(y.firestore,MM),d=y._query;var m=new $F(h);l={next:function(e){n[c]&&n[c](new CF(h,m,y,e))},error:n[c+1],complete:n[c+2]},NF(e._query)}return function(e,t,n,r){var i=new KL(r),a=new DD(t,i,n);return e.asyncQueue.enqueueAndForget(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CD,t.next=3,cM(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.nc(),e.asyncQueue.enqueueAndForget(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=RD,t.next=3,cM(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(FM(h),d,p,l)}function rU(e,t){return function(e,t){var n=new KL(t);return e.asyncQueue.enqueueAndForget(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yC(e).io.add(t),t.next()},t.next=3,cM(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.nc(),e.asyncQueue.enqueueAndForget(o(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yC(e).io.delete(t)},t.next=3,cM(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(FM(e=_M(e,MM)),DM(t)?t:{next:t})}function iU(e,t){return function(e,t){var n=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$D,r.next=3,uM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(FM(e),t)}function oU(e,t,n){var r=n.docs.get(t._key),i=new $F(e);return new TF(e,i,t._key,r,new SF(n.hasPendingWrites,n.fromCache),t.converter)}var aU=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,r))._firestore=e,i}return x(n,[{key:"get",value:function(e){var t=this,r=JF(e,this._firestore),i=new $F(this._firestore);return Xa(to(n.prototype),"get",this).call(this,e).then((function(e){return new TF(t._firestore,i,r._key,e._document,new SF(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ni(this,e),this._firestore=t,this._transaction=n,this._dataReader=tF(t)}return x(e,[{key:"get",value:function(e){var t=this,n=JF(e,this._firestore),r=new QF(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return pC();var i=e[0];if(i.isFoundDocument())return new _F(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new _F(t._firestore,r,n._key,null,n.converter);throw pC()}))}},{key:"set",value:function(e,t,n){var r=JF(e,this._firestore),i=GF(r.converter,t,n),o=nF(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}},{key:"update",value:function(e,t,n){for(var r,i=JF(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return r="string"==typeof(t=ta(t))||t instanceof HM?lF(this._dataReader,"Transaction.update",i._key,t,n,a):cF(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=JF(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function sU(e,t){return function(e,t){var n=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return rM(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new YL(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(FM(e=_M(e,MM)),(function(n){return t(new aU(e,n))}))}function uU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aF("arrayUnion",t)}function cU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sF("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sC=e}(La),Ea(new na("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),o=new MM(i,new xC(e.getProvider("auth-internal")),new CC(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC")),Va(oC,"3.4.4",e),Va(oC,"3.4.4","esm2017")}();function lU(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gC("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hU(){if("undefined"===typeof Uint8Array)throw new gC("unimplemented","Uint8Arrays are not available in this environment.")}function fU(){if("undefined"==typeof atob)throw new gC("unimplemented","Blobs are unavailable in Firestore in this environment.")}var dU=function(){function e(t){ni(this,e),this._delegate=t}return x(e,[{key:"toBase64",value:function(){return fU(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return hU(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return fU(),new e(KM.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return hU(),new e(KM.fromUint8Array(t))}}]),e}();function pU(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Zi(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"===typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e,["next","error","complete"])}var vU=function(){function e(){ni(this,e)}return x(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){WM(e=_M(e,MM));var n=FM(e),r=e._freezeSettings(),i=new WL;return jM(n,i,new BL(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){WM(e=_M(e,MM));var t=FM(e),n=e._freezeSettings(),r=new WL;return jM(t,r,new zL(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new gC(mC.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new kC;return e._queue.enqueueAndForgetEvenWhileRestricted(o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=o(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pP.Pt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,pP.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(EA(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),yU=function(){function e(t,n,r){var i=this;ni(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof pM||(this._appCompat=t)}return x(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||fC("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};TM(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return qM(this._delegate)}},{key:"disableNetwork",value:function(){return VM(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&mM("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new kC;return e.asyncQueue.enqueueAndForget(o(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=uL,n.next=3,uM(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(FM(e=_M(e,MM)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return rU(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new gC("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new NU(this,RM(this._delegate,e))}catch(t){throw wU(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _U(this,NM(this._delegate,e))}catch(t){throw wU(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new CU(this,function(e,t){if(e=_M(e,SM),yM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gC(mC.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new CM(e,null,function(e){return new jI(qC.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wU(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return sU(this._delegate,(function(n){return e(new gU(t,n))}))}},{key:"batch",value:function(){var e=this;return FM(this._delegate),new kU(new YF(this._delegate,(function(t){return iU(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return BM(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return zM(this._delegate,e).then((function(e){return e?new CU(t,e):null}))}}]),e}(),mU=function(e){eo(n,e);var t=io(n);function n(e){var r;return ni(this,n),(r=t.call(this)).firestore=e,r}return x(n,[{key:"convertBytes",value:function(e){return new dU(new KM(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _U.forKey(t,this.firestore,null)}}]),n}(KF);var gU=function(){function e(t,n){ni(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new mU(t)}return x(e,[{key:"get",value:function(e){var t=this,n=PU(e);return this._delegate.get(n).then((function(e){return new TU(t._firestore,new TF(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=PU(e);return n?(lU("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,s=PU(e);2===arguments.length?this._delegate.update(s,t):(a=this._delegate).update.apply(a,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PU(e);return this._delegate.delete(t),this}}]),e}(),kU=function(){function e(t){ni(this,e),this._delegate=t}return x(e,[{key:"set",value:function(e,t,n){var r=PU(e);return n?(lU("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,s=PU(e);2===arguments.length?this._delegate.update(s,t):(a=this._delegate).update.apply(a,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PU(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),bU=function(){function e(t,n,r){ni(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return x(e,[{key:"fromFirestore",value:function(e,t){var n=new EF(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EU(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new mU(t),n),i.set(n,o)),o}}]),e}();bU.INSTANCES=new WeakMap;var _U=function(){function e(t,n){ni(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mU(t)}return x(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new NU(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new NU(this.firestore,RM(this._delegate,e))}catch(t){throw wU(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ta(e))instanceof EM&&PM(this._delegate,e)}},{key:"set",value:function(e,t){t=lU("DocumentReference.set",t);try{return t?eU(this._delegate,e,t):eU(this._delegate,e)}catch(n){throw wU(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tU(this._delegate,e):tU.apply(void 0,[this._delegate,e,t].concat(r))}catch(o){throw wU(o,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return iU(_M(e.firestore,MM),[new DR(e._key,kR.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=xU(n),o=SU(n,(function(t){return new TU(e.firestore,new TF(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nU(this._delegate,i,o)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?XF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_M(e,EM);var t=_M(e.firestore,MM);return hM(FM(t),e._key,{source:"server"}).then((function(n){return oU(t,e,n)}))}(this._delegate):function(e){e=_M(e,EM);var t=_M(e.firestore,MM);return hM(FM(t),e._key).then((function(n){return oU(t,e,n)}))}(this._delegate),t.then((function(e){return new TU(n.firestore,new TF(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bU.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new gC("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new EM(n._delegate,r,new tI(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new EM(n._delegate,r,t))}}]),e}();function wU(e,t,n){return e.message=e.message.replace(t,n),e}function xU(e){var t,n=Zi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!pU(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function SU(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=pU(e[0])?e[0]:pU(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var TU=function(){function e(t,n){ni(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"ref",get:function(){return new _U(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return RF(this._delegate,e._delegate)}}]),e}(),EU=function(e){eo(n,e);var t=io(n);function n(){return ni(this,n),t.apply(this,arguments)}return x(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||pC()}(void 0!==t),t}}]),n}(TU),CU=function(){function e(t,n){ni(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mU(t)}return x(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,AF(this._delegate,function(e,t,n){var r=t,i=xF("where",e);return new OF(i,r,n)}(t,n,r)))}catch(i){throw wU(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,AF(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xF("orderBy",e);return new DF(n,t)}(t,n)))}catch(r){throw wU(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,AF(this._delegate,function(e){return wM("limit",e),new LF("limit",e,"F")}(t)))}catch(n){throw wU(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,AF(this._delegate,function(e){return wM("limitToLast",e),new LF("limitToLast",e,"L")}(t)))}catch(n){throw wU(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,AF(this._delegate,FF.apply(void 0,arguments)))}catch(t){throw wU(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,AF(this._delegate,UF.apply(void 0,arguments)))}catch(t){throw wU(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,AF(this._delegate,qF.apply(void 0,arguments)))}catch(t){throw wU(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,AF(this._delegate,VF.apply(void 0,arguments)))}catch(t){throw wU(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return AM(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ZF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_M(e,CM);var t=_M(e.firestore,MM),n=FM(t),r=new $F(t);return fM(n,e._query,{source:"server"}).then((function(n){return new CF(t,r,e,n)}))}(this._delegate):function(e){e=_M(e,CM);var t=_M(e.firestore,MM),n=FM(t),r=new $F(t);return NF(e._query),fM(n,e._query).then((function(n){return new CF(t,r,e,n)}))}(this._delegate),t.then((function(e){return new RU(n.firestore,new CF(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=xU(n),o=SU(n,(function(t){return new RU(e.firestore,new CF(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nU(this._delegate,i,o)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bU.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IU=function(){function e(t,n){ni(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new EU(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),RU=function(){function e(t,n){ni(this,e),this._firestore=t,this._delegate=n}return x(e,[{key:"query",get:function(){return new CU(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new EU(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IU(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new EU(n._firestore,r))}))}},{key:"isEqual",value:function(e){return RF(this._delegate,e._delegate)}}]),e}(),NU=function(e){eo(n,e);var t=io(n);function n(e,r){var i;return ni(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return x(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _U(this.firestore,e):null}},{key:"doc",value:function(e){try{return new _U(this.firestore,void 0===e?NM(this._delegate):NM(this._delegate,e))}catch(t){throw wU(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=_M(e.firestore,MM),r=NM(e),i=GF(e.converter,t);return iU(n,[nF(tF(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kR.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _U(t.firestore,e)}))}},{key:"isEqual",value:function(e){return PM(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(bU.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(CU);function PU(e){return _M(e,EM)}var AU=function(){function e(){ni(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=oo(HM,n)}return x(e,[{key:"isEqual",value:function(e){return(e=ta(e))instanceof HM&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(BC.keyField().canonicalString())}}]),e}(),OU=function(){function e(t){ni(this,e),this._delegate=t}return x(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new oF("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new rF("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=uU.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=cU.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new uF("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),DU={Firestore:yU,GeoPoint:QM,Timestamp:DC,Blob:dU,Transaction:gU,WriteBatch:kU,DocumentReference:_U,DocumentSnapshot:TU,Query:CU,QueryDocumentSnapshot:EU,QuerySnapshot:RU,CollectionReference:NU,FieldPath:AU,FieldValue:OU,setLogLevel:function(e){!function(e){uC.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new na("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},DU)))}(e,(function(e,t){return new yU(e,t,new vU)})),e.registerVersion("@firebase/firestore-compat","0.1.13")}(Ja);Ja.initializeApp({apiKey:"AIzaSyAP0yhg-NJJ8htFdIL-c7Ckkx22t_IaEA4",authDomain:"photo-social-9d90d.firebaseapp.com",projectId:"photo-social-9d90d",storageBucket:"photo-social-9d90d.appspot.com",messagingSenderId:"210100159107",appId:"1:210100159107:web:dbf1950443cd6f036111b6"}).firestore();var LU=Ja.auth(),MU=Ja.storage(),FU=n(569),UU=n.n(FU)().create({baseURL:"https://photo-app-backend288.herokuapp.com/"}),jU=function(e){var n=e.username,r=l((0,t.useState)(null),2),i=r[0],o=r[1],a=l((0,t.useState)(0),2),s=a[0],u=a[1],c=l((0,t.useState)(""),2),h=c[0],f=c[1],d=l((0,t.useState)(""),2),p=(d[0],d[1]);return(0,Hr.jsx)("div",{className:"footer",children:(0,Hr.jsxs)("div",{className:"imageUpload",children:[(0,Hr.jsx)("progress",{className:"imageUpload__progress",value:s,max:"100"}),(0,Hr.jsx)("input",{type:"text",placeholder:"Enter a caption...",className:"imageUpload__input",value:h,onChange:function(e){return f(e.target.value)}}),(0,Hr.jsxs)("div",{className:"container",children:[(0,Hr.jsx)("input",{className:"imageUpload__file",type:"file",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),(0,Hr.jsx)("button",{className:"imageUpload__button",onClick:function(){MU.ref("images/".concat(i.name)).put(i).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);u(t)}),(function(e){console.log(e)}),(function(){MU.ref("images").child(i.name).getDownloadURL().then((function(e){p(e),UU.post("/upload",{caption:h,user:n,image:e}),u(0),f(""),o(null)}))}))},children:"Upload"})]})]})})},qU=n(281),VU=n.n(qU);function BU(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var zU=Gr((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"1px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var WU=function(){var e=zU(),n=l(t.useState(BU),1)[0],r=l((0,t.useState)(!1),2),i=r[0],a=r[1],s=l((0,t.useState)(""),2),u=s[0],c=s[1],h=l((0,t.useState)(""),2),d=h[0],p=h[1],v=l((0,t.useState)(""),2),y=v[0],m=v[1],g=l((0,t.useState)([]),2),k=g[0],b=g[1],_=l((0,t.useState)(null),2),w=_[0],x=_[1];(0,t.useEffect)((function(){var e=LU.onAuthStateChanged((function(e){e?(console.log(e),x(e)):x(null)}));return function(){e()}}),[w,u]);var S=function(){var e=o(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UU.get("/sync").then((function(e){console.log(e),b(e.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){new(VU())("cfd4921e7187e348e2fb",{cluster:"us2"}).subscribe("posts").bind("inserted",(function(e){console.log("data received",e),S()}))}),[]),(0,t.useEffect)((function(){S()}),[]);var T=l((0,t.useState)(!1),2),E=T[0],C=T[1];return(0,Hr.jsxs)("div",{className:"app",children:[(0,Hr.jsx)(pi,{open:i,onClose:function(){return a(!1)},children:(0,Hr.jsx)("div",{style:n,className:e.paper,children:(0,Hr.jsxs)("form",{className:"app__signup",children:[(0,Hr.jsx)("center",{children:(0,Hr.jsx)("img",{className:"app__headerImage",src:"rpics.png",alt:"Header"})}),(0,Hr.jsx)(Ci,{placeholder:"username",type:"text",value:u,onChange:function(e){return c(e.target.value)}}),(0,Hr.jsx)(Ci,{placeholder:"email",type:"text",value:d,onChange:function(e){return p(e.target.value)}}),(0,Hr.jsx)(Ci,{placeholder:"password",type:"password",value:y,onChange:function(e){return m(e.target.value)}}),(0,Hr.jsx)(Xi,{type:"submit",onClick:function(e){e.preventDefault(),LU.createUserWithEmailAndPassword(d,y).then((function(e){return e.user.updateProfile({displayName:u})})).catch((function(e){return alert(e.message)})),a(!1)},children:"Sign Up"})]})})}),(0,Hr.jsx)(pi,{open:E,onClose:function(){return C(!1)},children:(0,Hr.jsx)("div",{style:n,className:e.paper,children:(0,Hr.jsxs)("form",{className:"app__signup",children:[(0,Hr.jsx)("center",{children:(0,Hr.jsx)("img",{className:"app__headerImage",src:"rpics.png",alt:"Header"})}),(0,Hr.jsx)(Ci,{placeholder:"email",type:"text",value:d,onChange:function(e){return p(e.target.value)}}),(0,Hr.jsx)(Ci,{placeholder:"password",type:"password",value:y,onChange:function(e){return m(e.target.value)}}),(0,Hr.jsx)(Xi,{type:"submit",onClick:function(e){e.preventDefault(),LU.signInWithEmailAndPassword(d,y).catch((function(e){return alert(e.message)})),C(!1)},children:"Sign In"})]})})}),(0,Hr.jsxs)("div",{className:"app__header",children:[(0,Hr.jsx)("img",{className:"app__headerImage",src:"flower_Icon.png",alt:"Header"}),w?(0,Hr.jsx)(Xi,{onClick:function(){return LU.signOut()},children:"Logout"}):(0,Hr.jsxs)("div",{className:"app__loginContainer",children:[(0,Hr.jsx)(Xi,{onClick:function(){return C(!0)},children:"Sign In"}),(0,Hr.jsx)(Xi,{onClick:function(){return a(!0)},children:"Sign Up"})]})]}),null!==w&&void 0!==w&&w.displayName?(0,Hr.jsx)(jU,{username:w.displayName}):(0,Hr.jsx)("div",{className:"app__notLogin",children:(0,Hr.jsx)("img",{src:"rpicslogo.gif"})}),(0,Hr.jsx)("div",{className:"app__posts",children:k.map((function(e){return(0,Hr.jsx)(Kr,{username:e.user,caption:e.caption,imageUrl:e.image},e._id)}))})]})};r.render((0,Hr.jsx)(t.StrictMode,{children:(0,Hr.jsx)(WU,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.8bd4c8b9.js.map